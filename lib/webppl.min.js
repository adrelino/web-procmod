(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(process,__filename){"use strict";function amdefine(module,requireFn){"use strict";var defineCache={},loaderCache={},alreadyCalled=false,path=require("path"),makeRequire,stringRequire;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName){var baseParts;if(name&&name.charAt(0)==="."){if(baseName){baseParts=baseName.split("/");baseParts=baseParts.slice(0,baseParts.length-1);baseParts=baseParts.concat(name.split("/"));trimDots(baseParts);name=baseParts.join("/")}}return name}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(id){function load(value){loaderCache[id]=value}load.fromText=function(id,text){throw new Error("amdefine does not implement load.fromText")};return load}makeRequire=function(systemRequire,exports,module,relId){function amdRequire(deps,callback){if(typeof deps==="string"){return stringRequire(systemRequire,exports,module,deps,relId)}else{deps=deps.map(function(depName){return stringRequire(systemRequire,exports,module,depName,relId)});process.nextTick(function(){callback.apply(null,deps)})}}amdRequire.toUrl=function(filePath){if(filePath.indexOf(".")===0){return normalize(filePath,path.dirname(module.filename))}else{return filePath}};return amdRequire};requireFn=requireFn||function req(){return module.require.apply(module,arguments)};function runFactory(id,deps,factory){var r,e,m,result;if(id){e=loaderCache[id]={};m={id:id,uri:__filename,exports:e};r=makeRequire(requireFn,e,m,id)}else{if(alreadyCalled){throw new Error("amdefine with no module ID cannot be called more than once per file.")}alreadyCalled=true;e=module.exports;m=module;r=makeRequire(requireFn,e,m,module.id)}if(deps){deps=deps.map(function(depName){return r(depName)})}if(typeof factory==="function"){result=factory.apply(m.exports,deps)}else{result=factory}if(result!==undefined){m.exports=result;if(id){loaderCache[id]=m.exports}}}stringRequire=function(systemRequire,exports,module,id,relId){var index=id.indexOf("!"),originalId=id,prefix,plugin;if(index===-1){id=normalize(id,relId);if(id==="require"){return makeRequire(systemRequire,exports,module,relId)}else if(id==="exports"){return exports}else if(id==="module"){return module}else if(loaderCache.hasOwnProperty(id)){return loaderCache[id]}else if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}else{if(systemRequire){return systemRequire(originalId)}else{throw new Error("No module with ID: "+id)}}}else{prefix=id.substring(0,index);id=id.substring(index+1,id.length);plugin=stringRequire(systemRequire,exports,module,prefix,relId);if(plugin.normalize){id=plugin.normalize(id,makeNormalize(relId))}else{id=normalize(id,relId)}if(loaderCache[id]){return loaderCache[id]}else{plugin.load(id,makeRequire(systemRequire,exports,module,relId),makeLoad(id),{});return loaderCache[id]}}};function define(id,deps,factory){if(Array.isArray(id)){factory=deps;deps=id;id=undefined}else if(typeof id!=="string"){factory=id;id=deps=undefined}if(deps&&!Array.isArray(deps)){factory=deps;deps=undefined}if(!deps){deps=["require","exports","module"]}if(id){defineCache[id]=[id,deps,factory]}else{runFactory(id,deps,factory)}}define.require=function(id){if(loaderCache[id]){return loaderCache[id]}if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}};define.amd={};return define}module.exports=amdefine}).call(this,require("_process"),"/node_modules/amdefine/amdefine.js")},{_process:105,path:104}],2:[function(require,module,exports){var types=require("../lib/types");var Type=types.Type;var def=Type.def;var or=Type.or;var builtin=types.builtInTypes;var isString=builtin.string;var isNumber=builtin.number;var isBoolean=builtin.boolean;var isRegExp=builtin.RegExp;var shared=require("../lib/shared");var defaults=shared.defaults;var geq=shared.geq;def("Node").field("type",isString).field("loc",or(def("SourceLocation"),null),defaults["null"],true);def("SourceLocation").build("start","end","source").field("start",def("Position")).field("end",def("Position")).field("source",or(isString,null),defaults["null"]);def("Position").build("line","column").field("line",geq(1)).field("column",geq(0));def("Program").bases("Node").build("body").field("body",[def("Statement")]);def("Function").bases("Node").field("id",or(def("Identifier"),null),defaults["null"]).field("params",[def("Pattern")]).field("body",or(def("BlockStatement"),def("Expression")));def("Statement").bases("Node");def("EmptyStatement").bases("Statement").build();def("BlockStatement").bases("Statement").build("body").field("body",[def("Statement")]);def("ExpressionStatement").bases("Statement").build("expression").field("expression",def("Expression"));def("IfStatement").bases("Statement").build("test","consequent","alternate").field("test",def("Expression")).field("consequent",def("Statement")).field("alternate",or(def("Statement"),null),defaults["null"]);def("LabeledStatement").bases("Statement").build("label","body").field("label",def("Identifier")).field("body",def("Statement"));def("BreakStatement").bases("Statement").build("label").field("label",or(def("Identifier"),null),defaults["null"]);def("ContinueStatement").bases("Statement").build("label").field("label",or(def("Identifier"),null),defaults["null"]);def("WithStatement").bases("Statement").build("object","body").field("object",def("Expression")).field("body",def("Statement"));def("SwitchStatement").bases("Statement").build("discriminant","cases","lexical").field("discriminant",def("Expression")).field("cases",[def("SwitchCase")]).field("lexical",isBoolean,defaults["false"]);def("ReturnStatement").bases("Statement").build("argument").field("argument",or(def("Expression"),null));def("ThrowStatement").bases("Statement").build("argument").field("argument",def("Expression"));def("TryStatement").bases("Statement").build("block","handler","finalizer").field("block",def("BlockStatement")).field("handler",or(def("CatchClause"),null),function(){return this.handlers&&this.handlers[0]||null}).field("handlers",[def("CatchClause")],function(){return this.handler?[this.handler]:[]},true).field("guardedHandlers",[def("CatchClause")],defaults.emptyArray).field("finalizer",or(def("BlockStatement"),null),defaults["null"]);def("CatchClause").bases("Node").build("param","guard","body").field("param",def("Pattern")).field("guard",or(def("Expression"),null),defaults["null"]).field("body",def("BlockStatement"));def("WhileStatement").bases("Statement").build("test","body").field("test",def("Expression")).field("body",def("Statement"));def("DoWhileStatement").bases("Statement").build("body","test").field("body",def("Statement")).field("test",def("Expression"));def("ForStatement").bases("Statement").build("init","test","update","body").field("init",or(def("VariableDeclaration"),def("Expression"),null)).field("test",or(def("Expression"),null)).field("update",or(def("Expression"),null)).field("body",def("Statement"));def("ForInStatement").bases("Statement").build("left","right","body","each").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement")).field("each",isBoolean);def("DebuggerStatement").bases("Statement").build();def("Declaration").bases("Statement");def("FunctionDeclaration").bases("Function","Declaration").build("id","params","body").field("id",def("Identifier"));def("FunctionExpression").bases("Function","Expression").build("id","params","body");def("VariableDeclaration").bases("Declaration").build("kind","declarations").field("kind",or("var","let","const")).field("declarations",[or(def("VariableDeclarator"),def("Identifier"))]);def("VariableDeclarator").bases("Node").build("id","init").field("id",def("Pattern")).field("init",or(def("Expression"),null));def("Expression").bases("Node","Pattern");def("ThisExpression").bases("Expression").build();def("ArrayExpression").bases("Expression").build("elements").field("elements",[or(def("Expression"),null)]);def("ObjectExpression").bases("Expression").build("properties").field("properties",[def("Property")]);def("Property").bases("Node").build("kind","key","value").field("kind",or("init","get","set")).field("key",or(def("Literal"),def("Identifier"))).field("value",def("Expression"));def("SequenceExpression").bases("Expression").build("expressions").field("expressions",[def("Expression")]);var UnaryOperator=or("-","+","!","~","typeof","void","delete");def("UnaryExpression").bases("Expression").build("operator","argument","prefix").field("operator",UnaryOperator).field("argument",def("Expression")).field("prefix",isBoolean,defaults["true"]);var BinaryOperator=or("==","!=","===","!==","<","<=",">",">=","<<",">>",">>>","+","-","*","/","%","&","|","^","in","instanceof","..");def("BinaryExpression").bases("Expression").build("operator","left","right").field("operator",BinaryOperator).field("left",def("Expression")).field("right",def("Expression"));var AssignmentOperator=or("=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","|=","^=","&=");def("AssignmentExpression").bases("Expression").build("operator","left","right").field("operator",AssignmentOperator).field("left",def("Pattern")).field("right",def("Expression"));var UpdateOperator=or("++","--");def("UpdateExpression").bases("Expression").build("operator","argument","prefix").field("operator",UpdateOperator).field("argument",def("Expression")).field("prefix",isBoolean);var LogicalOperator=or("||","&&");def("LogicalExpression").bases("Expression").build("operator","left","right").field("operator",LogicalOperator).field("left",def("Expression")).field("right",def("Expression"));def("ConditionalExpression").bases("Expression").build("test","consequent","alternate").field("test",def("Expression")).field("consequent",def("Expression")).field("alternate",def("Expression"));def("NewExpression").bases("Expression").build("callee","arguments").field("callee",def("Expression")).field("arguments",[def("Expression")]);def("CallExpression").bases("Expression").build("callee","arguments").field("callee",def("Expression")).field("arguments",[def("Expression")]);def("MemberExpression").bases("Expression").build("object","property","computed").field("object",def("Expression")).field("property",or(def("Identifier"),def("Expression"))).field("computed",isBoolean);def("Pattern").bases("Node");def("ObjectPattern").bases("Pattern").build("properties").field("properties",[def("PropertyPattern")]);def("PropertyPattern").bases("Pattern").build("key","pattern").field("key",or(def("Literal"),def("Identifier"))).field("pattern",def("Pattern"));def("ArrayPattern").bases("Pattern").build("elements").field("elements",[or(def("Pattern"),null)]);def("SwitchCase").bases("Node").build("test","consequent").field("test",or(def("Expression"),null)).field("consequent",[def("Statement")]);def("Identifier").bases("Node","Expression","Pattern").build("name").field("name",isString);def("Literal").bases("Node","Expression").build("value").field("value",or(isString,isBoolean,null,isNumber,isRegExp))},{"../lib/shared":13,"../lib/types":15}],3:[function(require,module,exports){require("./core");var types=require("../lib/types");var def=types.Type.def;var or=types.Type.or;var builtin=types.builtInTypes;var isString=builtin.string;var isBoolean=builtin.boolean;def("XMLDefaultDeclaration").bases("Declaration").field("namespace",def("Expression"));def("XMLAnyName").bases("Expression");def("XMLQualifiedIdentifier").bases("Expression").field("left",or(def("Identifier"),def("XMLAnyName"))).field("right",or(def("Identifier"),def("Expression"))).field("computed",isBoolean);def("XMLFunctionQualifiedIdentifier").bases("Expression").field("right",or(def("Identifier"),def("Expression"))).field("computed",isBoolean);def("XMLAttributeSelector").bases("Expression").field("attribute",def("Expression"));def("XMLFilterExpression").bases("Expression").field("left",def("Expression")).field("right",def("Expression"));def("XMLElement").bases("XML","Expression").field("contents",[def("XML")]);def("XMLList").bases("XML","Expression").field("contents",[def("XML")]);def("XML").bases("Node");def("XMLEscape").bases("XML").field("expression",def("Expression"));def("XMLText").bases("XML").field("text",isString);def("XMLStartTag").bases("XML").field("contents",[def("XML")]);def("XMLEndTag").bases("XML").field("contents",[def("XML")]);def("XMLPointTag").bases("XML").field("contents",[def("XML")]);def("XMLName").bases("XML").field("contents",or(isString,[def("XML")]));def("XMLAttribute").bases("XML").field("value",isString);def("XMLCdata").bases("XML").field("contents",isString);def("XMLComment").bases("XML").field("contents",isString);def("XMLProcessingInstruction").bases("XML").field("target",isString).field("contents",or(isString,null))},{"../lib/types":15,"./core":2}],4:[function(require,module,exports){require("./core");var types=require("../lib/types");var def=types.Type.def;var or=types.Type.or;var builtin=types.builtInTypes;var isBoolean=builtin.boolean;var isObject=builtin.object;var isString=builtin.string;var defaults=require("../lib/shared").defaults;def("Function").field("generator",isBoolean,defaults["false"]).field("expression",isBoolean,defaults["false"]).field("defaults",[or(def("Expression"),null)],defaults.emptyArray).field("rest",or(def("Identifier"),null),defaults["null"]);def("FunctionDeclaration").build("id","params","body","generator","expression");def("FunctionExpression").build("id","params","body","generator","expression");def("ArrowFunctionExpression").bases("Function","Expression").build("params","body","expression").field("id",null,defaults["null"]).field("generator",false);def("YieldExpression").bases("Expression").build("argument","delegate").field("argument",or(def("Expression"),null)).field("delegate",isBoolean,defaults["false"]);def("GeneratorExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionExpression").bases("Expression").build("body","blocks","filter").field("body",def("Expression")).field("blocks",[def("ComprehensionBlock")]).field("filter",or(def("Expression"),null));def("ComprehensionBlock").bases("Node").build("left","right","each").field("left",def("Pattern")).field("right",def("Expression")).field("each",isBoolean);def("ModuleSpecifier").bases("Specifier","Literal").field("value",isString);var ModuleSpecifier=def("Literal");def("ModuleDeclaration").bases("Declaration").build("id","from","body").field("id",or(def("Literal"),def("Identifier"))).field("source",or(ModuleSpecifier,null)).field("body",or(def("BlockStatement"),null));def("Property").field("method",isBoolean,defaults["false"]).field("shorthand",isBoolean,defaults["false"]).field("computed",isBoolean,defaults["false"]);def("MethodDefinition").bases("Declaration").build("kind","key","value").field("kind",or("init","get","set","")).field("key",or(def("Literal"),def("Identifier"))).field("value",def("Function"));def("SpreadElement").bases("Node").build("argument").field("argument",def("Expression"));def("ArrayExpression").field("elements",[or(def("Expression"),def("SpreadElement"),null)]);def("NewExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("CallExpression").field("arguments",[or(def("Expression"),def("SpreadElement"))]);def("SpreadElementPattern").bases("Pattern").build("argument").field("argument",def("Pattern"));var ClassBodyElement=or(def("MethodDefinition"),def("VariableDeclarator"),def("ClassPropertyDefinition"),def("ClassProperty"));def("ClassProperty").bases("Declaration").build("id").field("id",def("Identifier"));def("ClassPropertyDefinition").bases("Declaration").build("definition").field("definition",ClassBodyElement);def("ClassBody").bases("Declaration").build("body").field("body",[ClassBodyElement]);def("ClassDeclaration").bases("Declaration").build("id","body","superClass").field("id",def("Identifier")).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]);def("ClassExpression").bases("Expression").build("id","body","superClass").field("id",or(def("Identifier"),null),defaults["null"]).field("body",def("ClassBody")).field("superClass",or(def("Expression"),null),defaults["null"]);def("Specifier").bases("Node");def("NamedSpecifier").bases("Specifier").field("id",def("Identifier")).field("name",or(def("Identifier"),null),defaults["null"]);def("ExportSpecifier").bases("NamedSpecifier").build("id","name");def("ExportBatchSpecifier").bases("Specifier").build();def("ImportSpecifier").bases("NamedSpecifier").build("id","name");def("ExportDeclaration").bases("Declaration").build("default","declaration","specifiers","source").field("default",isBoolean).field("declaration",or(def("Declaration"),def("Expression"))).field("specifiers",[or(def("ExportSpecifier"),def("ExportBatchSpecifier"))],defaults.emptyArray).field("source",or(ModuleSpecifier,null),defaults["null"]);def("ImportDeclaration").bases("Declaration").build("specifiers","kind","source").field("specifiers",[def("ImportSpecifier")]).field("kind",or("named","default",null)).field("source",ModuleSpecifier);def("TaggedTemplateExpression").bases("Expression").field("tag",def("Expression")).field("quasi",def("TemplateLiteral"));def("TemplateLiteral").bases("Expression").build("quasis","expressions").field("quasis",[def("TemplateElement")]).field("expressions",[def("Expression")]);def("TemplateElement").bases("Node").build("value","tail").field("value",{cooked:isString,raw:isString}).field("tail",isBoolean)},{"../lib/shared":13,"../lib/types":15,"./core":2}],5:[function(require,module,exports){require("./core");var types=require("../lib/types");var def=types.Type.def;var or=types.Type.or;var builtin=types.builtInTypes;var isBoolean=builtin.boolean;var defaults=require("../lib/shared").defaults;def("Function").field("async",isBoolean,defaults["false"]);def("SpreadProperty").bases("Node").build("argument").field("argument",def("Expression"));def("ObjectExpression").field("properties",[or(def("Property"),def("SpreadProperty"))]);def("SpreadPropertyPattern").bases("Pattern").build("argument").field("argument",def("Pattern"));def("ObjectPattern").field("properties",[or(def("PropertyPattern"),def("SpreadPropertyPattern"))]);def("AwaitExpression").bases("Expression").build("argument","all").field("argument",or(def("Expression"),null)).field("all",isBoolean,defaults["false"])},{"../lib/shared":13,"../lib/types":15,"./core":2}],6:[function(require,module,exports){require("./core");var types=require("../lib/types");var def=types.Type.def;var or=types.Type.or;var builtin=types.builtInTypes;var isString=builtin.string;var isBoolean=builtin.boolean;var defaults=require("../lib/shared").defaults;def("XJSAttribute").bases("Node").build("name","value").field("name",or(def("XJSIdentifier"),def("XJSNamespacedName"))).field("value",or(def("Literal"),def("XJSExpressionContainer"),null),defaults["null"]);def("XJSIdentifier").bases("Node").build("name").field("name",isString);def("XJSNamespacedName").bases("Node").build("namespace","name").field("namespace",def("XJSIdentifier")).field("name",def("XJSIdentifier"));def("XJSMemberExpression").bases("MemberExpression").build("object","property").field("object",or(def("XJSIdentifier"),def("XJSMemberExpression"))).field("property",def("XJSIdentifier")).field("computed",isBoolean,defaults.false);var XJSElementName=or(def("XJSIdentifier"),def("XJSNamespacedName"),def("XJSMemberExpression"));def("XJSSpreadAttribute").bases("Node").build("argument").field("argument",def("Expression"));var XJSAttributes=[or(def("XJSAttribute"),def("XJSSpreadAttribute"))];def("XJSExpressionContainer").bases("Expression").build("expression").field("expression",def("Expression"));def("XJSElement").bases("Expression").build("openingElement","closingElement","children").field("openingElement",def("XJSOpeningElement")).field("closingElement",or(def("XJSClosingElement"),null),defaults["null"]).field("children",[or(def("XJSElement"),def("XJSExpressionContainer"),def("XJSText"),def("Literal"))],defaults.emptyArray).field("name",XJSElementName,function(){return this.openingElement.name}).field("selfClosing",isBoolean,function(){return this.openingElement.selfClosing}).field("attributes",XJSAttributes,function(){return this.openingElement.attributes});def("XJSOpeningElement").bases("Node").build("name","attributes","selfClosing").field("name",XJSElementName).field("attributes",XJSAttributes,defaults.emptyArray).field("selfClosing",isBoolean,defaults["false"]);def("XJSClosingElement").bases("Node").build("name").field("name",XJSElementName);def("XJSText").bases("Literal").build("value").field("value",isString);def("XJSEmptyExpression").bases("Expression").build();def("TypeAnnotatedIdentifier").bases("Pattern").build("annotation","identifier").field("annotation",def("TypeAnnotation")).field("identifier",def("Identifier"));def("TypeAnnotation").bases("Pattern").build("annotatedType","templateTypes","paramTypes","returnType","unionType","nullable").field("annotatedType",def("Identifier")).field("templateTypes",or([def("TypeAnnotation")],null)).field("paramTypes",or([def("TypeAnnotation")],null)).field("returnType",or(def("TypeAnnotation"),null)).field("unionType",or(def("TypeAnnotation"),null)).field("nullable",isBoolean)},{"../lib/shared":13,"../lib/types":15,"./core":2}],7:[function(require,module,exports){require("./core");var types=require("../lib/types");var def=types.Type.def;var or=types.Type.or;var geq=require("../lib/shared").geq;def("ForOfStatement").bases("Statement").build("left","right","body").field("left",or(def("VariableDeclaration"),def("Expression"))).field("right",def("Expression")).field("body",def("Statement"));def("LetStatement").bases("Statement").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Statement"));def("LetExpression").bases("Expression").build("head","body").field("head",[def("VariableDeclarator")]).field("body",def("Expression"));def("GraphExpression").bases("Expression").build("index","expression").field("index",geq(0)).field("expression",def("Literal"));def("GraphIndexExpression").bases("Expression").build("index").field("index",geq(0))},{"../lib/shared":13,"../lib/types":15,"./core":2}],8:[function(require,module,exports){var assert=require("assert");var types=require("../main");var getFieldNames=types.getFieldNames;var getFieldValue=types.getFieldValue;var isArray=types.builtInTypes.array;var isObject=types.builtInTypes.object;var isDate=types.builtInTypes.Date;var isRegExp=types.builtInTypes.RegExp;var hasOwn=Object.prototype.hasOwnProperty;function astNodesAreEquivalent(a,b,problemPath){if(isArray.check(problemPath)){problemPath.length=0}else{problemPath=null}return areEquivalent(a,b,problemPath)}astNodesAreEquivalent.assert=function(a,b){var problemPath=[];if(!astNodesAreEquivalent(a,b,problemPath)){if(problemPath.length===0){assert.strictEqual(a,b)}else{assert.ok(false,"Nodes differ in the following path: "+problemPath.map(subscriptForProperty).join(""))}}};function subscriptForProperty(property){if(/[_$a-z][_$a-z0-9]*/i.test(property)){return"."+property}return"["+JSON.stringify(property)+"]"}function areEquivalent(a,b,problemPath){if(a===b){return true}if(isArray.check(a)){return arraysAreEquivalent(a,b,problemPath)}if(isObject.check(a)){return objectsAreEquivalent(a,b,problemPath)}if(isDate.check(a)){return isDate.check(b)&&+a===+b}if(isRegExp.check(a)){return isRegExp.check(b)&&(a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.ignoreCase===b.ignoreCase)}return a==b}function arraysAreEquivalent(a,b,problemPath){isArray.assert(a);var aLength=a.length;if(!isArray.check(b)||b.length!==aLength){if(problemPath){problemPath.push("length")}return false}for(var i=0;i<aLength;++i){if(problemPath){problemPath.push(i)}if(i in a!==i in b){return false}if(!areEquivalent(a[i],b[i],problemPath)){return false}if(problemPath){assert.strictEqual(problemPath.pop(),i)}}return true}function objectsAreEquivalent(a,b,problemPath){isObject.assert(a);if(!isObject.check(b)){return false}if(a.type!==b.type){if(problemPath){problemPath.push("type")}return false}var aNames=getFieldNames(a);var aNameCount=aNames.length;var bNames=getFieldNames(b);var bNameCount=bNames.length;if(aNameCount===bNameCount){for(var i=0;i<aNameCount;++i){var name=aNames[i];var aChild=getFieldValue(a,name);var bChild=getFieldValue(b,name);if(problemPath){problemPath.push(name)}if(!areEquivalent(aChild,bChild,problemPath)){return false}if(problemPath){assert.strictEqual(problemPath.pop(),name)}}return true}if(!problemPath){return false}var seenNames=Object.create(null);for(i=0;i<aNameCount;++i){seenNames[aNames[i]]=true}for(i=0;i<bNameCount;++i){name=bNames[i];if(!hasOwn.call(seenNames,name)){problemPath.push(name);return false}delete seenNames[name]}for(name in seenNames){problemPath.push(name);break}return false}module.exports=astNodesAreEquivalent},{"../main":16,assert:97}],9:[function(require,module,exports){var assert=require("assert");var types=require("./types");var n=types.namedTypes;var isNumber=types.builtInTypes.number;var isArray=types.builtInTypes.array;var Path=require("./path");var Scope=require("./scope");function NodePath(value,parentPath,name){assert.ok(this instanceof NodePath);Path.call(this,value,parentPath,name)}require("util").inherits(NodePath,Path);var NPp=NodePath.prototype;Object.defineProperties(NPp,{node:{get:function(){Object.defineProperty(this,"node",{configurable:true,value:this._computeNode()});return this.node}},parent:{get:function(){Object.defineProperty(this,"parent",{configurable:true,value:this._computeParent()});return this.parent}},scope:{get:function(){Object.defineProperty(this,"scope",{configurable:true,value:this._computeScope()});return this.scope}}});NPp.replace=function(){delete this.node;delete this.parent;delete this.scope;return Path.prototype.replace.apply(this,arguments)};NPp._computeNode=function(){var value=this.value;if(n.Node.check(value)){return value}var pp=this.parentPath;return pp&&pp.node||null};NPp._computeParent=function(){var value=this.value;var pp=this.parentPath;if(!n.Node.check(value)){while(pp&&!n.Node.check(pp.value)){pp=pp.parentPath}if(pp){pp=pp.parentPath}}while(pp&&!n.Node.check(pp.value)){pp=pp.parentPath}return pp||null};NPp._computeScope=function(){var value=this.value;var pp=this.parentPath;var scope=pp&&pp.scope;if(n.Node.check(value)&&Scope.isEstablishedBy(value)){scope=new Scope(this,scope)}return scope||null};NPp.getValueProperty=function(name){return types.getFieldValue(this.value,name)};NPp.needsParens=function(assumeExpressionContext){if(!this.parent)return false;var node=this.node;if(node!==this.value)return false;var parent=this.parent.node;assert.notStrictEqual(node,parent);if(!n.Expression.check(node))return false;if(isUnaryLike(node))return n.MemberExpression.check(parent)&&this.name==="object"&&parent.object===node;if(isBinary(node)){if(n.CallExpression.check(parent)&&this.name==="callee"){assert.strictEqual(parent.callee,node);return true}if(isUnaryLike(parent))return true;if(n.MemberExpression.check(parent)&&this.name==="object"){assert.strictEqual(parent.object,node);return true}if(isBinary(parent)){var po=parent.operator;var pp=PRECEDENCE[po];var no=node.operator;var np=PRECEDENCE[no];if(pp>np){return true}if(pp===np&&this.name==="right"){assert.strictEqual(parent.right,node);return true}}}if(n.SequenceExpression.check(node)){if(n.ForStatement.check(parent)){return false}if(n.ExpressionStatement.check(parent)&&this.name==="expression"){return false}return true}if(n.YieldExpression.check(node))return isBinary(parent)||n.CallExpression.check(parent)||n.MemberExpression.check(parent)||n.NewExpression.check(parent)||n.ConditionalExpression.check(parent)||isUnaryLike(parent)||n.YieldExpression.check(parent);if(n.NewExpression.check(parent)&&this.name==="callee"){assert.strictEqual(parent.callee,node);return containsCallExpression(node)}if(n.Literal.check(node)&&isNumber.check(node.value)&&n.MemberExpression.check(parent)&&this.name==="object"){assert.strictEqual(parent.object,node);return true}if(n.AssignmentExpression.check(node)||n.ConditionalExpression.check(node)){if(isUnaryLike(parent))return true;if(isBinary(parent))return true;if(n.CallExpression.check(parent)&&this.name==="callee"){assert.strictEqual(parent.callee,node);return true}if(n.ConditionalExpression.check(parent)&&this.name==="test"){assert.strictEqual(parent.test,node);return true}if(n.MemberExpression.check(parent)&&this.name==="object"){assert.strictEqual(parent.object,node);return true}}if(assumeExpressionContext!==true&&!this.canBeFirstInStatement()&&this.firstInStatement())return true;return false};function isBinary(node){return n.BinaryExpression.check(node)||n.LogicalExpression.check(node)}function isUnaryLike(node){return n.UnaryExpression.check(node)||n.SpreadElement&&n.SpreadElement.check(node)||n.SpreadProperty&&n.SpreadProperty.check(node)}var PRECEDENCE={};[["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]].forEach(function(tier,i){tier.forEach(function(op){PRECEDENCE[op]=i})});function containsCallExpression(node){if(n.CallExpression.check(node)){return true}if(isArray.check(node)){return node.some(containsCallExpression)}if(n.Node.check(node)){return types.someField(node,function(name,child){return containsCallExpression(child)})}return false}NPp.canBeFirstInStatement=function(){var node=this.node;return!n.FunctionExpression.check(node)&&!n.ObjectExpression.check(node)};NPp.firstInStatement=function(){return firstInStatement(this)};function firstInStatement(path){for(var node,parent;path.parent;path=path.parent){node=path.node;parent=path.parent.node;if(n.BlockStatement.check(parent)&&path.parent.name==="body"&&path.name===0){assert.strictEqual(parent.body[0],node);return true}if(n.ExpressionStatement.check(parent)&&path.name==="expression"){assert.strictEqual(parent.expression,node);return true}if(n.SequenceExpression.check(parent)&&path.parent.name==="expressions"&&path.name===0){assert.strictEqual(parent.expressions[0],node);continue}if(n.CallExpression.check(parent)&&path.name==="callee"){assert.strictEqual(parent.callee,node);continue}if(n.MemberExpression.check(parent)&&path.name==="object"){assert.strictEqual(parent.object,node);continue}if(n.ConditionalExpression.check(parent)&&path.name==="test"){assert.strictEqual(parent.test,node);continue}if(isBinary(parent)&&path.name==="left"){assert.strictEqual(parent.left,node);continue}if(n.UnaryExpression.check(parent)&&!parent.prefix&&path.name==="argument"){assert.strictEqual(parent.argument,node);continue}return false}return true}module.exports=NodePath},{"./path":11,"./scope":12,"./types":15,assert:97,util:107}],10:[function(require,module,exports){var assert=require("assert");var types=require("./types");var NodePath=require("./node-path");var Node=types.namedTypes.Node;var isArray=types.builtInTypes.array;var isObject=types.builtInTypes.object;var isFunction=types.builtInTypes.function;var hasOwn=Object.prototype.hasOwnProperty;var undefined;function PathVisitor(){assert.ok(this instanceof PathVisitor);this._reusableContextStack=[];
this._methodNameTable=computeMethodNameTable(this);this.Context=makeContextConstructor(this)}function computeMethodNameTable(visitor){var typeNames=Object.create(null);for(var methodName in visitor){if(/^visit[A-Z]/.test(methodName)){typeNames[methodName.slice("visit".length)]=true}}var supertypeTable=types.computeSupertypeLookupTable(typeNames);var methodNameTable=Object.create(null);for(var typeName in supertypeTable){if(hasOwn.call(supertypeTable,typeName)){methodName="visit"+supertypeTable[typeName];if(isFunction.check(visitor[methodName])){methodNameTable[typeName]=methodName}}}return methodNameTable}PathVisitor.fromMethodsObject=function fromMethodsObject(methods){if(methods instanceof PathVisitor){return methods}if(!isObject.check(methods)){return new PathVisitor}function Visitor(){assert.ok(this instanceof Visitor);PathVisitor.call(this)}var Vp=Visitor.prototype=Object.create(PVp);Vp.constructor=Visitor;extend(Vp,methods);extend(Visitor,PathVisitor);isFunction.assert(Visitor.fromMethodsObject);isFunction.assert(Visitor.visit);return new Visitor};function extend(target,source){for(var property in source){if(hasOwn.call(source,property)){target[property]=source[property]}}return target}PathVisitor.visit=function visit(node,methods){var visitor=PathVisitor.fromMethodsObject(methods);if(node instanceof NodePath){visitor.visit(node);return node.value}var rootPath=new NodePath({root:node});visitor.visit(rootPath.get("root"));return rootPath.value.root};var PVp=PathVisitor.prototype;PVp.visit=function(path){if(this instanceof this.Context){return this.visitor.visit(path)}assert.ok(path instanceof NodePath);var value=path.value;var methodName=Node.check(value)&&this._methodNameTable[value.type];if(methodName){var context=this.acquireContext(path);try{context.invokeVisitorMethod(methodName)}finally{this.releaseContext(context)}}else{visitChildren(path,this)}};function visitChildren(path,visitor){assert.ok(path instanceof NodePath);assert.ok(visitor instanceof PathVisitor);var value=path.value;if(isArray.check(value)){path.each(visitor.visit,visitor)}else if(!isObject.check(value)){}else{var name,names=types.getFieldNames(value);for(var i=0,len=names.length;i<len;++i){if(!hasOwn.call(value,name=names[i])){value[name]=types.getFieldValue(value,name)}visitor.visit(path.get(name))}}}PVp.acquireContext=function(path){if(this._reusableContextStack.length===0){return new this.Context(path)}return this._reusableContextStack.pop().reset(path)};PVp.releaseContext=function(context){assert.ok(context instanceof this.Context);this._reusableContextStack.push(context);context.currentPath=null};function makeContextConstructor(visitor){function Context(path){assert.ok(this instanceof Context);assert.ok(this instanceof PathVisitor);assert.ok(path instanceof NodePath);Object.defineProperty(this,"visitor",{value:visitor,writable:false,enumerable:true,configurable:false});this.currentPath=path;this.needToCallTraverse=true;Object.seal(this)}assert.ok(visitor instanceof PathVisitor);var Cp=Context.prototype=Object.create(visitor);Cp.constructor=Context;extend(Cp,sharedContextProtoMethods);return Context}var sharedContextProtoMethods=Object.create(null);sharedContextProtoMethods.reset=function reset(path){assert.ok(this instanceof this.Context);assert.ok(path instanceof NodePath);this.currentPath=path;this.needToCallTraverse=true;return this};sharedContextProtoMethods.invokeVisitorMethod=function invokeVisitorMethod(methodName){assert.ok(this instanceof this.Context);assert.ok(this.currentPath instanceof NodePath);var result=this.visitor[methodName].call(this,this.currentPath);if(result===false){this.needToCallTraverse=false}else if(result!==undefined){this.currentPath=this.currentPath.replace(result)[0];if(this.needToCallTraverse){this.traverse(this.currentPath)}}assert.strictEqual(this.needToCallTraverse,false,"Must either call this.traverse or return false in "+methodName)};sharedContextProtoMethods.traverse=function traverse(path,newVisitor){assert.ok(this instanceof this.Context);assert.ok(path instanceof NodePath);assert.ok(this.currentPath instanceof NodePath);this.needToCallTraverse=false;visitChildren(path,PathVisitor.fromMethodsObject(newVisitor||this.visitor))};module.exports=PathVisitor},{"./node-path":9,"./types":15,assert:97}],11:[function(require,module,exports){var assert=require("assert");var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var types=require("./types");var isArray=types.builtInTypes.array;var isNumber=types.builtInTypes.number;var Ap=Array.prototype;var slice=Ap.slice;var map=Ap.map;function Path(value,parentPath,name){assert.ok(this instanceof Path);if(parentPath){assert.ok(parentPath instanceof Path)}else{parentPath=null;name=null}this.value=value;this.parentPath=parentPath;this.name=name;this.__childCache=null}var Pp=Path.prototype;function getChildCache(path){return path.__childCache||(path.__childCache=Object.create(null))}function getChildPath(path,name){var cache=getChildCache(path);var actualChildValue=path.getValueProperty(name);var childPath=cache[name];if(!hasOwn.call(cache,name)||childPath.value!==actualChildValue){childPath=cache[name]=new path.constructor(actualChildValue,path,name)}return childPath}Pp.getValueProperty=function getValueProperty(name){return this.value[name]};Pp.get=function get(name){var path=this;var names=arguments;var count=names.length;for(var i=0;i<count;++i){path=getChildPath(path,names[i])}return path};Pp.each=function each(callback,context){var childPaths=[];var len=this.value.length;var i=0;for(var i=0;i<len;++i){if(hasOwn.call(this.value,i)){childPaths[i]=this.get(i)}}context=context||this;for(i=0;i<len;++i){if(hasOwn.call(childPaths,i)){callback.call(context,childPaths[i])}}};Pp.map=function map(callback,context){var result=[];this.each(function(childPath){result.push(callback.call(this,childPath))},context);return result};Pp.filter=function filter(callback,context){var result=[];this.each(function(childPath){if(callback.call(this,childPath)){result.push(childPath)}},context);return result};function emptyMoves(){}function getMoves(path,offset,start,end){isArray.assert(path.value);if(offset===0){return emptyMoves}var length=path.value.length;if(length<1){return emptyMoves}var argc=arguments.length;if(argc===2){start=0;end=length}else if(argc===3){start=Math.max(start,0);end=length}else{start=Math.max(start,0);end=Math.min(end,length)}isNumber.assert(start);isNumber.assert(end);var moves=Object.create(null);var cache=getChildCache(path);for(var i=start;i<end;++i){if(hasOwn.call(path.value,i)){var childPath=path.get(i);assert.strictEqual(childPath.name,i);var newIndex=i+offset;childPath.name=newIndex;moves[newIndex]=childPath;delete cache[i]}}delete cache.length;return function(){for(var newIndex in moves){var childPath=moves[newIndex];assert.strictEqual(childPath.name,+newIndex);cache[newIndex]=childPath;path.value[newIndex]=childPath.value}}}Pp.shift=function shift(){var move=getMoves(this,-1);var result=this.value.shift();move();return result};Pp.unshift=function unshift(node){var move=getMoves(this,arguments.length);var result=this.value.unshift.apply(this.value,arguments);move();return result};Pp.push=function push(node){isArray.assert(this.value);delete getChildCache(this).length;return this.value.push.apply(this.value,arguments)};Pp.pop=function pop(){isArray.assert(this.value);var cache=getChildCache(this);delete cache[this.value.length-1];delete cache.length;return this.value.pop()};Pp.insertAt=function insertAt(index,node){var argc=arguments.length;var move=getMoves(this,argc-1,index);if(move===emptyMoves){return this}index=Math.max(index,0);for(var i=1;i<argc;++i){this.value[index+i-1]=arguments[i]}move();return this};Pp.insertBefore=function insertBefore(node){var pp=this.parentPath;var argc=arguments.length;var insertAtArgs=[this.name];for(var i=0;i<argc;++i){insertAtArgs.push(arguments[i])}return pp.insertAt.apply(pp,insertAtArgs)};Pp.insertAfter=function insertAfter(node){var pp=this.parentPath;var argc=arguments.length;var insertAtArgs=[this.name+1];for(var i=0;i<argc;++i){insertAtArgs.push(arguments[i])}return pp.insertAt.apply(pp,insertAtArgs)};function repairRelationshipWithParent(path){assert.ok(path instanceof Path);var pp=path.parentPath;if(!pp){return path}var parentValue=pp.value;var parentCache=getChildCache(pp);if(parentValue[path.name]===path.value){parentCache[path.name]=path}else if(isArray.check(parentValue)){var i=parentValue.indexOf(path.value);if(i>=0){parentCache[path.name=i]=path}}else{parentValue[path.name]=path.value;parentCache[path.name]=path}assert.strictEqual(parentValue[path.name],path.value);assert.strictEqual(path.parentPath.get(path.name),path);return path}Pp.replace=function replace(replacement){var results=[];var parentValue=this.parentPath.value;var parentCache=getChildCache(this.parentPath);var count=arguments.length;repairRelationshipWithParent(this);if(isArray.check(parentValue)){var originalLength=parentValue.length;var move=getMoves(this.parentPath,count-1,this.name+1);var spliceArgs=[this.name,1];for(i=0;i<count;++i){spliceArgs.push(arguments[i])}var splicedOut=parentValue.splice.apply(parentValue,spliceArgs);assert.strictEqual(splicedOut[0],this.value);assert.strictEqual(parentValue.length,originalLength-1+count);move();if(count===0){delete this.value;delete parentCache[this.name];this.__childCache=null}else{assert.strictEqual(parentValue[this.name],replacement);if(this.value!==replacement){this.value=replacement;this.__childCache=null}for(i=0;i<count;++i){results.push(this.parentPath.get(this.name+i))}assert.strictEqual(results[0],this)}}else if(count===1){if(this.value!==replacement){this.__childCache=null}this.value=parentValue[this.name]=replacement;results.push(this)}else if(count===0){delete parentValue[this.name];delete this.value;this.__childCache=null}else{assert.ok(false,"Could not replace path")}return results};module.exports=Path},{"./types":15,assert:97}],12:[function(require,module,exports){var assert=require("assert");var types=require("./types");var Type=types.Type;var namedTypes=types.namedTypes;var Node=namedTypes.Node;var isArray=types.builtInTypes.array;var hasOwn=Object.prototype.hasOwnProperty;var b=types.builders;function Scope(path,parentScope){assert.ok(this instanceof Scope);assert.ok(path instanceof require("./node-path"));ScopeType.assert(path.value);var depth;if(parentScope){assert.ok(parentScope instanceof Scope);depth=parentScope.depth+1}else{parentScope=null;depth=0}Object.defineProperties(this,{path:{value:path},node:{value:path.value},isGlobal:{value:!parentScope,enumerable:true},depth:{value:depth},parent:{value:parentScope},bindings:{value:{}}})}var scopeTypes=[namedTypes.Program,namedTypes.Function,namedTypes.CatchClause];var ScopeType=Type.or.apply(Type,scopeTypes);Scope.isEstablishedBy=function(node){return ScopeType.check(node)};var Sp=Scope.prototype;Sp.didScan=false;Sp.declares=function(name){this.scan();return hasOwn.call(this.bindings,name)};Sp.declareTemporary=function(prefix){if(prefix){assert.ok(/^[a-z$_]/i.test(prefix),prefix)}else{prefix="t$"}prefix+=this.depth.toString(36)+"$";this.scan();var index=0;while(this.declares(prefix+index)){++index}var name=prefix+index;return this.bindings[name]=types.builders.identifier(name)};Sp.injectTemporary=function(identifier,init){identifier||(identifier=this.declareTemporary());var bodyPath=this.path.get("body");if(namedTypes.BlockStatement.check(bodyPath.value)){bodyPath=bodyPath.get("body")}bodyPath.unshift(b.variableDeclaration("var",[b.variableDeclarator(identifier,init||null)]));return identifier};Sp.scan=function(force){if(force||!this.didScan){for(var name in this.bindings){delete this.bindings[name]}scanScope(this.path,this.bindings);this.didScan=true}};Sp.getBindings=function(){this.scan();return this.bindings};function scanScope(path,bindings){var node=path.value;ScopeType.assert(node);if(namedTypes.CatchClause.check(node)){addPattern(path.get("param"),bindings)}else{recursiveScanScope(path,bindings)}}function recursiveScanScope(path,bindings){var node=path.value;if(path.parent&&namedTypes.FunctionExpression.check(path.parent.node)&&path.parent.node.id){addPattern(path.parent.get("id"),bindings)}else if(isArray.check(node)){path.each(function(childPath){recursiveScanChild(childPath,bindings)})}else if(namedTypes.Function.check(node)){path.get("params").each(function(paramPath){addPattern(paramPath,bindings)});recursiveScanChild(path.get("body"),bindings)}else if(namedTypes.VariableDeclarator.check(node)){addPattern(path.get("id"),bindings);recursiveScanChild(path.get("init"),bindings)}else if(namedTypes.ImportSpecifier&&namedTypes.ImportSpecifier.check(node)){addPattern(node.name?path.get("name"):path.get("id"),bindings)}else if(namedTypes.ModuleDeclaration&&namedTypes.ModuleDeclaration.check(node)){addPattern(path.get("id"),bindings)}else if(Node.check(node)){types.eachField(node,function(name,child){var childPath=path.get(name);assert.strictEqual(childPath.value,child);recursiveScanChild(childPath,bindings)})}}function recursiveScanChild(path,bindings){var node=path.value;if(namedTypes.FunctionDeclaration.check(node)){addPattern(path.get("id"),bindings)}else if(namedTypes.ClassDeclaration&&namedTypes.ClassDeclaration.check(node)){addPattern(path.get("id"),bindings)}else if(Scope.isEstablishedBy(node)){if(namedTypes.CatchClause.check(node)){var catchParamName=node.param.name;var hadBinding=hasOwn.call(bindings,catchParamName);recursiveScanScope(path.get("body"),bindings);if(!hadBinding){delete bindings[catchParamName]}}}else{recursiveScanScope(path,bindings)}}function addPattern(patternPath,bindings){var pattern=patternPath.value;namedTypes.Pattern.assert(pattern);if(namedTypes.Identifier.check(pattern)){if(hasOwn.call(bindings,pattern.name)){bindings[pattern.name].push(patternPath)}else{bindings[pattern.name]=[patternPath]}}else if(namedTypes.SpreadElement&&namedTypes.SpreadElement.check(pattern)){addPattern(patternPath.get("argument"),bindings)}}Sp.lookup=function(name){for(var scope=this;scope;scope=scope.parent)if(scope.declares(name))break;return scope};Sp.getGlobalScope=function(){var scope=this;while(!scope.isGlobal)scope=scope.parent;return scope};module.exports=Scope},{"./node-path":9,"./types":15,assert:97}],13:[function(require,module,exports){var types=require("../lib/types");var Type=types.Type;var builtin=types.builtInTypes;var isNumber=builtin.number;exports.geq=function(than){return new Type(function(value){return isNumber.check(value)&&value>=than},isNumber+" >= "+than)};exports.defaults={"null":function(){return null},emptyArray:function(){return[]},"false":function(){return false},"true":function(){return true},undefined:function(){}};var naiveIsPrimitive=Type.or(builtin.string,builtin.number,builtin.boolean,builtin.null,builtin.undefined);exports.isPrimitive=new Type(function(value){if(value===null)return true;var type=typeof value;return!(type==="object"||type==="function")},naiveIsPrimitive.toString())},{"../lib/types":15}],14:[function(require,module,exports){var visit=require("./path-visitor").visit;var deprecate=require("depd")('require("ast-types").traverse');function traverseWithFullPathInfo(node,callback){return visit(node,{visitNode:function(path){if(callback.call(path,path.value)!==false){this.traverse(path)}return false}})}var deprecatedWrapper=deprecate.function(traverseWithFullPathInfo,'Please use require("ast-types").visit instead of .traverse for '+"syntax tree manipulation");deprecatedWrapper.fast=deprecatedWrapper;module.exports=deprecatedWrapper},{"./path-visitor":10,depd:17}],15:[function(require,module,exports){var assert=require("assert");var Ap=Array.prototype;var slice=Ap.slice;var map=Ap.map;var each=Ap.forEach;var Op=Object.prototype;var objToStr=Op.toString;var funObjStr=objToStr.call(function(){});var strObjStr=objToStr.call("");var hasOwn=Op.hasOwnProperty;function Type(check,name){var self=this;assert.ok(self instanceof Type,self);assert.strictEqual(objToStr.call(check),funObjStr,check+" is not a function");var nameObjStr=objToStr.call(name);assert.ok(nameObjStr===funObjStr||nameObjStr===strObjStr,name+" is neither a function nor a string");Object.defineProperties(self,{name:{value:name},check:{value:function(value,deep){var result=check.call(self,value,deep);if(!result&&deep&&objToStr.call(deep)===funObjStr)deep(self,value);return result}}})}var Tp=Type.prototype;exports.Type=Type;Tp.assert=function(value,deep){if(!this.check(value,deep)){var str=shallowStringify(value);assert.ok(false,str+" does not match type "+this);return false}return true};function shallowStringify(value){if(isObject.check(value))return"{"+Object.keys(value).map(function(key){return key+": "+value[key]}).join(", ")+"}";if(isArray.check(value))return"["+value.map(shallowStringify).join(", ")+"]";return JSON.stringify(value)}Tp.toString=function(){var name=this.name;if(isString.check(name))return name;if(isFunction.check(name))return name.call(this)+"";return name+" type"};var builtInTypes={};exports.builtInTypes=builtInTypes;function defBuiltInType(example,name){var objStr=objToStr.call(example);Object.defineProperty(builtInTypes,name,{enumerable:true,value:new Type(function(value){return objToStr.call(value)===objStr},name)});return builtInTypes[name]}var isString=defBuiltInType("","string");var isFunction=defBuiltInType(function(){},"function");var isArray=defBuiltInType([],"array");var isObject=defBuiltInType({},"object");var isRegExp=defBuiltInType(/./,"RegExp");var isDate=defBuiltInType(new Date,"Date");var isNumber=defBuiltInType(3,"number");var isBoolean=defBuiltInType(true,"boolean");var isNull=defBuiltInType(null,"null");var isUndefined=defBuiltInType(void 0,"undefined");function toType(from,name){if(from instanceof Type)return from;if(from instanceof Def)return from.type;if(isArray.check(from))return Type.fromArray(from);if(isObject.check(from))return Type.fromObject(from);if(isFunction.check(from))return new Type(from,name);return new Type(function(value){return value===from},isUndefined.check(name)?function(){return from+""}:name)}Type.or=function(){var types=[];var len=arguments.length;for(var i=0;i<len;++i)types.push(toType(arguments[i]));return new Type(function(value,deep){for(var i=0;i<len;++i)if(types[i].check(value,deep))return true;return false},function(){return types.join(" | ")})};Type.fromArray=function(arr){assert.ok(isArray.check(arr));assert.strictEqual(arr.length,1,"only one element type is permitted for typed arrays");return toType(arr[0]).arrayOf()};Tp.arrayOf=function(){var elemType=this;return new Type(function(value,deep){return isArray.check(value)&&value.every(function(elem){return elemType.check(elem,deep)})},function(){return"["+elemType+"]"})};Type.fromObject=function(obj){var fields=Object.keys(obj).map(function(name){return new Field(name,obj[name])});return new Type(function(value,deep){return isObject.check(value)&&fields.every(function(field){return field.type.check(value[field.name],deep)})},function(){return"{ "+fields.join(", ")+" }"})};function Field(name,type,defaultFn,hidden){var self=this;assert.ok(self instanceof Field);isString.assert(name);type=toType(type);var properties={name:{value:name},type:{value:type},hidden:{value:!!hidden}};if(isFunction.check(defaultFn)){properties.defaultFn={value:defaultFn}}Object.defineProperties(self,properties)}var Fp=Field.prototype;Fp.toString=function(){return JSON.stringify(this.name)+": "+this.type};Fp.getValue=function(obj){var value=obj[this.name];if(!isUndefined.check(value))return value;if(this.defaultFn)value=this.defaultFn.call(obj);return value};Type.def=function(typeName){isString.assert(typeName);return hasOwn.call(defCache,typeName)?defCache[typeName]:defCache[typeName]=new Def(typeName)};var defCache=Object.create(null);function Def(typeName){var self=this;assert.ok(self instanceof Def);Object.defineProperties(self,{typeName:{value:typeName},baseNames:{value:[]},ownFields:{value:Object.create(null)},allSupertypes:{value:Object.create(null)},supertypeList:{value:[]},allFields:{value:Object.create(null)},fieldNames:{value:[]},type:{value:new Type(function(value,deep){return self.check(value,deep)},typeName)}})}Def.fromValue=function(value){if(value&&typeof value==="object"){var type=value.type;if(typeof type==="string"&&hasOwn.call(defCache,type)){var d=defCache[type];if(d.finalized){return d}}}return null};var Dp=Def.prototype;Dp.isSupertypeOf=function(that){if(that instanceof Def){assert.strictEqual(this.finalized,true);assert.strictEqual(that.finalized,true);return hasOwn.call(that.allSupertypes,this.typeName)}else{assert.ok(false,that+" is not a Def")}};exports.getSupertypeNames=function(typeName){assert.ok(hasOwn.call(defCache,typeName));var d=defCache[typeName];assert.strictEqual(d.finalized,true);return d.supertypeList.slice(1)};exports.computeSupertypeLookupTable=function(candidates){var table={};for(var typeName in defCache){if(hasOwn.call(defCache,typeName)){var d=defCache[typeName];assert.strictEqual(d.finalized,true);for(var i=0;i<d.supertypeList.length;++i){var superTypeName=d.supertypeList[i];if(hasOwn.call(candidates,superTypeName)){table[typeName]=superTypeName;break}}}}return table};Dp.checkAllFields=function(value,deep){var allFields=this.allFields;assert.strictEqual(this.finalized,true);function checkFieldByName(name){var field=allFields[name];var type=field.type;var child=field.getValue(value);return type.check(child,deep)}return isObject.check(value)&&Object.keys(allFields).every(checkFieldByName)};Dp.check=function(value,deep){assert.strictEqual(this.finalized,true,"prematurely checking unfinalized type "+this.typeName);if(!isObject.check(value))return false;var vDef=Def.fromValue(value);if(!vDef){if(this.typeName==="SourceLocation"||this.typeName==="Position"){return this.checkAllFields(value,deep)}return false}if(deep&&vDef===this)return this.checkAllFields(value,deep);if(!this.isSupertypeOf(vDef))return false;if(!deep)return true;return vDef.checkAllFields(value,deep)&&this.checkAllFields(value,false)};Dp.bases=function(){var bases=this.baseNames;assert.strictEqual(this.finalized,false);each.call(arguments,function(baseName){isString.assert(baseName);if(bases.indexOf(baseName)<0)bases.push(baseName)});return this};Object.defineProperty(Dp,"buildable",{value:false});var builders={};exports.builders=builders;var nodePrototype={};exports.defineMethod=function(name,func){var old=nodePrototype[name];if(isUndefined.check(func)){delete nodePrototype[name]}else{isFunction.assert(func);Object.defineProperty(nodePrototype,name,{enumerable:true,configurable:true,value:func})}return old};Dp.build=function(){var self=this;Object.defineProperty(self,"buildParams",{value:slice.call(arguments),writable:false,enumerable:false,configurable:true});assert.strictEqual(self.finalized,false);isString.arrayOf().assert(self.buildParams);if(self.buildable){return self}self.field("type",self.typeName,function(){return self.typeName});Object.defineProperty(self,"buildable",{value:true});Object.defineProperty(builders,getBuilderName(self.typeName),{enumerable:true,value:function(){var args=arguments;var argc=args.length;var built=Object.create(nodePrototype);assert.ok(self.finalized,"attempting to instantiate unfinalized type "+self.typeName);function add(param,i){if(hasOwn.call(built,param))return;var all=self.allFields;assert.ok(hasOwn.call(all,param),param);var field=all[param];var type=field.type;var value;if(isNumber.check(i)&&i<argc){value=args[i]}else if(field.defaultFn){value=field.defaultFn.call(built)}else{var message="no value or default function given for field "+JSON.stringify(param)+" of "+self.typeName+"("+self.buildParams.map(function(name){return all[name]}).join(", ")+")";assert.ok(false,message)}assert.ok(type.check(value),shallowStringify(value)+" does not match field "+field+" of type "+self.typeName);built[param]=value}self.buildParams.forEach(function(param,i){add(param,i)});Object.keys(self.allFields).forEach(function(param){add(param)});assert.strictEqual(built.type,self.typeName);return built}});return self};function getBuilderName(typeName){return typeName.replace(/^[A-Z]+/,function(upperCasePrefix){var len=upperCasePrefix.length;switch(len){case 0:return"";case 1:return upperCasePrefix.toLowerCase();default:return upperCasePrefix.slice(0,len-1).toLowerCase()+upperCasePrefix.charAt(len-1)}})}Dp.field=function(name,type,defaultFn,hidden){assert.strictEqual(this.finalized,false);this.ownFields[name]=new Field(name,type,defaultFn,hidden);return this};var namedTypes={};exports.namedTypes=namedTypes;function getFieldNames(object){var d=Def.fromValue(object);if(d){return d.fieldNames.slice(0)}assert.strictEqual("type"in object,false,"did not recognize object of type "+JSON.stringify(object.type));return Object.keys(object)}exports.getFieldNames=getFieldNames;function getFieldValue(object,fieldName){var d=Def.fromValue(object);if(d){var field=d.allFields[fieldName];if(field){return field.getValue(object)}}return object[fieldName]}exports.getFieldValue=getFieldValue;exports.eachField=function(object,callback,context){getFieldNames(object).forEach(function(name){callback.call(this,name,getFieldValue(object,name))},context)};exports.someField=function(object,callback,context){return getFieldNames(object).some(function(name){return callback.call(this,name,getFieldValue(object,name))},context)};Object.defineProperty(Dp,"finalized",{value:false});Dp.finalize=function(){if(!this.finalized){var allFields=this.allFields;var allSupertypes=this.allSupertypes;this.baseNames.forEach(function(name){var def=defCache[name];def.finalize();extend(allFields,def.allFields);extend(allSupertypes,def.allSupertypes)});extend(allFields,this.ownFields);allSupertypes[this.typeName]=this;this.fieldNames.length=0;for(var fieldName in allFields){if(hasOwn.call(allFields,fieldName)&&!allFields[fieldName].hidden){this.fieldNames.push(fieldName)}}Object.defineProperty(namedTypes,this.typeName,{enumerable:true,value:this.type});Object.defineProperty(this,"finalized",{value:true});populateSupertypeList(this.typeName,this.supertypeList)}};function populateSupertypeList(typeName,list){list.length=0;list.push(typeName);var lastSeen=Object.create(null);for(var pos=0;pos<list.length;++pos){typeName=list[pos];var d=defCache[typeName];assert.strictEqual(d.finalized,true);if(hasOwn.call(lastSeen,typeName)){delete list[lastSeen[typeName]]}lastSeen[typeName]=pos;list.push.apply(list,d.baseNames)}for(var to=0,from=to,len=list.length;from<len;++from){if(hasOwn.call(list,from)){list[to++]=list[from]}}list.length=to}function extend(into,from){Object.keys(from).forEach(function(name){into[name]=from[name]});return into}exports.finalize=function(){Object.keys(defCache).forEach(function(name){defCache[name].finalize()})}},{assert:97}],16:[function(require,module,exports){var types=require("./lib/types");require("./def/core");require("./def/es6");require("./def/es7");require("./def/mozilla");require("./def/e4x");require("./def/fb-harmony");types.finalize();exports.Type=types.Type;exports.builtInTypes=types.builtInTypes;exports.namedTypes=types.namedTypes;exports.builders=types.builders;exports.defineMethod=types.defineMethod;exports.getFieldNames=types.getFieldNames;exports.getFieldValue=types.getFieldValue;exports.eachField=types.eachField;exports.someField=types.someField;exports.getSupertypeNames=types.getSupertypeNames;exports.astNodesAreEquivalent=require("./lib/equiv");exports.traverse=require("./lib/traverse");exports.finalize=types.finalize;exports.NodePath=require("./lib/node-path");exports.PathVisitor=require("./lib/path-visitor");exports.visit=exports.PathVisitor.visit},{"./def/core":2,"./def/e4x":3,"./def/es6":4,"./def/es7":5,"./def/fb-harmony":6,"./def/mozilla":7,"./lib/equiv":8,"./lib/node-path":9,"./lib/path-visitor":10,"./lib/traverse":14,"./lib/types":15}],17:[function(require,module,exports){(function(process){var callSiteToString=require("./lib/compat").callSiteToString;var EventEmitter=require("events").EventEmitter;var relative=require("path").relative;module.exports=depd;var basePath=process.cwd();var eventListenerCount=EventEmitter.listenerCount||function(emitter,type){return emitter.listeners(type).length};function containsNamespace(str,namespace){var val=str.split(/[ ,]+/);namespace=String(namespace).toLowerCase();for(var i=0;i<val.length;i++){if(!(str=val[i]))continue;if(str==="*"||str.toLowerCase()===namespace){return true}}return false}function convertDataDescriptorToAccessor(obj,prop,message){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);var value=descriptor.value;descriptor.get=function getter(){return value};if(descriptor.writable){descriptor.set=function setter(val){return value=val}}delete descriptor.value;delete descriptor.writable;Object.defineProperty(obj,prop,descriptor);return descriptor}function createArgumentsString(arity){var str="";for(var i=0;i<arity;i++){str+=", arg"+i}return str.substr(2)}function createStackString(stack){var str=this.name+": "+this.namespace;if(this.message){str+=" deprecated "+this.message}for(var i=0;i<stack.length;i++){str+="\n    at "+callSiteToString(stack[i])}return str}function depd(namespace){if(!namespace){throw new TypeError("argument namespace is required")}var stack=getStack();var site=callSiteLocation(stack[1]);var file=site[0];function deprecate(message){log.call(deprecate,message)}deprecate._file=file;deprecate._ignored=isignored(namespace);deprecate._namespace=namespace;deprecate._traced=istraced(namespace);deprecate._warned=Object.create(null);deprecate.function=wrapfunction;deprecate.property=wrapproperty;return deprecate}function isignored(namespace){if(process.noDeprecation){return true}var str=process.env.NO_DEPRECATION||"";return containsNamespace(str,namespace)}function istraced(namespace){if(process.traceDeprecation){return true}var str=process.env.TRACE_DEPRECATION||"";return containsNamespace(str,namespace)}function log(message,site){var haslisteners=eventListenerCount(process,"deprecation")!==0;if(!haslisteners&&this._ignored){return}var caller;var callFile;var callSite;var i=0;var seen=false;var stack=getStack();var file=this._file;if(site){callSite=callSiteLocation(stack[1]);callSite.name=site.name;file=callSite[0]}else{i=2;site=callSiteLocation(stack[i]);callSite=site}for(;i<stack.length;i++){caller=callSiteLocation(stack[i]);callFile=caller[0];if(callFile===file){seen=true}else if(callFile===this._file){file=this._file}else if(seen){break}}var key=caller?site.join(":")+"__"+caller.join(":"):undefined;if(key!==undefined&&key in this._warned){return}this._warned[key]=true;if(!message){message=callSite===site||!callSite.name?defaultMessage(site):defaultMessage(callSite)}if(haslisteners){var err=DeprecationError(this._namespace,message,stack.slice(i));process.emit("deprecation",err);return}var format=process.stderr.isTTY?formatColor:formatPlain;var msg=format.call(this,message,caller,stack.slice(i));process.stderr.write(msg+"\n","utf8");return}function callSiteLocation(callSite){var file=callSite.getFileName()||"<anonymous>";var line=callSite.getLineNumber();var colm=callSite.getColumnNumber();if(callSite.isEval()){file=callSite.getEvalOrigin()+", "+file}var site=[file,line,colm];site.callSite=callSite;site.name=callSite.getFunctionName();return site}function defaultMessage(site){var callSite=site.callSite;var funcName=site.name;var typeName=callSite.getTypeName();if(!funcName){funcName="<anonymous@"+formatLocation(site)+">"}if(typeName==="Function"){typeName=callSite.getThis().name||typeName}return callSite.getMethodName()?typeName+"."+funcName:funcName}function formatPlain(msg,caller,stack){var timestamp=(new Date).toUTCString();var formatted=timestamp+" "+this._namespace+" deprecated "+msg;if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    at "+callSiteToString(stack[i])}return formatted}if(caller){formatted+=" at "+formatLocation(caller)}return formatted}function formatColor(msg,caller,stack){var formatted="[36;1m"+this._namespace+"[22;39m"+" [33;1mdeprecated[22;39m"+" [0m"+msg+"[39m";
if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    [36mat "+callSiteToString(stack[i])+"[39m"}return formatted}if(caller){formatted+=" [36m"+formatLocation(caller)+"[39m"}return formatted}function formatLocation(callSite){return relative(basePath,callSite[0])+":"+callSite[1]+":"+callSite[2]}function getStack(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=Math.max(10,limit);Error.captureStackTrace(obj);var stack=obj.stack.slice(1);Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack}function prepareObjectStackTrace(obj,stack){return stack}function wrapfunction(fn,message){if(typeof fn!=="function"){throw new TypeError("argument fn must be a function")}var args=createArgumentsString(fn.length);var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+") {\n"+'"use strict"\n'+"log.call(deprecate, message, site)\n"+"return fn.apply(this, arguments)\n"+"})");return deprecatedfn}function wrapproperty(obj,prop,message){if(!obj||typeof obj!=="object"&&typeof obj!=="function"){throw new TypeError("argument obj must be object")}var descriptor=Object.getOwnPropertyDescriptor(obj,prop);if(!descriptor){throw new TypeError("must call property on owner object")}if(!descriptor.configurable){throw new TypeError("property must be configurable")}var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=prop;if("value"in descriptor){descriptor=convertDataDescriptorToAccessor(obj,prop,message)}var get=descriptor.get;var set=descriptor.set;if(typeof get==="function"){descriptor.get=function getter(){log.call(deprecate,message,site);return get.apply(this,arguments)}}if(typeof set==="function"){descriptor.set=function setter(){log.call(deprecate,message,site);return set.apply(this,arguments)}}Object.defineProperty(obj,prop,descriptor)}function DeprecationError(namespace,message,stack){var error=new Error;var stackString;Object.defineProperty(error,"constructor",{value:DeprecationError});Object.defineProperty(error,"message",{configurable:true,enumerable:false,value:message,writable:true});Object.defineProperty(error,"name",{enumerable:false,configurable:true,value:"DeprecationError",writable:true});Object.defineProperty(error,"namespace",{configurable:true,enumerable:false,value:namespace,writable:true});Object.defineProperty(error,"stack",{configurable:true,enumerable:false,get:function(){if(stackString!==undefined){return stackString}return stackString=createStackString.call(this,stack)},set:function setter(val){stackString=val}});return error}}).call(this,require("_process"))},{"./lib/compat":20,_process:105,events:102,path:104}],18:[function(require,module,exports){(function(Buffer){module.exports=bufferConcat;function bufferConcat(bufs){var length=0;for(var i=0,len=bufs.length;i<len;i++){length+=bufs[i].length}var buf=new Buffer(length);var pos=0;for(var i=0,len=bufs.length;i<len;i++){bufs[i].copy(buf,pos);pos+=bufs[i].length}return buf}}).call(this,require("buffer").Buffer)},{buffer:98}],19:[function(require,module,exports){module.exports=callSiteToString;function callSiteFileLocation(callSite){var fileName;var fileLocation="";if(callSite.isNative()){fileLocation="native"}else if(callSite.isEval()){fileName=callSite.getScriptNameOrSourceURL();if(!fileName){fileLocation=callSite.getEvalOrigin()}}else{fileName=callSite.getFileName()}if(fileName){fileLocation+=fileName;var lineNumber=callSite.getLineNumber();if(lineNumber!=null){fileLocation+=":"+lineNumber;var columnNumber=callSite.getColumnNumber();if(columnNumber){fileLocation+=":"+columnNumber}}}return fileLocation||"unknown source"}function callSiteToString(callSite){var addSuffix=true;var fileLocation=callSiteFileLocation(callSite);var functionName=callSite.getFunctionName();var isConstructor=callSite.isConstructor();var isMethodCall=!(callSite.isToplevel()||isConstructor);var line="";if(isMethodCall){var methodName=callSite.getMethodName();var typeName=getConstructorName(callSite);if(functionName){if(typeName&&functionName.indexOf(typeName)!==0){line+=typeName+"."}line+=functionName;if(methodName&&functionName.lastIndexOf("."+methodName)!==functionName.length-methodName.length-1){line+=" [as "+methodName+"]"}}else{line+=typeName+"."+(methodName||"<anonymous>")}}else if(isConstructor){line+="new "+(functionName||"<anonymous>")}else if(functionName){line+=functionName}else{addSuffix=false;line+=fileLocation}if(addSuffix){line+=" ("+fileLocation+")"}return line}function getConstructorName(obj){var receiver=obj.receiver;return receiver.constructor&&receiver.constructor.name||null}},{}],20:[function(require,module,exports){(function(Buffer){lazyProperty(module.exports,"bufferConcat",function bufferConcat(){return Buffer.concat||require("./buffer-concat")});lazyProperty(module.exports,"callSiteToString",function callSiteToString(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;function prepareObjectStackTrace(obj,stack){return stack}Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=2;Error.captureStackTrace(obj);var stack=obj.stack.slice();Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack[0].toString?toString:require("./callsite-tostring")});function lazyProperty(obj,prop,getter){function get(){var val=getter();Object.defineProperty(obj,prop,{configurable:true,enumerable:true,value:val});return val}Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:get})}function toString(obj){return obj.toString()}}).call(this,require("buffer").Buffer)},{"./buffer-concat":18,"./callsite-tostring":19,buffer:98}],21:[function(require,module,exports){(function(global){(function(){"use strict";var Syntax,Precedence,BinaryPrecedence,SourceNode,estraverse,esutils,isArray,base,indent,json,renumber,hexadecimal,quotes,escapeless,newline,space,parentheses,semicolons,safeConcatenation,directive,extra,parse,sourceMap,sourceCode,preserveBlankLines,FORMAT_MINIFY,FORMAT_DEFAULTS;estraverse=require("estraverse");esutils=require("esutils");Syntax=estraverse.Syntax;function isExpression(node){return CodeGenerator.Expression.hasOwnProperty(node.type)}function isStatement(node){return CodeGenerator.Statement.hasOwnProperty(node.type)}Precedence={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};BinaryPrecedence={"||":Precedence.LogicalOR,"&&":Precedence.LogicalAND,"|":Precedence.BitwiseOR,"^":Precedence.BitwiseXOR,"&":Precedence.BitwiseAND,"==":Precedence.Equality,"!=":Precedence.Equality,"===":Precedence.Equality,"!==":Precedence.Equality,is:Precedence.Equality,isnt:Precedence.Equality,"<":Precedence.Relational,">":Precedence.Relational,"<=":Precedence.Relational,">=":Precedence.Relational,"in":Precedence.Relational,"instanceof":Precedence.Relational,"<<":Precedence.BitwiseSHIFT,">>":Precedence.BitwiseSHIFT,">>>":Precedence.BitwiseSHIFT,"+":Precedence.Additive,"-":Precedence.Additive,"*":Precedence.Multiplicative,"%":Precedence.Multiplicative,"/":Precedence.Multiplicative};var F_ALLOW_IN=1,F_ALLOW_CALL=1<<1,F_ALLOW_UNPARATH_NEW=1<<2,F_FUNC_BODY=1<<3,F_DIRECTIVE_CTX=1<<4,F_SEMICOLON_OPT=1<<5;var E_FTT=F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TTF=F_ALLOW_IN|F_ALLOW_CALL,E_TTT=F_ALLOW_IN|F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TFF=F_ALLOW_IN,E_FFT=F_ALLOW_UNPARATH_NEW,E_TFT=F_ALLOW_IN|F_ALLOW_UNPARATH_NEW;var S_TFFF=F_ALLOW_IN,S_TFFT=F_ALLOW_IN|F_SEMICOLON_OPT,S_FFFF=0,S_TFTF=F_ALLOW_IN|F_DIRECTIVE_CTX,S_TTFF=F_ALLOW_IN|F_FUNC_BODY;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function hasLineTerminator(str){return/[\r\n]/g.test(str)}function endsWithLineTerminator(str){var len=str.length;return len&&esutils.code.isLineTerminator(str.charCodeAt(len-1))}function merge(target,override){var key;for(key in override){if(override.hasOwnProperty(key)){target[key]=override[key]}}return target}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function generateNumber(value){var result,point,temp,exponent,pos;if(value!==value){throw new Error("Numeric literal whose value is NaN")}if(value<0||value===0&&1/value<0){throw new Error("Numeric literal whose value is negative")}if(value===1/0){return json?"null":renumber?"1e400":"1e+400"}result=""+value;if(!renumber||result.length<3){return result}point=result.indexOf(".");if(!json&&result.charCodeAt(0)===48&&point===1){point=0;result=result.slice(1)}temp=result;result=result.replace("e+","e");exponent=0;if((pos=temp.indexOf("e"))>0){exponent=+temp.slice(pos+1);temp=temp.slice(0,pos)}if(point>=0){exponent-=temp.length-point-1;temp=+(temp.slice(0,point)+temp.slice(point+1))+""}pos=0;while(temp.charCodeAt(temp.length+pos-1)===48){--pos}if(pos!==0){exponent-=pos;temp=temp.slice(0,pos)}if(exponent!==0){temp+="e"+exponent}if((temp.length<result.length||hexadecimal&&value>1e12&&Math.floor(value)===value&&(temp="0x"+value.toString(16)).length<result.length)&&+temp===value){result=temp}return result}function escapeRegExpCharacter(ch,previousIsBackslash){if((ch&~1)===8232){return(previousIsBackslash?"u":"\\u")+(ch===8232?"2028":"2029")}else if(ch===10||ch===13){return(previousIsBackslash?"":"\\")+(ch===10?"n":"r")}return String.fromCharCode(ch)}function generateRegExp(reg){var match,result,flags,i,iz,ch,characterInBrack,previousIsBackslash;result=reg.toString();if(reg.source){match=result.match(/\/([^/]*)$/);if(!match){return result}flags=match[1];result="";characterInBrack=false;previousIsBackslash=false;for(i=0,iz=reg.source.length;i<iz;++i){ch=reg.source.charCodeAt(i);if(!previousIsBackslash){if(characterInBrack){if(ch===93){characterInBrack=false}}else{if(ch===47){result+="\\"}else if(ch===91){characterInBrack=true}}result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=ch===92}else{result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=false}}return"/"+result+"/"+flags}return result}function escapeAllowedCharacter(code,next){var hex;if(code===8){return"\\b"}if(code===12){return"\\f"}if(code===9){return"\\t"}hex=code.toString(16).toUpperCase();if(json||code>255){return"\\u"+"0000".slice(hex.length)+hex}else if(code===0&&!esutils.code.isDecimalDigit(next)){return"\\0"}else if(code===11){return"\\x0B"}else{return"\\x"+"00".slice(hex.length)+hex}}function escapeDisallowedCharacter(code){if(code===92){return"\\\\"}if(code===10){return"\\n"}if(code===13){return"\\r"}if(code===8232){return"\\u2028"}if(code===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function escapeDirective(str){var i,iz,code,quote;quote=quotes==="double"?'"':"'";for(i=0,iz=str.length;i<iz;++i){code=str.charCodeAt(i);if(code===39){quote='"';break}else if(code===34){quote="'";break}else if(code===92){++i}}return quote+str+quote}function escapeString(str){var result="",i,len,code,singleQuotes=0,doubleQuotes=0,single,quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39){++singleQuotes}else if(code===34){++doubleQuotes}else if(code===47&&json){result+="\\"}else if(esutils.code.isLineTerminator(code)||code===92){result+=escapeDisallowedCharacter(code);continue}else if(json&&code<32||!(json||escapeless||code>=32&&code<=126)){result+=escapeAllowedCharacter(code,str.charCodeAt(i+1));continue}result+=String.fromCharCode(code)}single=!(quotes==="double"||quotes==="auto"&&doubleQuotes<singleQuotes);quote=single?"'":'"';if(!(single?singleQuotes:doubleQuotes)){return quote+result+quote}str=result;result=quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39&&single||code===34&&!single){result+="\\"}result+=String.fromCharCode(code)}return result+quote}function flattenToString(arr){var i,iz,elem,result="";for(i=0,iz=arr.length;i<iz;++i){elem=arr[i];result+=isArray(elem)?flattenToString(elem):elem}return result}function toSourceNodeWhenNeeded(generated,node){if(!sourceMap){if(isArray(generated)){return flattenToString(generated)}else{return generated}}if(node==null){if(generated instanceof SourceNode){return generated}else{node={}}}if(node.loc==null){return new SourceNode(null,null,sourceMap,generated,node.name||null)}return new SourceNode(node.loc.start.line,node.loc.start.column,sourceMap===true?node.loc.source||null:sourceMap,generated,node.name||null)}function noEmptySpace(){return space?space:" "}function join(left,right){var leftSource,rightSource,leftCharCode,rightCharCode;leftSource=toSourceNodeWhenNeeded(left).toString();if(leftSource.length===0){return[right]}rightSource=toSourceNodeWhenNeeded(right).toString();if(rightSource.length===0){return[left]}leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=rightSource.charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPart(leftCharCode)&&esutils.code.isIdentifierPart(rightCharCode)||leftCharCode===47&&rightCharCode===105){return[left,noEmptySpace(),right]}else if(esutils.code.isWhiteSpace(leftCharCode)||esutils.code.isLineTerminator(leftCharCode)||esutils.code.isWhiteSpace(rightCharCode)||esutils.code.isLineTerminator(rightCharCode)){return[left,right]}return[left,space,right]}function addIndent(stmt){return[base,stmt]}function withIndent(fn){var previousBase;previousBase=base;base+=indent;fn(base);base=previousBase}function calculateSpaces(str){var i;for(i=str.length-1;i>=0;--i){if(esutils.code.isLineTerminator(str.charCodeAt(i))){break}}return str.length-1-i}function adjustMultilineComment(value,specialBase){var array,i,len,line,j,spaces,previousBase,sn;array=value.split(/\r\n|[\r\n]/);spaces=Number.MAX_VALUE;for(i=1,len=array.length;i<len;++i){line=array[i];j=0;while(j<line.length&&esutils.code.isWhiteSpace(line.charCodeAt(j))){++j}if(spaces>j){spaces=j}}if(typeof specialBase!=="undefined"){previousBase=base;if(array[1][spaces]==="*"){specialBase+=" "}base=specialBase}else{if(spaces&1){--spaces}previousBase=base}for(i=1,len=array.length;i<len;++i){sn=toSourceNodeWhenNeeded(addIndent(array[i].slice(spaces)));array[i]=sourceMap?sn.join(""):sn}base=previousBase;return array.join("\n")}function generateComment(comment,specialBase){if(comment.type==="Line"){if(endsWithLineTerminator(comment.value)){return"//"+comment.value}else{var result="//"+comment.value;if(!preserveBlankLines){result+="\n"}return result}}if(extra.format.indent.adjustMultilineComment&&/[\n\r]/.test(comment.value)){return adjustMultilineComment("/*"+comment.value+"*/",specialBase)}return"/*"+comment.value+"*/"}function addComments(stmt,result){var i,len,comment,save,tailingToStatement,specialBase,fragment,extRange,range,prevRange,prefix,infix,suffix,count;if(stmt.leadingComments&&stmt.leadingComments.length>0){save=result;if(preserveBlankLines){comment=stmt.leadingComments[0];result=[];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}prevRange=range;for(i=1,len=stmt.leadingComments.length;i<len;i++){comment=stmt.leadingComments[i];range=comment.range;infix=sourceCode.substring(prevRange[1],range[0]);count=(infix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)));prevRange=range}suffix=sourceCode.substring(range[1],extRange[1]);count=(suffix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count))}else{comment=stmt.leadingComments[0];result=[];if(safeConcatenation&&stmt.type===Syntax.Program&&stmt.body.length===0){result.push("\n")}result.push(generateComment(comment));if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push("\n")}for(i=1,len=stmt.leadingComments.length;i<len;++i){comment=stmt.leadingComments[i];fragment=[generateComment(comment)];if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){fragment.push("\n")}result.push(addIndent(fragment))}}result.push(addIndent(save))}if(stmt.trailingComments){if(preserveBlankLines){comment=stmt.trailingComments[0];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}}else{tailingToStatement=!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());specialBase=stringRepeat(" ",calculateSpaces(toSourceNodeWhenNeeded([base,result,indent]).toString()));for(i=0,len=stmt.trailingComments.length;i<len;++i){comment=stmt.trailingComments[i];if(tailingToStatement){if(i===0){result=[result,indent]}else{result=[result,specialBase]}result.push(generateComment(comment,specialBase))}else{result=[result,addIndent(generateComment(comment))]}if(i!==len-1&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result=[result,"\n"]}}}}return result}function generateBlankLines(start,end,result){var j,newlineCount=0;for(j=start;j<end;j++){if(sourceCode[j]==="\n"){newlineCount++}}for(j=1;j<newlineCount;j++){result.push(newline)}}function parenthesize(text,current,should){if(current<should){return["(",text,")"]}return text}function generateVerbatimString(string){var i,iz,result;result=string.split(/\r\n|\n/);for(i=1,iz=result.length;i<iz;i++){result[i]=newline+base+result[i]}return result}function generateVerbatim(expr,precedence){var verbatim,result,prec;verbatim=expr[extra.verbatim];if(typeof verbatim==="string"){result=parenthesize(generateVerbatimString(verbatim),Precedence.Sequence,precedence)}else{result=generateVerbatimString(verbatim.content);prec=verbatim.precedence!=null?verbatim.precedence:Precedence.Sequence;result=parenthesize(result,prec,precedence)}return toSourceNodeWhenNeeded(result,expr)}function CodeGenerator(){}CodeGenerator.prototype.maybeBlock=function(stmt,flags){var result,noLeadingComment,that=this;noLeadingComment=!extra.comment||!stmt.leadingComments;if(stmt.type===Syntax.BlockStatement&&noLeadingComment){return[space,this.generateStatement(stmt,flags)]}if(stmt.type===Syntax.EmptyStatement&&noLeadingComment){return";"}withIndent(function(){result=[newline,addIndent(that.generateStatement(stmt,flags))]});return result};CodeGenerator.prototype.maybeBlockSuffix=function(stmt,result){var ends=endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());if(stmt.type===Syntax.BlockStatement&&(!extra.comment||!stmt.leadingComments)&&!ends){return[result,space]}if(ends){return[result,base]}return[result,newline,base]};function generateIdentifier(node){return toSourceNodeWhenNeeded(node.name,node)}function generateAsyncPrefix(node,spaceRequired){return node.async?"async"+(spaceRequired?noEmptySpace():space):""}function generateStarSuffix(node){var isGenerator=node.generator&&!extra.moz.starlessGenerator;return isGenerator?"*"+space:""}function generateMethodPrefix(prop){var func=prop.value;if(func.async){return generateAsyncPrefix(func,!prop.computed)}else{return generateStarSuffix(func)?"*":""}}CodeGenerator.prototype.generatePattern=function(node,precedence,flags){if(node.type===Syntax.Identifier){return generateIdentifier(node)}return this.generateExpression(node,precedence,flags)};CodeGenerator.prototype.generateFunctionParams=function(node){var i,iz,result,hasDefault;hasDefault=false;if(node.type===Syntax.ArrowFunctionExpression&&!node.rest&&(!node.defaults||node.defaults.length===0)&&node.params.length===1&&node.params[0].type===Syntax.Identifier){result=[generateAsyncPrefix(node,true),generateIdentifier(node.params[0])]}else{result=node.type===Syntax.ArrowFunctionExpression?[generateAsyncPrefix(node,false)]:[];result.push("(");if(node.defaults){hasDefault=true}for(i=0,iz=node.params.length;i<iz;++i){if(hasDefault&&node.defaults[i]){result.push(this.generateAssignment(node.params[i],node.defaults[i],"=",Precedence.Assignment,E_TTT))}else{result.push(this.generatePattern(node.params[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+space)}}if(node.rest){if(node.params.length){result.push(","+space)}result.push("...");result.push(generateIdentifier(node.rest))}result.push(")")}return result};CodeGenerator.prototype.generateFunctionBody=function(node){var result,expr;result=this.generateFunctionParams(node);if(node.type===Syntax.ArrowFunctionExpression){result.push(space);result.push("=>")}if(node.expression){result.push(space);expr=this.generateExpression(node.body,Precedence.Assignment,E_TTT);if(expr.toString().charAt(0)==="{"){expr=["(",expr,")"]}result.push(expr)}else{result.push(this.maybeBlock(node.body,S_TTFF))}return result};CodeGenerator.prototype.generateIterationForStatement=function(operator,stmt,flags){var result=["for"+space+"("],that=this;withIndent(function(){if(stmt.left.type===Syntax.VariableDeclaration){withIndent(function(){result.push(stmt.left.kind+noEmptySpace());result.push(that.generateStatement(stmt.left.declarations[0],S_FFFF))})}else{result.push(that.generateExpression(stmt.left,Precedence.Call,E_TTT))}result=join(result,operator);result=[join(result,that.generateExpression(stmt.right,Precedence.Sequence,E_TTT)),")"]});result.push(this.maybeBlock(stmt.body,flags));return result};CodeGenerator.prototype.generatePropertyKey=function(expr,computed){var result=[];if(computed){result.push("[")}result.push(this.generateExpression(expr,Precedence.Sequence,E_TTT));if(computed){result.push("]")}return result};CodeGenerator.prototype.generateAssignment=function(left,right,operator,precedence,flags){if(Precedence.Assignment<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(left,Precedence.Call,flags),space+operator+space,this.generateExpression(right,Precedence.Assignment,flags)],Precedence.Assignment,precedence)};CodeGenerator.prototype.semicolon=function(flags){if(!semicolons&&flags&F_SEMICOLON_OPT){return""}return";"};CodeGenerator.Statement={BlockStatement:function(stmt,flags){var range,content,result=["{",newline],that=this;withIndent(function(){if(stmt.body.length===0&&preserveBlankLines){range=stmt.range;if(range[1]-range[0]>2){content=sourceCode.substring(range[0]+1,range[1]-1);if(content[0]==="\n"){result=["{"]}result.push(content)}}var i,iz,fragment,bodyFlags;bodyFlags=S_TFFF;if(flags&F_FUNC_BODY){bodyFlags|=F_DIRECTIVE_CTX}for(i=0,iz=stmt.body.length;i<iz;++i){if(preserveBlankLines){if(i===0){if(stmt.body[0].leadingComments){range=stmt.body[0].leadingComments[0].extendedRange;content=sourceCode.substring(range[0],range[1]);if(content[0]==="\n"){result=["{"]}}if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[0].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(stmt.body[i].leadingComments&&preserveBlankLines){fragment=that.generateStatement(stmt.body[i],bodyFlags)}else{fragment=addIndent(that.generateStatement(stmt.body[i],bodyFlags))}result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines&&i<iz-1){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}});result.push(addIndent("}"));return result},BreakStatement:function(stmt,flags){if(stmt.label){return"break "+stmt.label.name+this.semicolon(flags)}return"break"+this.semicolon(flags)},ContinueStatement:function(stmt,flags){if(stmt.label){return"continue "+stmt.label.name+this.semicolon(flags)}return"continue"+this.semicolon(flags)},ClassBody:function(stmt,flags){var result=["{",newline],that=this;withIndent(function(indent){var i,iz;for(i=0,iz=stmt.body.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.body[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ClassDeclaration:function(stmt,flags){var result,fragment;result=["class "+stmt.id.name];if(stmt.superClass){fragment=join("extends",this.generateExpression(stmt.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(stmt.body,S_TFFT));return result},DirectiveStatement:function(stmt,flags){if(extra.raw&&stmt.raw){return stmt.raw+this.semicolon(flags)}return escapeDirective(stmt.directive)+this.semicolon(flags)},DoWhileStatement:function(stmt,flags){var result=join("do",this.maybeBlock(stmt.body,S_TFFF));result=this.maybeBlockSuffix(stmt.body,result);return join(result,["while"+space+"(",this.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"+this.semicolon(flags)])},CatchClause:function(stmt,flags){var result,that=this;withIndent(function(){var guard;result=["catch"+space+"(",that.generateExpression(stmt.param,Precedence.Sequence,E_TTT),")"];if(stmt.guard){guard=that.generateExpression(stmt.guard,Precedence.Sequence,E_TTT);result.splice(2,0," if ",guard)}});result.push(this.maybeBlock(stmt.body,S_TFFF));return result},DebuggerStatement:function(stmt,flags){return"debugger"+this.semicolon(flags)},EmptyStatement:function(stmt,flags){return";"},ExportDeclaration:function(stmt,flags){var result=["export"],bodyFlags,that=this;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;if(stmt["default"]){result=join(result,"default");if(isStatement(stmt.declaration)){result=join(result,this.generateStatement(stmt.declaration,bodyFlags))}else{result=join(result,this.generateExpression(stmt.declaration,Precedence.Assignment,E_TTT)+this.semicolon(flags))}return result}if(stmt.declaration){return join(result,this.generateStatement(stmt.declaration,bodyFlags))}if(stmt.specifiers){if(stmt.specifiers.length===0){result=join(result,"{"+space+"}")}else if(stmt.specifiers[0].type===Syntax.ExportBatchSpecifier){result=join(result,this.generateExpression(stmt.specifiers[0],Precedence.Sequence,E_TTT))}else{result=join(result,"{");withIndent(function(indent){var i,iz;result.push(newline);for(i=0,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}")}if(stmt.source){result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)])}else{result.push(this.semicolon(flags))}}return result},ExpressionStatement:function(stmt,flags){var result,fragment;function isClassPrefixed(fragment){var code;if(fragment.slice(0,5)!=="class"){return false}code=fragment.charCodeAt(5);return code===123||esutils.code.isWhiteSpace(code)||esutils.code.isLineTerminator(code)}function isFunctionPrefixed(fragment){var code;if(fragment.slice(0,8)!=="function"){return false}code=fragment.charCodeAt(8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}function isAsyncPrefixed(fragment){var code,i,iz;if(fragment.slice(0,5)!=="async"){return false}if(!esutils.code.isWhiteSpace(fragment.charCodeAt(5))){return false}for(i=6,iz=fragment.length;i<iz;++i){if(!esutils.code.isWhiteSpace(fragment.charCodeAt(i))){break}}if(i===iz){return false}if(fragment.slice(i,i+8)!=="function"){return false}code=fragment.charCodeAt(i+8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}result=[this.generateExpression(stmt.expression,Precedence.Sequence,E_TTT)];fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.charCodeAt(0)===123||isClassPrefixed(fragment)||isFunctionPrefixed(fragment)||isAsyncPrefixed(fragment)||directive&&flags&F_DIRECTIVE_CTX&&stmt.expression.type===Syntax.Literal&&typeof stmt.expression.value==="string"){result=["(",result,")"+this.semicolon(flags)]}else{result.push(this.semicolon(flags))}return result},ImportDeclaration:function(stmt,flags){var result,cursor,that=this;if(stmt.specifiers.length===0){return["import",space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]}result=["import"];cursor=0;if(stmt.specifiers[cursor].type===Syntax.ImportDefaultSpecifier){result=join(result,[this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)]);++cursor}if(stmt.specifiers[cursor]){if(cursor!==0){result.push(",")}if(stmt.specifiers[cursor].type===Syntax.ImportNamespaceSpecifier){result=join(result,[space,this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)])}else{result.push(space+"{");if(stmt.specifiers.length-cursor===1){result.push(space);result.push(this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT));result.push(space+"}"+space)}else{withIndent(function(indent){var i,iz;result.push(newline);for(i=cursor,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}"+space)}}}result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]);return result},VariableDeclarator:function(stmt,flags){var itemFlags=flags&F_ALLOW_IN?E_TTT:E_FTT;if(stmt.init){return[this.generateExpression(stmt.id,Precedence.Assignment,itemFlags),space,"=",space,this.generateExpression(stmt.init,Precedence.Assignment,itemFlags)]}return this.generatePattern(stmt.id,Precedence.Assignment,itemFlags)},VariableDeclaration:function(stmt,flags){var result,i,iz,node,bodyFlags,that=this;result=[stmt.kind];bodyFlags=flags&F_ALLOW_IN?S_TFFF:S_FFFF;function block(){node=stmt.declarations[0];if(extra.comment&&node.leadingComments){result.push("\n");result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(noEmptySpace());result.push(that.generateStatement(node,bodyFlags))}for(i=1,iz=stmt.declarations.length;i<iz;++i){node=stmt.declarations[i];if(extra.comment&&node.leadingComments){result.push(","+newline);result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(","+space);result.push(that.generateStatement(node,bodyFlags))}}}if(stmt.declarations.length>1){withIndent(block)}else{block()}result.push(this.semicolon(flags));return result},ThrowStatement:function(stmt,flags){return[join("throw",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]
},TryStatement:function(stmt,flags){var result,i,iz,guardedHandlers;result=["try",this.maybeBlock(stmt.block,S_TFFF)];result=this.maybeBlockSuffix(stmt.block,result);if(stmt.handlers){for(i=0,iz=stmt.handlers.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handlers[i].body,result)}}}else{guardedHandlers=stmt.guardedHandlers||[];for(i=0,iz=guardedHandlers.length;i<iz;++i){result=join(result,this.generateStatement(guardedHandlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(guardedHandlers[i].body,result)}}if(stmt.handler){if(isArray(stmt.handler)){for(i=0,iz=stmt.handler.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handler[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handler[i].body,result)}}}else{result=join(result,this.generateStatement(stmt.handler,S_TFFF));if(stmt.finalizer){result=this.maybeBlockSuffix(stmt.handler.body,result)}}}}if(stmt.finalizer){result=join(result,["finally",this.maybeBlock(stmt.finalizer,S_TFFF)])}return result},SwitchStatement:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){result=["switch"+space+"(",that.generateExpression(stmt.discriminant,Precedence.Sequence,E_TTT),")"+space+"{"+newline]});if(stmt.cases){bodyFlags=S_TFFF;for(i=0,iz=stmt.cases.length;i<iz;++i){if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(this.generateStatement(stmt.cases[i],bodyFlags));result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}}result.push(addIndent("}"));return result},SwitchCase:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){if(stmt.test){result=[join("case",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT)),":"]}else{result=["default:"]}i=0;iz=stmt.consequent.length;if(iz&&stmt.consequent[0].type===Syntax.BlockStatement){fragment=that.maybeBlock(stmt.consequent[0],S_TFFF);result.push(fragment);i=1}if(i!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}bodyFlags=S_TFFF;for(;i<iz;++i){if(i===iz-1&&flags&F_SEMICOLON_OPT){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(that.generateStatement(stmt.consequent[i],bodyFlags));result.push(fragment);if(i+1!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}});return result},IfStatement:function(stmt,flags){var result,bodyFlags,semicolonOptional,that=this;withIndent(function(){result=["if"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});semicolonOptional=flags&F_SEMICOLON_OPT;bodyFlags=S_TFFF;if(semicolonOptional){bodyFlags|=F_SEMICOLON_OPT}if(stmt.alternate){result.push(this.maybeBlock(stmt.consequent,S_TFFF));result=this.maybeBlockSuffix(stmt.consequent,result);if(stmt.alternate.type===Syntax.IfStatement){result=join(result,["else ",this.generateStatement(stmt.alternate,bodyFlags)])}else{result=join(result,join("else",this.maybeBlock(stmt.alternate,bodyFlags)))}}else{result.push(this.maybeBlock(stmt.consequent,bodyFlags))}return result},ForStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["for"+space+"("];if(stmt.init){if(stmt.init.type===Syntax.VariableDeclaration){result.push(that.generateStatement(stmt.init,S_FFFF))}else{result.push(that.generateExpression(stmt.init,Precedence.Sequence,E_FTT));result.push(";")}}else{result.push(";")}if(stmt.test){result.push(space);result.push(that.generateExpression(stmt.test,Precedence.Sequence,E_TTT));result.push(";")}else{result.push(";")}if(stmt.update){result.push(space);result.push(that.generateExpression(stmt.update,Precedence.Sequence,E_TTT));result.push(")")}else{result.push(")")}});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},ForInStatement:function(stmt,flags){return this.generateIterationForStatement("in",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},ForOfStatement:function(stmt,flags){return this.generateIterationForStatement("of",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},LabeledStatement:function(stmt,flags){return[stmt.label.name+":",this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)]},Program:function(stmt,flags){var result,fragment,i,iz,bodyFlags;iz=stmt.body.length;result=[safeConcatenation&&iz>0?"\n":""];bodyFlags=S_TFTF;for(i=0;i<iz;++i){if(!safeConcatenation&&i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(preserveBlankLines){if(i===0){if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[i].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}fragment=addIndent(this.generateStatement(stmt.body[i],bodyFlags));result.push(fragment);if(i+1<iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}return result},FunctionDeclaration:function(stmt,flags){return[generateAsyncPrefix(stmt,true),"function",generateStarSuffix(stmt)||noEmptySpace(),generateIdentifier(stmt.id),this.generateFunctionBody(stmt)]},ReturnStatement:function(stmt,flags){if(stmt.argument){return[join("return",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]}return["return"+this.semicolon(flags)]},WhileStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["while"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},WithStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["with"+space+"(",that.generateExpression(stmt.object,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result}};merge(CodeGenerator.prototype,CodeGenerator.Statement);CodeGenerator.Expression={SequenceExpression:function(expr,precedence,flags){var result,i,iz;if(Precedence.Sequence<precedence){flags|=F_ALLOW_IN}result=[];for(i=0,iz=expr.expressions.length;i<iz;++i){result.push(this.generateExpression(expr.expressions[i],Precedence.Assignment,flags));if(i+1<iz){result.push(","+space)}}return parenthesize(result,Precedence.Sequence,precedence)},AssignmentExpression:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,expr.operator,precedence,flags)},ArrowFunctionExpression:function(expr,precedence,flags){return parenthesize(this.generateFunctionBody(expr),Precedence.ArrowFunction,precedence)},ConditionalExpression:function(expr,precedence,flags){if(Precedence.Conditional<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(expr.test,Precedence.LogicalOR,flags),space+"?"+space,this.generateExpression(expr.consequent,Precedence.Assignment,flags),space+":"+space,this.generateExpression(expr.alternate,Precedence.Assignment,flags)],Precedence.Conditional,precedence)},LogicalExpression:function(expr,precedence,flags){return this.BinaryExpression(expr,precedence,flags)},BinaryExpression:function(expr,precedence,flags){var result,currentPrecedence,fragment,leftSource;currentPrecedence=BinaryPrecedence[expr.operator];if(currentPrecedence<precedence){flags|=F_ALLOW_IN}fragment=this.generateExpression(expr.left,currentPrecedence,flags);leftSource=fragment.toString();if(leftSource.charCodeAt(leftSource.length-1)===47&&esutils.code.isIdentifierPart(expr.operator.charCodeAt(0))){result=[fragment,noEmptySpace(),expr.operator]}else{result=join(fragment,expr.operator)}fragment=this.generateExpression(expr.right,currentPrecedence+1,flags);if(expr.operator==="/"&&fragment.toString().charAt(0)==="/"||expr.operator.slice(-1)==="<"&&fragment.toString().slice(0,3)==="!--"){result.push(noEmptySpace());result.push(fragment)}else{result=join(result,fragment)}if(expr.operator==="in"&&!(flags&F_ALLOW_IN)){return["(",result,")"]}return parenthesize(result,currentPrecedence,precedence)},CallExpression:function(expr,precedence,flags){var result,i,iz;result=[this.generateExpression(expr.callee,Precedence.Call,E_TTF)];result.push("(");for(i=0,iz=expr["arguments"].length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")");if(!(flags&F_ALLOW_CALL)){return["(",result,")"]}return parenthesize(result,Precedence.Call,precedence)},NewExpression:function(expr,precedence,flags){var result,length,i,iz,itemFlags;length=expr["arguments"].length;itemFlags=flags&F_ALLOW_UNPARATH_NEW&&!parentheses&&length===0?E_TFT:E_TFF;result=join("new",this.generateExpression(expr.callee,Precedence.New,itemFlags));if(!(flags&F_ALLOW_UNPARATH_NEW)||parentheses||length>0){result.push("(");for(i=0,iz=length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")")}return parenthesize(result,Precedence.New,precedence)},MemberExpression:function(expr,precedence,flags){var result,fragment;result=[this.generateExpression(expr.object,Precedence.Call,flags&F_ALLOW_CALL?E_TTF:E_TFF)];if(expr.computed){result.push("[");result.push(this.generateExpression(expr.property,Precedence.Sequence,flags&F_ALLOW_CALL?E_TTT:E_TFT));result.push("]")}else{if(expr.object.type===Syntax.Literal&&typeof expr.object.value==="number"){fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.indexOf(".")<0&&!/[eExX]/.test(fragment)&&esutils.code.isDecimalDigit(fragment.charCodeAt(fragment.length-1))&&!(fragment.length>=2&&fragment.charCodeAt(0)===48)){result.push(".")}}result.push(".");result.push(generateIdentifier(expr.property))}return parenthesize(result,Precedence.Member,precedence)},UnaryExpression:function(expr,precedence,flags){var result,fragment,rightCharCode,leftSource,leftCharCode;fragment=this.generateExpression(expr.argument,Precedence.Unary,E_TTT);if(space===""){result=join(expr.operator,fragment)}else{result=[expr.operator];if(expr.operator.length>2){result=join(result,fragment)}else{leftSource=toSourceNodeWhenNeeded(result).toString();leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=fragment.toString().charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPart(leftCharCode)&&esutils.code.isIdentifierPart(rightCharCode)){result.push(noEmptySpace());result.push(fragment)}else{result.push(fragment)}}}return parenthesize(result,Precedence.Unary,precedence)},YieldExpression:function(expr,precedence,flags){var result;if(expr.delegate){result="yield*"}else{result="yield"}if(expr.argument){result=join(result,this.generateExpression(expr.argument,Precedence.Yield,E_TTT))}return parenthesize(result,Precedence.Yield,precedence)},AwaitExpression:function(expr,precedence,flags){var result=join(expr.delegate?"await*":"await",this.generateExpression(expr.argument,Precedence.Await,E_TTT));return parenthesize(result,Precedence.Await,precedence)},UpdateExpression:function(expr,precedence,flags){if(expr.prefix){return parenthesize([expr.operator,this.generateExpression(expr.argument,Precedence.Unary,E_TTT)],Precedence.Unary,precedence)}return parenthesize([this.generateExpression(expr.argument,Precedence.Postfix,E_TTT),expr.operator],Precedence.Postfix,precedence)},FunctionExpression:function(expr,precedence,flags){var result=[generateAsyncPrefix(expr,true),"function"];if(expr.id){result.push(generateStarSuffix(expr)||noEmptySpace());result.push(generateIdentifier(expr.id))}else{result.push(generateStarSuffix(expr)||space)}result.push(this.generateFunctionBody(expr));return result},ExportBatchSpecifier:function(expr,precedence,flags){return"*"},ArrayPattern:function(expr,precedence,flags){return this.ArrayExpression(expr,precedence,flags)},ArrayExpression:function(expr,precedence,flags){var result,multiline,that=this;if(!expr.elements.length){return"[]"}multiline=expr.elements.length>1;result=["[",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.elements.length;i<iz;++i){if(!expr.elements[i]){if(multiline){result.push(indent)}if(i+1===iz){result.push(",")}}else{result.push(multiline?indent:"");result.push(that.generateExpression(expr.elements[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("]");return result},ClassExpression:function(expr,precedence,flags){var result,fragment;result=["class"];if(expr.id){result=join(result,this.generateExpression(expr.id,Precedence.Sequence,E_TTT))}if(expr.superClass){fragment=join("extends",this.generateExpression(expr.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(expr.body,S_TFFT));return result},MethodDefinition:function(expr,precedence,flags){var result,fragment;if(expr["static"]){result=["static"+space]}else{result=[]}if(expr.kind==="get"||expr.kind==="set"){fragment=[join(expr.kind,this.generatePropertyKey(expr.key,expr.computed)),this.generateFunctionBody(expr.value)]}else{fragment=[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}return join(result,fragment)},Property:function(expr,precedence,flags){if(expr.kind==="get"||expr.kind==="set"){return[expr.kind,noEmptySpace(),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}if(expr.shorthand){return this.generatePropertyKey(expr.key,expr.computed)}if(expr.method){return[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}return[this.generatePropertyKey(expr.key,expr.computed),":"+space,this.generateExpression(expr.value,Precedence.Assignment,E_TTT)]},ObjectExpression:function(expr,precedence,flags){var multiline,result,fragment,that=this;if(!expr.properties.length){return"{}"}multiline=expr.properties.length>1;withIndent(function(){fragment=that.generateExpression(expr.properties[0],Precedence.Sequence,E_TTT)});if(!multiline){if(!hasLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){return["{",space,fragment,space,"}"]}}withIndent(function(indent){var i,iz;result=["{",newline,indent,fragment];if(multiline){result.push(","+newline);for(i=1,iz=expr.properties.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ObjectPattern:function(expr,precedence,flags){var result,i,iz,multiline,property,that=this;if(!expr.properties.length){return"{}"}multiline=false;if(expr.properties.length===1){property=expr.properties[0];if(property.value.type!==Syntax.Identifier){multiline=true}}else{for(i=0,iz=expr.properties.length;i<iz;++i){property=expr.properties[i];if(!property.shorthand){multiline=true;break}}}result=["{",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.properties.length;i<iz;++i){result.push(multiline?indent:"");result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("}");return result},ThisExpression:function(expr,precedence,flags){return"this"},Identifier:function(expr,precedence,flags){return generateIdentifier(expr)},ImportDefaultSpecifier:function(expr,precedence,flags){return generateIdentifier(expr.id)},ImportNamespaceSpecifier:function(expr,precedence,flags){var result=["*"];if(expr.id){result.push(space+"as"+noEmptySpace()+generateIdentifier(expr.id))}return result},ImportSpecifier:function(expr,precedence,flags){return this.ExportSpecifier(expr,precedence,flags)},ExportSpecifier:function(expr,precedence,flags){var result=[expr.id.name];if(expr.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(expr.name))}return result},Literal:function(expr,precedence,flags){var raw;if(expr.hasOwnProperty("raw")&&parse&&extra.raw){try{raw=parse(expr.raw).body[0].expression;if(raw.type===Syntax.Literal){if(raw.value===expr.value){return expr.raw}}}catch(e){}}if(expr.value===null){return"null"}if(typeof expr.value==="string"){return escapeString(expr.value)}if(typeof expr.value==="number"){return generateNumber(expr.value)}if(typeof expr.value==="boolean"){return expr.value?"true":"false"}return generateRegExp(expr.value)},GeneratorExpression:function(expr,precedence,flags){return this.ComprehensionExpression(expr,precedence,flags)},ComprehensionExpression:function(expr,precedence,flags){var result,i,iz,fragment,that=this;result=expr.type===Syntax.GeneratorExpression?["("]:["["];if(extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result.push(fragment)}if(expr.blocks){withIndent(function(){for(i=0,iz=expr.blocks.length;i<iz;++i){fragment=that.generateExpression(expr.blocks[i],Precedence.Sequence,E_TTT);if(i>0||extra.moz.comprehensionExpressionStartsWithAssignment){result=join(result,fragment)}else{result.push(fragment)}}})}if(expr.filter){result=join(result,"if"+space);fragment=this.generateExpression(expr.filter,Precedence.Sequence,E_TTT);result=join(result,["(",fragment,")"])}if(!extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result=join(result,fragment)}result.push(expr.type===Syntax.GeneratorExpression?")":"]");return result},ComprehensionBlock:function(expr,precedence,flags){var fragment;if(expr.left.type===Syntax.VariableDeclaration){fragment=[expr.left.kind,noEmptySpace(),this.generateStatement(expr.left.declarations[0],S_FFFF)]}else{fragment=this.generateExpression(expr.left,Precedence.Call,E_TTT)}fragment=join(fragment,expr.of?"of":"in");fragment=join(fragment,this.generateExpression(expr.right,Precedence.Sequence,E_TTT));return["for"+space+"(",fragment,")"]},SpreadElement:function(expr,precedence,flags){return["...",this.generateExpression(expr.argument,Precedence.Assignment,E_TTT)]},TaggedTemplateExpression:function(expr,precedence,flags){var itemFlags=E_TTF;if(!(flags&F_ALLOW_CALL)){itemFlags=E_TFF}var result=[this.generateExpression(expr.tag,Precedence.Call,itemFlags),this.generateExpression(expr.quasi,Precedence.Primary,E_FFT)];return parenthesize(result,Precedence.TaggedTemplate,precedence)},TemplateElement:function(expr,precedence,flags){return expr.value.raw},TemplateLiteral:function(expr,precedence,flags){var result,i,iz;result=["`"];for(i=0,iz=expr.quasis.length;i<iz;++i){result.push(this.generateExpression(expr.quasis[i],Precedence.Primary,E_TTT));if(i+1<iz){result.push("${"+space);result.push(this.generateExpression(expr.expressions[i],Precedence.Sequence,E_TTT));result.push(space+"}")}}result.push("`");return result},ModuleSpecifier:function(expr,precedence,flags){return this.Literal(expr,precedence,flags)}};merge(CodeGenerator.prototype,CodeGenerator.Expression);CodeGenerator.prototype.generateExpression=function(expr,precedence,flags){var result,type;type=expr.type||Syntax.Property;if(extra.verbatim&&expr.hasOwnProperty(extra.verbatim)){return generateVerbatim(expr,precedence)}result=this[type](expr,precedence,flags);if(extra.comment){result=addComments(expr,result)}return toSourceNodeWhenNeeded(result,expr)};CodeGenerator.prototype.generateStatement=function(stmt,flags){var result,fragment;result=this[stmt.type](stmt,flags);if(extra.comment){result=addComments(stmt,result)}fragment=toSourceNodeWhenNeeded(result).toString();if(stmt.type===Syntax.Program&&!safeConcatenation&&newline===""&&fragment.charAt(fragment.length-1)==="\n"){result=sourceMap?toSourceNodeWhenNeeded(result).replaceRight(/\s+$/,""):fragment.replace(/\s+$/,"")}return toSourceNodeWhenNeeded(result,stmt)};function generateInternal(node){var codegen;codegen=new CodeGenerator;if(isStatement(node)){return codegen.generateStatement(node,S_TFFF)}if(isExpression(node)){return codegen.generateExpression(node,Precedence.Sequence,E_TTT)}throw new Error("Unknown node type: "+node.type)}function generate(node,options){var defaultOptions=getDefaultOptions(),result,pair;if(options!=null){if(typeof options.indent==="string"){defaultOptions.format.indent.style=options.indent}if(typeof options.base==="number"){defaultOptions.format.indent.base=options.base}options=updateDeeply(defaultOptions,options);indent=options.format.indent.style;if(typeof options.base==="string"){base=options.base}else{base=stringRepeat(indent,options.format.indent.base)}}else{options=defaultOptions;indent=options.format.indent.style;base=stringRepeat(indent,options.format.indent.base)}json=options.format.json;renumber=options.format.renumber;hexadecimal=json?false:options.format.hexadecimal;quotes=json?"double":options.format.quotes;escapeless=options.format.escapeless;newline=options.format.newline;space=options.format.space;if(options.format.compact){newline=space=indent=base=""}parentheses=options.format.parentheses;semicolons=options.format.semicolons;safeConcatenation=options.format.safeConcatenation;directive=options.directive;parse=json?null:options.parse;sourceMap=options.sourceMap;sourceCode=options.sourceCode;preserveBlankLines=options.format.preserveBlankLines&&sourceCode!==null;extra=options;if(sourceMap){if(!exports.browser){SourceNode=require("source-map").SourceNode}else{SourceNode=global.sourceMap.SourceNode}}result=generateInternal(node);if(!sourceMap){pair={code:result.toString(),map:null};return options.sourceMapWithCode?pair:pair.code}pair=result.toStringWithSourceMap({file:options.file,sourceRoot:options.sourceMapRoot});if(options.sourceContent){pair.map.setSourceContent(options.sourceMap,options.sourceContent)}if(options.sourceMapWithCode){return pair}return pair.map.toString()}FORMAT_MINIFY={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};FORMAT_DEFAULTS=getDefaultOptions().format;exports.version=require("./package.json").version;exports.generate=generate;exports.attachComments=estraverse.attachComments;exports.Precedence=updateDeeply({},Precedence);exports.browser=false;exports.FORMAT_MINIFY=FORMAT_MINIFY;exports.FORMAT_DEFAULTS=FORMAT_DEFAULTS})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":32,estraverse:81,esutils:85,"source-map":22}],22:[function(require,module,exports){exports.SourceMapGenerator=require("./source-map/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./source-map/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":28,"./source-map/source-map-generator":29,"./source-map/source-node":30}],23:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function ArraySet(){this._array=[];this._set={}}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var isDuplicate=this.has(aStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[util.toSetString(aStr)]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){return Object.prototype.hasOwnProperty.call(this._set,util.toSetString(aStr))};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(this.has(aStr)){return this._set[util.toSetString(aStr)]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet})},{"./util":31,amdefine:1}],24:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aOutParam){var i=0;var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(i>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charAt(i++));continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aStr.slice(i)}})},{"./base64":25,amdefine:1}],25:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var charToIntMap={};var intToCharMap={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(ch,index){charToIntMap[ch]=index;intToCharMap[index]=ch});exports.encode=function base64_encode(aNumber){if(aNumber in intToCharMap){return intToCharMap[aNumber]}throw new TypeError("Must be between 0 and 63: "+aNumber)};exports.decode=function base64_decode(aChar){if(aChar in charToIntMap){return charToIntMap[aChar]}throw new TypeError("Not a valid base 64 digit: "+aChar)}})},{amdefine:1}],26:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare)}return mid}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare)}return aLow<0?-1:aLow}}exports.search=function search(aNeedle,aHaystack,aCompare){if(aHaystack.length===0){return-1}return recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare)}})},{amdefine:1}],27:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositions(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){var mapping;if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositions);this._sorted=true}return this._array};exports.MappingList=MappingList})},{"./util":31,amdefine:1}],28:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}sources=sources.map(util.normalize);this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}SourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(SourceMapConsumer.prototype);smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;smc.__generatedMappings=aSourceMap._mappings.toArray().slice();smc.__originalMappings=aSourceMap._mappings.toArray().slice().sort(util.compareByOriginalPositions);return smc};SourceMapConsumer.prototype._version=3;Object.defineProperty(SourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot!=null?util.join(this.sourceRoot,s):s},this)}});SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._nextCharIsMappingSeparator=function SourceMapConsumer_nextCharIsMappingSeparator(aStr){var c=aStr.charAt(0);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var str=aStr;var temp={};var mapping;while(str.length>0){if(str.charAt(0)===";"){generatedLine++;str=str.slice(1);previousGeneratedColumn=0}else if(str.charAt(0)===","){str=str.slice(1)}else{mapping={};mapping.generatedLine=generatedLine;base64VLQ.decode(str,temp);mapping.generatedColumn=previousGeneratedColumn+temp.value;previousGeneratedColumn=mapping.generatedColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.source=this._sources.at(previousSource+temp.value);
previousSource+=temp.value;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source, but no line and column")}base64VLQ.decode(str,temp);mapping.originalLine=previousOriginalLine+temp.value;previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source and line, but no column")}base64VLQ.decode(str,temp);mapping.originalColumn=previousOriginalColumn+temp.value;previousOriginalColumn=mapping.originalColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.name=this._names.at(previousName+temp.value);previousName+=temp.value;str=temp.rest}}this.__generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){this.__originalMappings.push(mapping)}}}this.__generatedMappings.sort(util.compareByGeneratedPositions);this.__originalMappings.sort(util.compareByOriginalPositions)};SourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator)};SourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};SourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositions);if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!=null&&this.sourceRoot!=null){source=util.join(this.sourceRoot,source)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:util.getArg(mapping,"name",null)}}}return{source:null,line:null,column:null,name:null}};SourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}throw new Error('"'+aSource+'" is not in the SourceMap.')};SourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];while(mapping&&mapping.originalLine===needle.originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[--index]}}return mappings.reverse()};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source;if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name}}).forEach(aCallback,context)};exports.SourceMapConsumer=SourceMapConsumer})},{"./array-set":23,"./base64-vlq":24,"./binary-search":26,"./util":31,amdefine:1}],29:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null&&!this._sources.has(source)){this._sources.add(source)}if(name!=null&&!this._names.has(name)){this._names.add(name)}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){result+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositions(mapping,mappings[i-1])){continue}result+=","}}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){result+=base64VLQ.encode(this._sources.indexOf(mapping.source)-previousSource);previousSource=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){result+=base64VLQ.encode(this._names.indexOf(mapping.name)-previousName);previousName=this._names.indexOf(mapping.name)}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this)};exports.SourceMapGenerator=SourceMapGenerator})},{"./array-set":23,"./base64-vlq":24,"./mapping-list":27,"./util":31,amdefine:1}],30:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){var code="";addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode})},{"./source-map-generator":29,"./util":31,amdefine:1}],31:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=path.charAt(0)==="/";var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var url=urlParse(aRoot);if(aPath.charAt(0)=="/"&&url&&url.path=="/"){return aPath.slice(1)}return aPath.indexOf(aRoot+"/")===0?aPath.substr(aRoot.length+1):aPath}exports.relative=relative;function toSetString(aStr){return"$"+aStr}exports.toSetString=toSetString;function fromSetString(aStr){return aStr.substr(1)}exports.fromSetString=fromSetString;function strcmp(aStr1,aStr2){var s1=aStr1||"";var s2=aStr2||"";return(s1>s2)-(s1<s2)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp;cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp||onlyCompareOriginal){return cmp}cmp=strcmp(mappingA.name,mappingB.name);if(cmp){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}return mappingA.generatedColumn-mappingB.generatedColumn}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositions(mappingA,mappingB,onlyCompareGenerated){var cmp;cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositions=compareByGeneratedPositions})},{amdefine:1}],32:[function(require,module,exports){module.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.6.1",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^1.1.6",esprima:"^1.2.2",optionator:"^0.5.0","source-map":"~0.1.40"},optionalDependencies:{"source-map":"~0.1.40"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"*",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/escodegen/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js"},gitHead:"1ca664f68dcf220b76c9dc562b2337c5e0b4227d",bugs:{url:"https://github.com/estools/escodegen/issues"},_id:"escodegen@1.6.1",_shasum:"367de17d8510540d12bc6dcb8b3f918391265815",_from:"escodegen@>=1.4.1 <2.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"367de17d8510540d12bc6dcb8b3f918391265815",tarball:"http://registry.npmjs.org/escodegen/-/escodegen-1.6.1.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.6.1.tgz"}},{}],33:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="annotate-directive";common=require("./common");Syntax=common.Syntax;function isDirective(stmt){var expr;if(stmt.type===Syntax.ExpressionStatement){expr=stmt.expression;if(expr.type===Syntax.Literal&&typeof expr.value==="string"){return true}}return false}function escapeAllowedCharacter(ch,next){var code=ch.charCodeAt(0),hex=code.toString(16),result="\\";switch(ch){case"\b":result+="b";break;case"\f":result+="f";break;case"	":result+="t";break;default:if(code>255){result+="u"+"0000".slice(hex.length)+hex}else if(ch==="\x00"&&"0123456789".indexOf(next)<0){result+="0"}else if(ch===""){result+="v"}else{result+="x"+"00".slice(hex.length)+hex}break}return result}function escapeDisallowedCharacter(ch){var result="\\";switch(ch){case"\\":result+="\\";break;case"\n":result+="n";break;case"\r":result+="r";break;case"\u2028":result+="u2028";break;case"\u2029":result+="u2029";break;default:throw new Error("Incorrectly classified character")}return result}function escapeString(str){var result="",i,len,ch;if(typeof str[0]==="undefined"){str=common.stringToArray(str)}for(i=0,len=str.length;i<len;i+=1){ch=str[i];if(ch==="'"){result+="\\'";continue}else if("\\\n\r\u2028\u2029".indexOf(ch)>=0){result+=escapeDisallowedCharacter(ch);continue}else if(!(ch>=" "&&ch<="~")){result+=escapeAllowedCharacter(ch,str[i+1]);continue}result+=ch}return result}function annotateDirective(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node,parent){var stmt,i,iz;if(!(node.type===Syntax.Program||node.type===Syntax.BlockStatement&&(parent.type===Syntax.FunctionExpression||parent.type===Syntax.FunctionDeclaration))){return}for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(isDirective(stmt)){stmt.type=Syntax.DirectiveStatement;if(stmt.expression.raw){stmt.directive=stmt.expression.raw.substring(1,stmt.expression.raw.length-1);stmt.value=stmt.expression.value;stmt.raw=stmt.expression.raw}else{stmt.directive=escapeString(stmt.expression.value);stmt.value=stmt.expression.value;stmt.raw="'"+stmt.directive+"'"}delete stmt.expression}else{return}}}});return result}annotateDirective.passName=Name;module.exports=annotateDirective})()},{"./common":34}],34:[function(require,module,exports){(function(){"use strict";var Syntax,isArray,arrayFrom,arrayOf,has,sameValue,estraverse,escope,esutils;estraverse=require("estraverse");escope=require("escope");esutils=require("esutils");Syntax=estraverse.Syntax;isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function isObject(obj){return typeof obj==="object"&&obj!==null}has=function(){var method={}.hasOwnProperty;return function has(obj,prop){return method.call(obj,prop)}}();arrayFrom=function(){var slice=Array.prototype.slice;return function arrayFrom(array){return slice.call(array)}}();arrayOf=function(){var slice=Array.prototype.slice;return function arrayOf(){return slice.call(arguments)}}();function arrayLast(array){return array[array.length-1]}function arrayEmpty(array){return array.length===0}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}if(Object.is){sameValue=Object.is}else{sameValue=function sameValue(x,y){if(x===y){return x!==0||1/x===1/y}return x!==x&&y!==y}}function deepCopy(obj){function deepCopyInternal(obj,result){var key,val;for(key in obj){if(key.lastIndexOf("__",0)===0){continue}if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){if(val instanceof RegExp){val=new RegExp(val)}else{val=deepCopyInternal(val,isArray(val)?[]:{})}}result[key]=val}}return result}return deepCopyInternal(obj,isArray(obj)?[]:{})}function assert(cond,text){if(!cond){throw new Error(text)}}function unreachable(){throw new Error("Unreachable point. logically broken.")}function isIdentifier(name){if(esutils.keyword.isKeywordES5(name,true)||esutils.keyword.isRestrictedWord(name)){return false}return esutils.keyword.isIdentifierName(name)}function mayBeCompletionValue(node,ancestors){var i,ancestor;if(node.type!==Syntax.ExpressionStatement){return true}for(i=ancestors.length-1;i>=0;--i,node=ancestor){ancestor=ancestors[i];switch(ancestor.type){case Syntax.FunctionExpression:case Syntax.FunctionDeclaration:return false;case Syntax.BlockStatement:case Syntax.Program:if(arrayLast(ancestor.body)!==node){return false}break;case Syntax.SwitchCase:if(arrayLast(ancestor.consequent)!==node){return false}break}}return true}function moveLocation(from,to){if(from.loc==null){return to}to.loc=deepCopy(from.loc);return to}function deleteLocation(node){if(node.hasOwnProperty("loc")){return delete node.loc}return false}function convertToEmptyStatement(node){var i,iz,keys;keys=estraverse.VisitorKeys[node.type];for(i=0,iz=keys.length;i<iz;++i){delete node[keys[i]]}node.type=Syntax.EmptyStatement;return node}function isNegative(value){return value===value&&(value<0||value===0&&1/value<0)}function isFunctionBody(node,parent){return node.type===Syntax.BlockStatement&&(parent.type===Syntax.FunctionDeclaration||parent.type===Syntax.FunctionExpression)}function isNumberLiteral(node){return node.type===Syntax.Literal&&typeof node.value==="number"}function isOptimizedArgument(argument){return isNumberLiteral(argument)&&String(argument.value).length===1}function generateNegativeNode(value,node){var result;result={type:Syntax.UnaryExpression,operator:"-",argument:{type:Syntax.Literal,value:-value}};return node?moveLocation(node,result):result}function isNegativeNode(node){return node.type===Syntax.UnaryExpression&&node.operator==="-"&&isNumberLiteral(node.argument)}function generateUndefined(node){var result={type:Syntax.UnaryExpression,operator:"void",argument:{type:Syntax.Literal,value:0}};return node?moveLocation(node,result):result}function isUndefined(node){return node.type===Syntax.UnaryExpression&&node.operator==="void"&&isOptimizedArgument(node.argument)}function generateNaN(node){var result={type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:0},right:{type:Syntax.Literal,value:0}};return node?moveLocation(node,result):result}function isNaNNode(node){if(node.type===Syntax.BinaryExpression){if(isOptimizedArgument(node.left)&&isOptimizedArgument(node.right)){return node.left.value===0&&node.right.value===0}}return false}function generateFromValue(value){if(typeof value==="number"){if(isNaN(value)){return generateNaN()
}if(isNegative(value)){return generateNegativeNode(value)}}if(value===undefined){return generateUndefined()}return{type:Syntax.Literal,value:value}}function isReference(node){var type=node.type;return type===Syntax.Identifier||type===Syntax.MemberExpression}function canExtractSequence(last,parent,scope){var ref;if(parent.type===Syntax.CallExpression){if(last.type===Syntax.Identifier){if(last.name==="eval"){return false}ref=scope.resolve(last);return ref&&ref.isStatic()}return last.type!==Syntax.MemberExpression}else if(parent.type===Syntax.UnaryExpression){if(parent.operator==="delete"){return!isReference(last)}else if(parent.operator==="typeof"){if(last.type===Syntax.Identifier){ref=scope.resolve(last);return ref&&ref.isStatic()}}}else if(parent.type===Syntax.UpdateExpression){return!isReference(last)}return true}function delegateVariableDeclarations(stmt,func){var decls,target;decls=[];estraverse.traverse(stmt,{enter:function(node){var i,iz,decl;if(node.type===Syntax.VariableDeclaration){if(node.kind==="let"||node.kind==="const"){return}for(i=0,iz=node.declarations.length;i<iz;++i){decl=node.declarations[i];delete decl.init;decls.push(decl)}return estraverse.VisitorOption.Skip}else if(escope.Scope.isVariableScopeRequired(node)){return estraverse.VisitorOption.Skip}}});if(!decls.length){return null}target=null;estraverse.traverse(func.body,{enter:function(node,parent){if(node===stmt){return estraverse.VisitorOption.Skip}else if(escope.Scope.isVariableScopeRequired(node)){return estraverse.VisitorOption.Skip}else if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){if(parent.type!==Syntax.ForInStatement){target=node;return estraverse.VisitorOption.Break}}}});if(target){target.declarations=target.declarations.concat(decls);return null}else{return{type:Syntax.VariableDeclaration,kind:"var",declarations:decls}}}function isScopedDeclaration(node){if(node.type===Syntax.VariableDeclaration&&(node.kind==="let"||node.kind==="const")){return true}else if(node.type===Syntax.FunctionDeclaration){return true}return false}exports.deepCopy=deepCopy;exports.stringRepeat=stringRepeat;exports.sameValue=sameValue;exports.Array={isArray:isArray,from:arrayFrom,of:arrayOf,last:arrayLast,empty:arrayEmpty};exports.Object={isObject:isObject,has:has};exports.Syntax=Syntax;exports.traverse=estraverse.traverse;exports.replace=estraverse.replace;exports.VisitorKeys=estraverse.VisitorKeys;exports.VisitorOption=estraverse.VisitorOption;exports.assert=assert;exports.unreachable=unreachable;exports.isIdentifier=isIdentifier;exports.moveLocation=moveLocation;exports.deleteLocation=deleteLocation;exports.convertToEmptyStatement=convertToEmptyStatement;exports.mayBeCompletionValue=mayBeCompletionValue;exports.isNegative=isNegative;exports.isFunctionBody=isFunctionBody;exports.SpecialNode={generateNegative:generateNegativeNode,isNegative:isNegativeNode,generateUndefined:generateUndefined,isUndefined:isUndefined,generateNaN:generateNaN,isNaN:isNaNNode,isReference:isReference,canExtractSequence:canExtractSequence,generateFromValue:generateFromValue};exports.delegateVariableDeclarations=delegateVariableDeclarations;exports.isScopedDeclaration=isScopedDeclaration})()},{escope:70,estraverse:75,esutils:78}],35:[function(require,module,exports){(function(){"use strict";var esshorten,common,Options,Syntax,Pass,annotateDirective;esshorten=require("esshorten");common=require("./common");Options=require("./options");Pass=require("./pass");annotateDirective=require("./annotate-directive");Syntax=common.Syntax;function recover(tree,useDirectiveStatement){function trailingIf(node){while(true){switch(node.type){case Syntax.IfStatement:if(!node.alternate){return true}node=node.alternate;continue;case Syntax.LabeledStatement:case Syntax.ForStatement:case Syntax.ForInStatement:case Syntax.WhileStatement:case Syntax.WithStatement:node=node.body;continue}return false}}common.traverse(tree,{leave:function leave(node){if(node.type===Syntax.IfStatement&&node.alternate){if(node.consequent.type!==Syntax.BlockStatement){if(trailingIf(node.consequent)){node.consequent={type:Syntax.BlockStatement,body:[node.consequent]}}}}if(!useDirectiveStatement&&node.type===Syntax.DirectiveStatement){node.type=Syntax.ExpressionStatement;node.expression=common.moveLocation(node,{type:Syntax.Literal,value:node.value,raw:node.raw});delete node.directive;delete node.value;delete node.raw}}});return tree}function iteration(tree,p,options){var i,iz,pass,res,changed,statuses,passes,result;function addPass(pass){var name;if(typeof pass!=="function"){name=Object.keys(pass)[0];pass=pass[name]}if(pass.hasOwnProperty("passName")){name=pass.passName}else{name=pass.name}passes.push(pass);statuses.push(true)}function fillStatuses(bool){var i,iz;for(i=0,iz=statuses.length;i<iz;++i){statuses[i]=bool}}result=options.get("destructive")?tree:common.deepCopy(tree);statuses=[];passes=[];for(i=0,iz=p.length;i<iz;++i){addPass(p[i])}do{changed=false;for(i=0,iz=passes.length;i<iz;++i){pass=passes[i];if(statuses[i]){res=pass(result,options);if(res.modified){changed=true;fillStatuses(true)}else{statuses[i]=false}result=res.result}}}while(changed);return result}function optimize(tree,pipeline,options){var i,iz,j,jz,section,pass;tree=annotateDirective(tree,new Options({destructive:false}));if(null==pipeline){pipeline=Pass.__defaultPipeline}options=new Options(options);for(i=0,iz=pipeline.length;i<iz;++i){section=pipeline[i];if(common.Array.isArray(section)){tree=iteration(tree,section,options)}else if(section.once){pass=section.pass;for(j=0,jz=pass.length;j<jz;++j){tree=pass[j](tree,options).result}}}return recover(tree,options.get("directive"))}exports.version=require("../package.json").version;exports.mangle=esshorten.mangle;exports.optimize=optimize;exports.pass=Pass})()},{"../package.json":79,"./annotate-directive":33,"./common":34,"./options":38,"./pass":39,esshorten:71}],36:[function(require,module,exports){(function(){"use strict";var Syntax,common;common=require("./common");Syntax=common.Syntax;function isConstant(node,allowRegExp){if(node.type===Syntax.Literal){if(typeof node.value==="object"&&node.value!==null){return allowRegExp}return true}if(node.type===Syntax.UnaryExpression){if(node.operator==="void"||node.operator==="delete"||node.operator==="!"){return isConstant(node.argument,true)}return isConstant(node.argument,false)}if(node.type===Syntax.BinaryExpression){if(node.operator==="in"||node.operator==="instanceof"){return false}return isConstant(node.left,false)&&isConstant(node.right,false)}if(node.type===Syntax.LogicalExpression){return isConstant(node.left,true)&&isConstant(node.right,true)}return false}function getConstant(node){if(node.type===Syntax.Literal){return node.value}if(node.type===Syntax.UnaryExpression){return doUnary(node.operator,getConstant(node.argument))}if(node.type===Syntax.BinaryExpression){return doBinary(node.operator,getConstant(node.left),getConstant(node.right))}if(node.type===Syntax.LogicalExpression){return doLogical(node.operator,getConstant(node.left),getConstant(node.right))}common.unreachable()}function doLogical(operator,left,right){if(operator==="||"){return left||right}if(operator==="&&"){return left&&right}common.unreachable()}function doUnary(operator,argument){switch(operator){case"+":return+argument;case"-":return-argument;case"~":return~argument;case"!":return!argument;case"delete":return true;case"void":return undefined;case"typeof":return typeof argument}common.unreachable()}function doBinary(operator,left,right){switch(operator){case"|":return left|right;case"^":return left^right;case"&":return left&right;case"==":return left==right;case"!=":return left!=right;case"===":return left===right;case"!==":return left!==right;case"<":return left<right;case">":return left>right;case"<=":return left<=right;case">=":return left>=right;case"<<":return left<<right;case">>":return left>>right;case">>>":return left>>>right;case"+":return left+right;case"-":return left-right;case"*":return left*right;case"/":return left/right;case"%":return left%right}common.unreachable()}exports.constant={doBinary:doBinary,doUnary:doUnary,doLogical:doLogical,evaluate:getConstant,isConstant:isConstant};function hasSideEffect(expr,scope){function visit(expr){var i,iz,ref;switch(expr.type){case Syntax.AssignmentExpression:return true;case Syntax.ArrayExpression:for(i=0,iz=expr.elements.length;i<iz;++i){if(expr.elements[i]!==null&&visit(expr.elements[i])){return true}}return false;case Syntax.BinaryExpression:return!isConstant(expr);case Syntax.CallExpression:return true;case Syntax.ConditionalExpression:return visit(expr.test)||visit(expr.consequent)||visit(expr.alternate);case Syntax.FunctionExpression:return false;case Syntax.Identifier:ref=scope.resolve(expr);if(ref&&ref.isStatic()){return false}return true;case Syntax.Literal:return false;case Syntax.LogicalExpression:return visit(expr.left)||visit(expr.right);case Syntax.MemberExpression:return true;case Syntax.NewExpression:return true;case Syntax.ObjectExpression:for(i=0,iz=expr.properties.length;i<iz;++i){if(visit(expr.properties[i])){return true}}return false;case Syntax.Property:return visit(expr.value);case Syntax.SequenceExpression:for(i=0,iz=expr.expressions.length;i<iz;++i){if(visit(expr.expressions[i])){return true}}return false;case Syntax.ThisExpression:return false;case Syntax.UnaryExpression:if(expr.operator==="void"||expr.operator==="delete"||expr.operator==="typeof"||expr.operator==="!"){return visit(expr.argument)}return!isConstant(expr);case Syntax.UpdateExpression:return true}return true}return visit(expr)}exports.hasSideEffect=hasSideEffect;function booleanCondition(expr){var ret;switch(expr.type){case Syntax.AssignmentExpression:return booleanCondition(expr.right);case Syntax.ArrayExpression:return true;case Syntax.BinaryExpression:if(isConstant(expr)){return!!getConstant(expr)}return null;case Syntax.CallExpression:return null;case Syntax.ConditionalExpression:ret=booleanCondition(expr.test);if(ret===true){return booleanCondition(expr.consequent)}if(ret===false){return booleanCondition(expr.alternate)}ret=booleanCondition(expr.consequent);if(ret===booleanCondition(expr.alternate)){return ret}return null;case Syntax.FunctionExpression:return true;case Syntax.Identifier:return null;case Syntax.Literal:return!!getConstant(expr);case Syntax.LogicalExpression:if(expr.operator==="&&"){ret=booleanCondition(expr.left);if(ret===null){return null}if(!ret){return false}return booleanCondition(expr.right)}else{ret=booleanCondition(expr.left);if(ret===null){return null}if(ret){return true}return booleanCondition(expr.right)}return null;case Syntax.MemberExpression:return null;case Syntax.NewExpression:return true;case Syntax.ObjectExpression:return true;case Syntax.Property:common.unreachable();return null;case Syntax.SequenceExpression:return booleanCondition(common.Array.last(expr.expressions));case Syntax.ThisExpression:return null;case Syntax.UnaryExpression:if(expr.operator==="void"){return false}if(expr.operator==="typeof"){return true}if(expr.operator==="!"){ret=booleanCondition(expr.argument);if(ret===null){return null}return!ret}if(isConstant(expr)){return!!getConstant(expr)}return null;case Syntax.UpdateExpression:return null}return null}exports.booleanCondition=booleanCondition})()},{"./common":34}],37:[function(require,module,exports){(function(global){(function(){"use strict";var Map;if(typeof global.Map!=="undefined"){Map=global.Map}else{Map=function Map(){this.__data={}};Map.prototype.get=function MapGet(key){key="$"+key;if(this.__data.hasOwnProperty(key)){return this.__data[key]}};Map.prototype.has=function MapHas(key){key="$"+key;return this.__data.hasOwnProperty(key)};Map.prototype.set=function MapSet(key,val){key="$"+key;this.__data[key]=val};Map.prototype["delete"]=function MapDelete(key){key="$"+key;return delete this.__data[key]};Map.prototype.clear=function MapClear(){this.__data={}};Map.prototype.forEach=function MapForEach(callback,thisArg){var real,key;for(real in this.__data){if(this.__data.hasOwnProperty(real)){key=real.substring(1);callback.call(thisArg,this.__data[real],key,this)}}};Map.prototype.keys=function MapKeys(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push(real.substring(1))}}return result};Map.prototype.values=function MapValues(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push(this.__data[real])}}return result};Map.prototype.items=function MapItems(){var real,result;result=[];for(real in this.__data){if(this.__data.hasOwnProperty(real)){result.push([real.substring(1),this.__data[real]])}}return result}}module.exports=Map})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],38:[function(require,module,exports){(function(){"use strict";var common;common=require("./common");function extend(result,update){var prop,lhs,rhs;for(prop in update){if(!common.Object.has(update,prop)){continue}if(prop in result){lhs=result[prop];rhs=update[prop];if(common.Object.isObject(rhs)&&common.Object.isObject(lhs)){result[prop]=extend(lhs,rhs)}else{result[prop]=update[prop]}}else{result[prop]=update[prop]}}return result}function Options(override){var defaults={destructive:true,preserveCompletionValue:false};if(override==null){this.data=defaults;return}this.data=extend(defaults,override)}Options.prototype.get=function get(name,details){var local;if(details!=null){if(common.Object.has(details,"pathName")){local=this.data[details.pathName];if(local!=null&&common.Object.has(local,name)){return local[name]}}}return this.data[name]};module.exports=Options})()},{"./common":34}],39:[function(require,module,exports){(function(){"use strict";var query,Registry,pass,post,common;common=require("./common");query=require("./query");Registry={};Registry.__direct={};function initialize(kind,passes){var i,iz,pass;Registry[kind]={};for(i=0,iz=passes.length;i<iz;++i){pass=passes[i];common.assert(Registry[kind][pass.passName]==null,"don't create duplicate pass names");Registry[kind][pass.passName]=pass}common.assert(Registry.__direct[pass.passName]==null,"don't create duplicate pass names");Registry.__direct[pass.passName]=pass}pass=[require("./pass/hoist-variable-to-arguments"),require("./pass/transform-dynamic-to-static-property-access"),require("./pass/transform-dynamic-to-static-property-definition"),require("./pass/transform-immediate-function-call"),require("./pass/transform-logical-association"),require("./pass/reordering-function-declarations"),require("./pass/remove-unused-label"),require("./pass/remove-empty-statement"),require("./pass/remove-wasted-blocks"),require("./pass/transform-to-compound-assignment"),require("./pass/transform-to-sequence-expression"),require("./pass/transform-branch-to-expression"),require("./pass/transform-typeof-undefined"),require("./pass/reduce-sequence-expression"),require("./pass/reduce-branch-jump"),require("./pass/reduce-multiple-if-statements"),require("./pass/dead-code-elimination"),require("./pass/remove-side-effect-free-expressions"),require("./pass/remove-context-sensitive-expressions"),require("./pass/tree-based-constant-folding"),require("./pass/concatenate-variable-definition"),require("./pass/drop-variable-definition"),require("./pass/remove-unreachable-branch"),require("./pass/eliminate-duplicate-function-declarations")];post=[require("./post/transform-static-to-dynamic-property-access"),require("./post/transform-infinity"),require("./post/rewrite-boolean"),require("./post/rewrite-conditional-expression"),require("./post/omit-parens-in-void-context-iife")];initialize("pass",pass);initialize("post",post);function passRequire(name){if(common.Object.has(Registry.__direct,name)){return Registry.__direct[name]}return query.get(Registry,name.split("/"))}exports.require=passRequire;exports.Registry=Registry;exports.__defaultPipeline=[pass,{once:true,pass:post}]})()},{"./common":34,"./pass/concatenate-variable-definition":40,"./pass/dead-code-elimination":41,"./pass/drop-variable-definition":42,"./pass/eliminate-duplicate-function-declarations":43,"./pass/hoist-variable-to-arguments":44,"./pass/reduce-branch-jump":45,"./pass/reduce-multiple-if-statements":46,"./pass/reduce-sequence-expression":47,"./pass/remove-context-sensitive-expressions":48,"./pass/remove-empty-statement":49,"./pass/remove-side-effect-free-expressions":50,"./pass/remove-unreachable-branch":51,"./pass/remove-unused-label":52,"./pass/remove-wasted-blocks":53,"./pass/reordering-function-declarations":54,"./pass/transform-branch-to-expression":55,"./pass/transform-dynamic-to-static-property-access":56,"./pass/transform-dynamic-to-static-property-definition":57,"./pass/transform-immediate-function-call":58,"./pass/transform-logical-association":59,"./pass/transform-to-compound-assignment":60,"./pass/transform-to-sequence-expression":61,"./pass/transform-typeof-undefined":62,"./pass/tree-based-constant-folding":63,"./post/omit-parens-in-void-context-iife":64,"./post/rewrite-boolean":65,"./post/rewrite-conditional-expression":66,"./post/transform-infinity":67,"./post/transform-static-to-dynamic-property-access":68,"./query":69}],40:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="concatenate-variable-definition";common=require("../common");Syntax=common.Syntax;function concatenateVariableDefinition(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){var i,iz,j,jz,stmt,decl,target,body;if(node.type!==Syntax.BlockStatement&&node.type!==Syntax.Program){return}target=null;body=[];for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(stmt.type===Syntax.VariableDeclaration&&stmt.kind==="var"){if(!target){target=stmt;body.push(stmt);continue}modified=true;for(j=0,jz=stmt.declarations.length;j<jz;++j){decl=stmt.declarations[j];target.declarations.push(decl)}}else{target=null;body.push(stmt)}}node.body=body}});return{result:result,modified:modified}}concatenateVariableDefinition.passName=Name;module.exports=concatenateVariableDefinition})()},{"../common":34}],41:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,status,modified;Name="dead-code-elimination";common=require("../common");Syntax=common.Syntax;function JumpTarget(node,status,type){this.node=node;this.type=type;this.labels=status.labels||[];status.labels=null}JumpTarget.NAMED_ONLY=0;JumpTarget.ITERATION=2;JumpTarget.SWITCH=3;JumpTarget.prototype.isIteration=function isIteration(){return this.type===JumpTarget.ITERATION};JumpTarget.prototype.isAnonymous=function isAnonymous(){return this.type&2};JumpTarget.prototype.contains=function contains(label){return this.labels.indexOf(label)!==-1};function Jumps(){this.targets=[]}Jumps.prototype.lookupContinuableTarget=function lookupContinuableTarget(label){var i,target;for(i=this.targets.length-1;i>=0;--i){target=this.targets[i];if(target.isIteration()&&(!label||target.contains(label.name))){return target.node}}common.unreachable()};Jumps.prototype.lookupBreakableTarget=function lookupBreakableTarget(label){var i,target;for(i=this.targets.length-1;i>=0;--i){target=this.targets[i];if(label){if(target.contains(label.name)){return target.node}}else{if(target.isAnonymous()){return target.node}}}common.unreachable()};Jumps.prototype.push=function push(target){this.targets.push(target)};Jumps.prototype.pop=function pop(){this.targets.pop()};function Status(upper){this.current=[];this.upper=upper;this.jumps=new Jumps;this.labels=null;this.next()}Status.NEXT={};Status.prototype.insert=function insert(stmt){this.current.push(stmt)};Status.prototype.erase=function erase(stmt){var index=this.current.indexOf(stmt);if(index===-1){return false}this.current.splice(index,1);return true};Status.prototype.kill=function kill(){return this.erase(Status.NEXT)};Status.prototype.has=function has(stmt){return this.current.indexOf(stmt)!==-1};Status.prototype.jumpTo=function jumpTo(stmt){this.kill();this.insert(stmt)};Status.prototype.resolveJump=function resolveJump(stmt){var index=this.current.indexOf(stmt);if(index!==-1){this.current.splice(index,1);this.insert(Status.NEXT)}};Status.prototype.clear=function clear(){this.current.length=0};Status.prototype.next=function next(){this.insert(Status.NEXT)};Status.prototype.isDead=function isDead(){return!this.has(Status.NEXT)};Status.prototype.revive=function revive(){if(this.isDead()){this.next();return true}return false};Status.prototype.register=function register(node){if(!this.labels){this.labels=[]}this.labels.push(node.label.name)};Status.prototype.unregister=function unregister(){this.labels=null};Status.isRequired=function isRequired(node){var type=node.type;common.assert(node,"should be node");return type===Syntax.Program||type===Syntax.FunctionExpression||type===Syntax.FunctionDeclaration};function Context(node){node.__$context=this;this.node=node}Context.prototype.detach=function detach(){delete this.node.__$context};Context.lookup=function lookup(node){return node.__$context};function getForwardLastNode(node){while(true){switch(node.type){case Syntax.IfStatement:if(node.alternate){return null}node=node.consequent;continue;case Syntax.WithStatement:case Syntax.LabeledStatement:node=node.body;continue;case Syntax.BlockStatement:if(node.body.length){node=common.Array.last(node.body);continue}break}return node}}function visitLoopBody(loop,body){var jump,last;last=getForwardLastNode(body);if(last){if(last.type===Syntax.ContinueStatement){jump=status.jumps.lookupContinuableTarget(last.label);if(jump===loop){modified=true;common.convertToEmptyStatement(last)}}}return visit(body)}function visit(target){var live=false;if(!target){return!status.isDead()}function eliminate(node,array){var i,iz,stmt,ret,info,result;result=[];for(i=0,iz=array.length;i<iz;++i){stmt=array[i];if(stmt.type===Syntax.IfStatement){info=new Context(stmt);ret=visit(stmt);info.detach()}else{ret=visit(stmt)}if(ret){live|=1;result.push(stmt);if(stmt.type===Syntax.IfStatement&&stmt.alternate){if((!info.consequent||!info.alternate)&&info.consequent!==info.alternate){modified=true;if(info.consequent){stmt.test=common.moveLocation(stmt.test,{type:Syntax.UnaryExpression,operator:"!",argument:stmt.test});result.push(stmt.consequent);stmt.consequent=stmt.alternate;stmt.alternate=null}else{result.push(stmt.alternate);stmt.alternate=null}}}}else{modified=true}}return result}common.traverse(target,{enter:function enter(node){var i,iz,stmt,consequent,alternate,ctx,hasDefaultClause;if(Status.isRequired(node)){status=new Status(status)}live|=!status.isDead();switch(node.type){case Syntax.Program:node.body=eliminate(node,node.body);return common.VisitorOption.Skip;case Syntax.BlockStatement:status.jumps.push(new JumpTarget(node,status,JumpTarget.NAMED_ONLY));node.body=eliminate(node,node.body);status.jumps.pop();status.resolveJump(node);return common.VisitorOption.Skip;case Syntax.BreakStatement:if(node.label&&status.labels&&status.labels.indexOf(node.label)){modified=true;common.convertToEmptyStatement(node)}else{status.jumpTo(status.jumps.lookupBreakableTarget(node.label))}return common.VisitorOption.Skip;case Syntax.CatchClause:live|=visit(node.body);return common.VisitorOption.Skip;case Syntax.ContinueStatement:status.jumpTo(status.jumps.lookupContinuableTarget(node.label));return common.VisitorOption.Skip;case Syntax.DoWhileStatement:status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();live|=visit(node.test);status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.DebuggerStatement:return common.VisitorOption.Skip;case Syntax.EmptyStatement:return common.VisitorOption.Skip;case Syntax.ExpressionStatement:break;case Syntax.ForStatement:live|=visit(node.init);live|=visit(node.test);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();live|=visit(node.update);status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.ForInStatement:live|=visit(node.left);live|=visit(node.right);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.IfStatement:live|=visit(node.test);live|=visit(node.consequent);if(!node.alternate){status.revive();return common.VisitorOption.Skip}consequent=!status.isDead();if(!status.revive()){status.insert(node)}live|=visit(node.alternate);alternate=!status.isDead();if(status.erase(node)){status.revive()}if(ctx=Context.lookup(node)){ctx.consequent=consequent;ctx.alternate=alternate}return common.VisitorOption.Skip;case Syntax.LabeledStatement:status.register(node);break;case Syntax.ReturnStatement:live|=visit(node.argument);status.kill();return common.VisitorOption.Skip;case Syntax.SwitchStatement:visit(node.discriminant);status.jumps.push(new JumpTarget(node,status,JumpTarget.SWITCH));for(i=0,iz=node.cases.length;i<iz;++i){stmt=node.cases[i];live|=visit(stmt);if(!stmt.test){hasDefaultClause=true}if(status.isDead()&&i+1<iz){status.next()}}status.jumps.pop();status.resolveJump(node);if(status.isDead()&&!hasDefaultClause){status.next()}return common.VisitorOption.Skip;case Syntax.SwitchCase:if(node.test){live|=visit(node.test)}node.consequent=eliminate(node,node.consequent);return common.VisitorOption.Skip;case Syntax.ThrowStatement:live|=visit(node.argument);status.kill();return common.VisitorOption.Skip;case Syntax.TryStatement:live|=visit(node.block);if(node.handlers&&node.handlers.length){if(!status.revive()){status.insert(node)}node.handlers=eliminate(node,node.handlers);if(status.erase(node)){status.revive()}}if(node.finalizer){if(!status.revive()){status.insert(node)}live|=visit(node.finalizer);if(!status.erase(node)){status.kill()}}return common.VisitorOption.Skip;case Syntax.WhileStatement:live|=visit(node.test);status.jumps.push(new JumpTarget(node,status,JumpTarget.ITERATION));live|=visitLoopBody(node,node.body);status.jumps.pop();status.resolveJump(node);status.revive();return common.VisitorOption.Skip;case Syntax.WithStatement:break;case Syntax.VariableDeclaration:case Syntax.FunctionDeclaration:live=true;break}},leave:function leave(node){if(Status.isRequired(node)){status=status.upper;return}if(node.type===Syntax.LabeledStatement){status.unregister()}}});return live}function deadCodeElimination(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);status=null;modified=false;visit(result);common.assert(status===null,"status should be null");return{result:result,modified:modified}}deadCodeElimination.passName=Name;module.exports=deadCodeElimination})()},{"../common":34}],42:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified,escope,evaluator;Name="drop-variable-definition";common=require("../common");escope=require("escope");evaluator=require("../evaluator");Syntax=common.Syntax;function getCandidates(scope){var i,iz,j,jz,identifiers,slots,v;if(!scope.candidates){slots=[];identifiers=[];for(i=0,iz=scope.variables.length;i<iz;++i){v=scope.variables[i];for(j=0,jz=v.identifiers.length;j<jz;++j){identifiers.push(v.identifiers[j]);slots.push(v)}}scope.candidates={slots:slots,identifiers:identifiers}}return scope.candidates}function isRemovableDefinition(slot){var i,iz,ref,parent;if(slot.identifiers.length!==1){return false}if(slot.references.length===0){return true}for(i=0,iz=slot.references.length;i<iz;++i){ref=slot.references[i];if(ref.isRead()){return false}if(ref.isWrite()){if(!ref.writeExpr){return false}parent=ref.writeExpr.__$parent$__;if(!parent){return false}if(parent.type!==Syntax.AssignmentExpression&&parent.type!==Syntax.VariableDeclarator){return false}if(evaluator.hasSideEffect(ref.writeExpr,ref.from)){return false}}}return true}function overrideExpression(from,to){var key;for(key in from){delete from[key]}for(key in to){from[key]=to[key]}return from}function removeDefinition(node,index,slot){var i,iz,ref,parent;node.declarations.splice(index,1);for(i=0,iz=slot.references.length;i<iz;++i){ref=slot.references[i];common.assert(!ref.isRead());if(ref.isWrite()){parent=ref.writeExpr.__$parent$__;if(parent.type===Syntax.AssignmentExpression){overrideExpression(ref.writeExpr.__$parent$__,ref.writeExpr)}}}}function attachParent(tree){return common.traverse(tree,{enter:function(node,parent){node.__$parent$__=parent}})}function removeParent(tree){return common.traverse(tree,{enter:function(node){delete node.__$parent$__;delete node.__$escope$__}})}function dropVariableDefinition(tree,options){var result,manager,scope;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();attachParent(result);result=common.replace(result,{enter:function enter(node,parent){var i,decl,cand,index,slot,ret;ret=node;if(scope){if(scope.variableScope.isStatic()){cand=getCandidates(scope.variableScope);if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){i=node.declarations.length;while(i--){decl=node.declarations[i];index=cand.identifiers.indexOf(decl.id);if(index!==-1){slot=cand.slots[index];if(isRemovableDefinition(slot)){modified=true;removeDefinition(node,i,slot);continue}}}if(node.declarations.length===0){if(parent.type===Syntax.ForStatement){ret=null}else{ret=common.moveLocation(node,{type:Syntax.EmptyStatement})}}}if(node.type===Syntax.FunctionDeclaration){index=cand.identifiers.indexOf(node.id);if(index!==-1){slot=cand.slots[index];if(slot.identifiers.length===1&&slot.references.length===0){modified=true;ret=common.moveLocation(node,{type:Syntax.EmptyStatement});return ret}}}}}scope=manager.acquire(node)||scope;return ret},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();removeParent(result);return{result:result,modified:modified}}dropVariableDefinition.passName=Name;module.exports=dropVariableDefinition})()},{"../common":34,"../evaluator":36,escope:70}],43:[function(require,module,exports){(function(){"use strict";var Name,Syntax,Map,common,modified;Name="eliminate-duplicate-function-declarations";common=require("../common");Map=require("../map");Syntax=common.Syntax;function unique(map,root){return common.replace(root,{enter:function(node){var name,info;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;info=map.get(name);--info.count;if(info.count!==0){modified=true;return common.moveLocation(node,{type:Syntax.EmptyStatement})}}if(node!==root&&node.type===Syntax.BlockStatement){return this.skip()}}})}function uniqueInGlobal(map,root){return common.replace(root,{enter:function(node){var name,info,first;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;info=map.get(name);first=info.count===info.declarations.length;--info.count;if(info.declarations.length>1){if(first){modified=true;return common.Array.last(info.declarations)}else{modified=true;return common.moveLocation(node,{type:Syntax.EmptyStatement})}}}if(node!==root&&node.type===Syntax.BlockStatement){return this.skip()}}})}function main(tree,options){var result,stack,functionDepth,globalBlockFound;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;functionDepth=0;globalBlockFound=false;stack=[new Map];result=common.replace(result,{enter:function enter(node){var map,name,info;if(node.type===Syntax.FunctionDeclaration){name=node.id.name;map=common.Array.last(stack);if(map.has(name)){info=map.get(name);info.declarations.push(node);++info.count}else{info={declarations:[node],count:1};map.set(name,info)}}if(node.type===Syntax.BlockStatement){stack.push(new Map)}if(node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){++functionDepth
}},leave:function leave(node){var map,ret;if(node.type===Syntax.BlockStatement){map=stack.pop();if(functionDepth===0){if(map.keys().length!==0){globalBlockFound=true}}else{ret=unique(map,node)}}if(node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){--functionDepth}return ret}});common.assert(stack.length===1,"global map remains");if(!globalBlockFound){result=uniqueInGlobal(stack[0],result)}return{result:result,modified:modified}}main.passName=Name;module.exports=main})()},{"../common":34,"../map":37}],44:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="hoist-variable-to-arguments";escope=require("escope");common=require("../common");Syntax=common.Syntax;function hoist(callee){function hoisting(ident){var hoisted,i,iz;hoisted=false;for(i=0,iz=callee.params.length;i<iz;++i){if(ident.name===callee.params[i].name){hoisted=true;break}}if(!hoisted){callee.params.push(ident)}}callee.body=common.replace(callee.body,{enter:function(node,parent){var i,iz,expressions,declaration,forstmt,expr;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){this.skip();return}if(node.type===Syntax.VariableDeclaration&&node.kind==="var"){if(parent.type===Syntax.ForInStatement){common.assert(node.declarations.length===1,"for-in declaration length should be 1");declaration=node.declarations[0];if(declaration.init){return}if(declaration.id.type!==Syntax.Identifier){return}hoisting(declaration.id);modified=true;return declaration.id}forstmt=parent.type===Syntax.ForStatement;expressions=[];for(i=0,iz=node.declarations.length;i<iz;++i){declaration=node.declarations[i];if(declaration.id.type!==Syntax.Identifier){return}hoisting(declaration.id);if(declaration.init){expressions.push(common.moveLocation(declaration,{type:Syntax.AssignmentExpression,operator:"=",left:declaration.id,right:declaration.init}))}}modified=true;if(expressions.length===0){if(forstmt){return null}return common.moveLocation(node,{type:Syntax.EmptyStatement})}if(expressions.length===1){expr=expressions[0]}else{expr=common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:expressions})}if(forstmt){return expr}return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:expr})}}})}function hoistVariableToArguments(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var callee;if(node.type===Syntax.CallExpression||node.type===Syntax.NewExpression){callee=node.callee;if(callee.type===Syntax.FunctionExpression&&!callee.id){if(callee.params.length===node["arguments"].length){scope=manager.acquire(callee);if(!scope.isArgumentsMaterialized()&&(node.type!==Syntax.NewExpression||!scope.isThisMaterialized())){hoist(callee)}}}}}});manager.detach();return{result:result,modified:modified}}hoistVariableToArguments.passName=Name;module.exports=hoistVariableToArguments})()},{"../common":34,escope:70}],45:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reduce-branch-jump";common=require("../common");Syntax=common.Syntax;function reduceLast(ary,index){var node,left;node=ary[index];if(node.type===Syntax.IfStatement){if(!node.alternate){if(node.consequent.type===Syntax.ReturnStatement){modified=true;left=node.consequent.argument;if(!left){ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]}});return true}ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.ConditionalExpression,test:node.test,consequent:left,alternate:common.SpecialNode.generateUndefined()}});return true}}}}function reduce(ary,index){var node,sibling,left,right;node=ary[index];sibling=ary[index+1];if(node.type===Syntax.IfStatement){if(!node.alternate){if(node.consequent.type===Syntax.ReturnStatement&&sibling.type===Syntax.ReturnStatement){modified=true;ary.splice(index,1);left=node.consequent.argument;right=sibling.argument;if(!left&&!right){ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]}});return true}if(!left){left=common.SpecialNode.generateUndefined()}if(!right){right=common.SpecialNode.generateUndefined()}ary[index]=common.moveLocation(node,{type:Syntax.ReturnStatement,argument:{type:Syntax.ConditionalExpression,test:node.test,consequent:left,alternate:right}});return true}}}return false}function reduceBranchJump(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node,parent){var i;switch(node.type){case Syntax.BlockStatement:case Syntax.Program:i=0;while(i<node.body.length-1){if(!reduce(node.body,i)){++i}}if(common.isFunctionBody(node,parent)){if(node.body.length>0){i=node.body.length-1;reduceLast(node.body,i)}}break;case Syntax.SwitchCase:i=0;while(i<node.consequent.length-1){if(!reduce(node.consequent,i)){++i}}break}}});return{result:result,modified:modified}}reduceBranchJump.passName=Name;module.exports=reduceBranchJump})()},{"../common":34}],46:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reduce-multiple-if-statements";common=require("../common");Syntax=common.Syntax;function reduceMultipleIfStatements(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){if(node.type===Syntax.IfStatement&&!node.alternate&&node.consequent.type===Syntax.IfStatement&&!node.consequent.alternate){modified=true;node.test={type:Syntax.LogicalExpression,operator:"&&",left:node.test,right:node.consequent.test};node.consequent=node.consequent.consequent}}});return{result:result,modified:modified}}reduceMultipleIfStatements.passName=Name;module.exports=reduceMultipleIfStatements})()},{"../common":34}],47:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,escope,modified;Name="reduce-sequence-expression";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function reduce(node){var i,iz,j,jz,expr,result;result=[];for(i=0,iz=node.expressions.length;i<iz;++i){expr=node.expressions[i];if(expr.type===Syntax.SequenceExpression){modified=true;common.deleteLocation(node);for(j=0,jz=expr.expressions.length;j<jz;++j){result.push(expr.expressions[j])}}else{result.push(expr)}}node.expressions=result}function isLoadSideEffectFree(node,scope){var ref,value;if(evaluator.constant.isConstant(node)){value=evaluator.constant.evaluate(node);if(value===null||typeof value!=="object"){return true}}if(node.type===Syntax.Identifier){ref=scope.resolve(node);return ref&&ref.isStatic()}return false}function isStoreSideEffectFree(node,scope){if(!evaluator.hasSideEffect(node,scope)){return true}if(node.type===Syntax.Identifier){return true}if(node.type===Syntax.MemberExpression){if(!evaluator.hasSideEffect(node.object,scope)){if(!node.computed||isLoadSideEffectFree(node.property,scope)){return true}}return false}return false}function reduceSequenceExpression(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node){scope=manager.acquire(node)||scope},leave:function leave(node){var result,last;switch(node.type){case Syntax.SequenceExpression:reduce(node);break;case Syntax.ConditionalExpression:if(node.test.type===Syntax.SequenceExpression){modified=true;result=node.test;node.test=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.LogicalExpression:if(node.left.type===Syntax.SequenceExpression){modified=true;result=node.left;node.left=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.BinaryExpression:if(node.left.type===Syntax.SequenceExpression){modified=true;result=node.left;node.left=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}else if(node.right.type===Syntax.SequenceExpression&&!evaluator.hasSideEffect(node.left,scope)){modified=true;result=node.right;node.right=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.UpdateExpression:case Syntax.UnaryExpression:if(node.argument.type===Syntax.SequenceExpression){last=common.Array.last(node.argument.expressions);if(!common.SpecialNode.canExtractSequence(last,node,scope)){break}modified=true;result=node.argument;node.argument=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break;case Syntax.AssignmentExpression:if(node.operator==="="&&node.right.type===Syntax.SequenceExpression&&isStoreSideEffectFree(node.left,scope)){modified=true;result=node.right;node.right=common.Array.last(result.expressions);result.expressions[result.expressions.length-1]=node}break}scope=manager.release(node)||scope;return result}});manager.detach();return{result:result,modified:modified}}reduceSequenceExpression.passName=Name;module.exports=reduceSequenceExpression})()},{"../common":34,"../evaluator":36,escope:70}],48:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,escope,modified;Name="remove-context-sensitive-expressions";common=require("../common");evaluator=require("../evaluator");escope=require("escope");Syntax=common.Syntax;function Transformer(trans,booleanFunction,voidFunction,scope){this.transform=trans;this.booleanFunction=booleanFunction;this.voidFunction=voidFunction;this.scope=scope}Transformer.prototype.booleanTransformation=function(expr){var consequent;do{if(expr.type===Syntax.UnaryExpression){if(expr.operator==="!"&&expr.argument.type===Syntax.UnaryExpression&&expr.argument.operator==="!"){modified=true;expr=expr.argument.argument;continue}}else if(expr.type===Syntax.LogicalExpression){if(expr.left.type===Syntax.UnaryExpression&&expr.left.operator==="!"&&expr.right.type===Syntax.UnaryExpression&&expr.right.operator==="!"){modified=true;expr.left=expr.left.argument;expr.right=expr.right.argument;expr.operator=expr.operator==="||"?"&&":"||";expr=common.moveLocation(expr,{type:Syntax.UnaryExpression,operator:"!",argument:expr});continue}}else if(expr.type===Syntax.ConditionalExpression){if(expr.test.type===Syntax.UnaryExpression&&expr.test.operator==="!"){modified=true;expr.test=expr.test.argument;consequent=expr.consequent;expr.consequent=expr.alternate;expr.alternate=consequent}}break}while(true);return expr};Transformer.prototype.voidTransformation=function(expr){var leftHasSideEffect,rightHasSideEffect;do{expr=this.booleanTransformation(expr);if(expr.type===Syntax.UnaryExpression){if(expr.operator==="!"||expr.operator==="void"){modified=true;expr=expr.argument;continue}}else if(expr.type===Syntax.LogicalExpression){if(expr.left.type===Syntax.UnaryExpression&&expr.left.operator==="!"){modified=true;expr.left=expr.left.argument;expr.operator=expr.operator==="||"?"&&":"||"}}else if(expr.type===Syntax.ConditionalExpression){leftHasSideEffect=evaluator.hasSideEffect(expr.consequent,this.scope);rightHasSideEffect=evaluator.hasSideEffect(expr.alternate,this.scope);if(!leftHasSideEffect&&!rightHasSideEffect){modified=true;expr=expr.test}else if(!leftHasSideEffect){modified=true;expr=common.moveLocation(expr,{type:Syntax.LogicalExpression,operator:"||",left:expr.test,right:expr.alternate})}else if(!rightHasSideEffect){modified=true;expr=common.moveLocation(expr,{type:Syntax.LogicalExpression,operator:"&&",left:expr.test,right:expr.consequent})}}break}while(true);return expr};Transformer.prototype.apply=function(expr){var prev;do{prev=expr;expr=this.transform(expr);if(prev!==expr){continue}if(expr.type===Syntax.LogicalExpression){expr.left=this.booleanFunction(expr.left,this.scope);expr.right=this.voidFunction(expr.right,this.scope)}else if(expr.type===Syntax.ConditionalExpression){expr.consequent=this.voidFunction(expr.consequent,this.scope);expr.alternate=this.voidFunction(expr.alternate,this.scope)}else if(expr.type===Syntax.SequenceExpression){expr.expressions[expr.expressions.length-1]=this.voidFunction(common.Array.last(expr.expressions),this.scope)}break}while(true);return expr};function voidContext(expr,scope){var trans=new Transformer(Transformer.prototype.voidTransformation,booleanContext,voidContext,scope);return trans.apply(expr)}function booleanContext(expr,scope){var trans=new Transformer(Transformer.prototype.booleanTransformation,booleanContext,booleanContext,scope);return trans.apply(expr)}function removeContextSensitiveExpressions(tree,options){var result,stackCount,preserveCompletionValue,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;stackCount=0;preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node){var i,iz;scope=manager.acquire(node)||scope;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){++stackCount}switch(node.type){case Syntax.AssignmentExpression:break;case Syntax.ArrayExpression:break;case Syntax.BlockStatement:break;case Syntax.BinaryExpression:break;case Syntax.BreakStatement:break;case Syntax.CallExpression:break;case Syntax.CatchClause:break;case Syntax.ConditionalExpression:node.test=booleanContext(node.test,scope);break;case Syntax.ContinueStatement:break;case Syntax.DoWhileStatement:node.test=booleanContext(node.test,scope);break;case Syntax.DebuggerStatement:break;case Syntax.EmptyStatement:break;case Syntax.ExpressionStatement:if(!preserveCompletionValue||stackCount!==0){node.expression=voidContext(node.expression,scope)}break;case Syntax.FunctionExpression:break;case Syntax.ForInStatement:break;case Syntax.FunctionDeclaration:break;case Syntax.ForStatement:if(node.init&&node.init.type!==Syntax.VariableDeclaration){node.init=voidContext(node.init,scope)}if(node.test){node.test=booleanContext(node.test,scope)}if(node.update){node.update=voidContext(node.update,scope)}break;case Syntax.Identifier:break;case Syntax.IfStatement:node.test=booleanContext(node.test,scope);break;case Syntax.Literal:break;case Syntax.LabeledStatement:break;case Syntax.LogicalExpression:break;case Syntax.MemberExpression:break;case Syntax.NewExpression:break;case Syntax.ObjectExpression:break;case Syntax.Program:break;case Syntax.Property:break;case Syntax.ReturnStatement:break;case Syntax.SequenceExpression:for(i=0,iz=node.expressions.length-1;i<iz;++i){node.expressions[i]=voidContext(node.expressions[i],scope)}break;case Syntax.SwitchStatement:break;case Syntax.SwitchCase:break;case Syntax.ThisExpression:break;case Syntax.ThrowStatement:break;case Syntax.TryStatement:break;case Syntax.UnaryExpression:if(node.operator==="!"){node.argument=booleanContext(node.argument,scope)}else if(node.operator==="void"){node.argument=voidContext(node.argument,scope)}break;case Syntax.UpdateExpression:break;case Syntax.VariableDeclaration:break;case Syntax.VariableDeclarator:break;case Syntax.WhileStatement:node.test=booleanContext(node.test,scope);break;case Syntax.WithStatement:break}},leave:function leave(node){scope=manager.release(node)||scope;if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){--stackCount}}});manager.detach();return{result:result,modified:modified}}removeContextSensitiveExpressions.passName=Name;module.exports=removeContextSensitiveExpressions})()},{"../common":34,"../evaluator":36,escope:70}],49:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="remove-empty-statement";common=require("../common");Syntax=common.Syntax;function remove(array){var i,iz,node,result;result=[];for(i=0,iz=array.length;i<iz;++i){node=array[i];if(node.type===Syntax.EmptyStatement){modified=true}else{result.push(node)}}return result}function removeAlternate(node){if(node.alternate){if(node.alternate.type===Syntax.EmptyStatement){modified=true;node.alternate=null}else if(node.consequent.type===Syntax.EmptyStatement){modified=true;node.consequent=node.alternate;node.alternate=null;node.test=common.moveLocation(node.test,{type:Syntax.UnaryExpression,operator:"!",argument:node.test})}}}function removeEmptyStatement(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){var clause;switch(node.type){case Syntax.BlockStatement:case Syntax.Program:node.body=remove(node.body);break;case Syntax.SwitchCase:node.consequent=remove(node.consequent);break;case Syntax.IfStatement:removeAlternate(node);break;case Syntax.SwitchStatement:if(node.cases.length){clause=common.Array.last(node.cases);if(!clause.test&&common.Array.empty(clause.consequent)){modified=true;node.cases.pop()}}}}});return{result:result,modified:modified}}removeEmptyStatement.passName=Name;module.exports=removeEmptyStatement})()},{"../common":34}],50:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,evaluator,modified;Name="remove-side-effect-free-expressions";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function reduce(node,scope,parent,isResultNeeded){var i,iz,expr,result,prev;common.assert(node.expressions.length>1,"expressions should be more than one");result=[];for(i=0,iz=node.expressions.length;i<iz;++i){prev=expr;expr=node.expressions[i];if(i+1!==iz||!isResultNeeded){if(!evaluator.hasSideEffect(expr,scope)){continue}}result.push(expr)}if(!isResultNeeded&&result.length===0){modified=true;return expr}common.assert(result.length>0,"result should be more than zero");do{if(iz===result.length){return node}if(result.length===1){if(!common.SpecialNode.canExtractSequence(result[0],parent,scope)){result.unshift(prev);continue}modified=true;return result[0]}modified=true;node.expressions=result;return node}while(true)}function removeSideEffectFreeExpressions(tree,options){var result,scope,manager,preserveCompletionValue;function isResultNeeded(parent,scope){if(parent.type===Syntax.ExpressionStatement&&(!preserveCompletionValue||scope.type!=="global")){return false}return true}result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();result=common.replace(result,{enter:function enter(node,parent){var res,unary,trans;res=node;scope=manager.acquire(node)||scope;if(res.type===Syntax.SequenceExpression){res=reduce(res,scope,parent,isResultNeeded(parent,scope))}if(res.type===Syntax.SequenceExpression){common.assert(res.expressions.length>1,"sequences' length should be more than 1");unary=common.Array.last(res.expressions);if(unary.type===Syntax.UnaryExpression&&unary.operator==="void"&&!evaluator.hasSideEffect(unary.argument,scope)){modified=true;res.expressions.pop();trans=common.moveLocation(unary,{type:Syntax.UnaryExpression,operator:"void",argument:common.Array.last(res.expressions)});if(res.expressions.length===1){res=trans}else{res.expressions[res.expressions.length-1]=trans}}}if(!isResultNeeded(res,scope)){if(!evaluator.hasSideEffect(res.expression,scope)){modified=true;res=common.moveLocation(res,{type:Syntax.EmptyStatement})}}return res},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}removeSideEffectFreeExpressions.passName=Name;module.exports=removeSideEffectFreeExpressions})()},{"../common":34,"../evaluator":36,escope:70}],51:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,evaluator,modified;Name="remove-unreachable-branch";escope=require("escope");common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function handleIfStatement(func,node){var test,body,decl;test=evaluator.booleanCondition(node.test);if(!node.alternate){if(typeof test==="boolean"){modified=true;body=[];if(test){body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.consequent);return{type:Syntax.BlockStatement,body:body}}else{decl=common.delegateVariableDeclarations(node.consequent,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}));return{type:Syntax.BlockStatement,body:body}}}}else{if(typeof test==="boolean"){modified=true;body=[];if(test){decl=common.delegateVariableDeclarations(node.alternate,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.consequent);return{type:Syntax.BlockStatement,body:body}}else{decl=common.delegateVariableDeclarations(node.consequent,func);if(decl){body.push(decl)}body.push(common.moveLocation(node.test,{type:Syntax.ExpressionStatement,expression:node.test}),node.alternate);return{type:Syntax.BlockStatement,body:body}}}}}function handleLogicalExpression(func,node){var test;test=evaluator.booleanCondition(node.left);if(typeof test==="boolean"){modified=true;if(test){if(node.operator==="&&"){return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.left,node.right]})}else{return node.left}}else{if(node.operator==="&&"){return node.left}else{return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.left,node.right]})}}}}function handleConditionalExpression(func,node){var test;test=evaluator.booleanCondition(node.test);if(typeof test==="boolean"){modified=true;if(test){return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,node.consequent]})}else{return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,node.alternate]})}}}function removeUnreachableBranch(tree,options){var result,stack;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;stack=[];result=common.replace(result,{enter:function enter(node){var func;if(escope.Scope.isVariableScopeRequired(node)){stack.push(node);return}func=common.Array.last(stack);switch(node.type){case Syntax.IfStatement:return handleIfStatement(func,node);case Syntax.LogicalExpression:return handleLogicalExpression(func,node);case Syntax.ConditionalExpression:return handleConditionalExpression(func,node)}},leave:function leave(node){if(escope.Scope.isVariableScopeRequired(node)){stack.pop()}}});return{result:result,modified:modified}}removeUnreachableBranch.passName=Name;module.exports=removeUnreachableBranch})()},{"../common":34,"../evaluator":36,escope:70}],52:[function(require,module,exports){(function(){"use strict";var Name,Syntax,Map,common,scope,modified;Name="remove-unused-label";common=require("../common");Map=require("../map");Syntax=common.Syntax;function Scope(upper){this.set=new Map;this.unused=[];this.upper=upper}Scope.prototype.register=function register(node){var name;common.assert(node.type===Syntax.LabeledStatement);name=node.label.name;common.assert(!this.set.has(name),"duplicate label is found");this.set.set(name,{used:false,stmt:node})};Scope.prototype.unregister=function unregister(node){var name,ref;if(node.type===Syntax.LabeledStatement){name=node.label.name;ref=this.set.get(name);this.set["delete"](name);if(!ref.used){modified=true;return node.body}}return node};Scope.prototype.resolve=function resolve(node){var name;if(node.label){name=node.label.name;common.assert(this.set.has(name),"unresolved label");this.set.get(name).used=true}};Scope.prototype.close=function close(){return this.upper};function removeUnusedLabel(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);scope=null;modified=false;result=common.replace(result,{enter:function enter(node){switch(node.type){case Syntax.Program:case Syntax.FunctionDeclaration:case Syntax.FunctionExpression:scope=new Scope(scope);break;case Syntax.LabeledStatement:scope.register(node);break;case Syntax.BreakStatement:case Syntax.ContinueStatement:scope.resolve(node);break}},leave:function leave(node){var ret;ret=scope.unregister(node);if(node.type===Syntax.Program||node.type===Syntax.FunctionDeclaration||node.type===Syntax.FunctionExpression){scope=scope.close()}return ret}});return{result:result,modified:modified}}removeUnusedLabel.passName=Name;module.exports=removeUnusedLabel})()},{"../common":34,"../map":37}],53:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="remove-wasted-blocks";common=require("../common");Syntax=common.Syntax;function flattenBlockStatement(body){var i,iz,j,jz,result,stmt,inner,ok;result=[];for(i=0,iz=body.length;i<iz;++i){stmt=body[i];if(stmt.type===Syntax.BlockStatement){ok=true;for(j=0,jz=stmt.body.length;j<jz;++j){inner=stmt.body[j];if(common.isScopedDeclaration(inner)){ok=false}}if(ok){modified=true;result=result.concat(stmt.body)}else{result.push(stmt)}}else{result.push(stmt)}}return result}function removeWastedBlocks(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node,parent){var i,iz,stmt;if(node.type===Syntax.BlockStatement||node.type===Syntax.Program){for(i=0,iz=node.body.length;i<iz;++i){stmt=node.body[i];if(stmt.type===Syntax.BlockStatement){node.body=flattenBlockStatement(node.body);break}}}if(parent.type===Syntax.FunctionDeclaration||parent.type===Syntax.FunctionExpression||parent.type===Syntax.TryStatement||parent.type===Syntax.CatchClause){return}while(node.type===Syntax.BlockStatement&&node.body.length===1&&!common.isScopedDeclaration(node.body[0])){modified=true;node=node.body[0]}if(node.type===Syntax.BlockStatement&&node.body.length===0){modified=true;return{type:Syntax.EmptyStatement}}return node}});return{result:result,modified:modified}}removeWastedBlocks.passName=Name;module.exports=removeWastedBlocks})()},{"../common":34}],54:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="reordering-function-declarations";common=require("../common");Syntax=common.Syntax;function reordering(array){var i,iz,node,directives,declarations,others;directives=[];declarations=[];others=[];for(i=0,iz=array.length;i<iz;++i){node=array[i];if(node.type===Syntax.FunctionDeclaration){if(declarations.length+directives.length!==i){modified=true}declarations.push(node)}else if(node.type===Syntax.DirectiveStatement){directives.push(node)}else{others.push(node)}}return directives.concat(declarations,others)}function reorderingFunctionDeclarations(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{leave:function leave(node){switch(node.type){case Syntax.Program:node.body=reordering(node.body);break;case Syntax.FunctionDeclaration:case Syntax.FunctionExpression:node.body.body=reordering(node.body.body);break}}});return{result:result,modified:modified}}reorderingFunctionDeclarations.passName=Name;module.exports=reorderingFunctionDeclarations})()},{"../common":34}],55:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-branch-to-expression";common=require("../common");Syntax=common.Syntax;function transformBranchToExpression(tree,options){var result,preserveCompletionValue;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;result=common.replace(result,{leave:function leave(node){var consequent,alternate,ancestors;if(node.type===Syntax.IfStatement){ancestors=this.parents();if(preserveCompletionValue&&common.mayBeCompletionValue(node,ancestors)){return}if(node.alternate){if(node.consequent.type===Syntax.ExpressionStatement&&node.alternate.type===Syntax.ExpressionStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:node.consequent.expression,alternate:node.alternate.expression})})}if(node.consequent.type===Syntax.ReturnStatement&&node.alternate.type===Syntax.ReturnStatement){modified=true;if(!node.consequent.argument&&!node.alternate.argument){return common.moveLocation(node,{type:Syntax.ReturnStatement,argument:common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateUndefined()]})})}consequent=node.consequent.argument||common.SpecialNode.generateUndefined();alternate=node.alternate.argument||common.SpecialNode.generateUndefined();return common.moveLocation(node,{type:Syntax.ReturnStatement,argument:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:consequent,alternate:alternate})})}if(node.consequent.type===Syntax.ThrowStatement&&node.alternate.type===Syntax.ThrowStatement){modified=true;return common.moveLocation(node,{type:Syntax.ThrowStatement,argument:common.moveLocation(node,{type:Syntax.ConditionalExpression,test:node.test,consequent:node.consequent.argument,alternate:node.alternate.argument})})}}else{if(node.consequent.type===Syntax.ExpressionStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:common.moveLocation(node,{type:Syntax.LogicalExpression,operator:"&&",left:node.test,right:node.consequent.expression})})}else if(node.consequent.type===Syntax.EmptyStatement){modified=true;return common.moveLocation(node,{type:Syntax.ExpressionStatement,expression:node.test})}}}}});return{result:result,modified:modified}}transformBranchToExpression.passName=Name;module.exports=transformBranchToExpression})()},{"../common":34}],56:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-dynamic-to-static-property-access";common=require("../common");Syntax=common.Syntax;function transformDynamicToStaticPropertyAccess(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){var property;if(node.type===Syntax.MemberExpression&&node.computed){property=node.property;if(property.type===Syntax.Literal&&typeof property.value==="string"){if(common.isIdentifier(property.value)){modified=true;node.computed=false;node.property=common.moveLocation(property,{type:Syntax.Identifier,name:property.value})}else if(property.value===Number(property.value).toString()){modified=true;node.computed=true;node.property=common.moveLocation(node.property,common.SpecialNode.generateFromValue(Number(node.property.value)))}}}}});return{result:result,modified:modified}}transformDynamicToStaticPropertyAccess.passName=Name;module.exports=transformDynamicToStaticPropertyAccess})()},{"../common":34}],57:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-dynamic-to-static-property-definition";common=require("../common");Syntax=common.Syntax;function transformDynamicToStaticPropertyDefinition(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){var generated;if(node.type===Syntax.Property){if(node.key.type===Syntax.Literal&&typeof node.key.value==="string"){if(common.isIdentifier(node.key.value)){modified=true;
node.key=common.moveLocation(node.key,{type:Syntax.Identifier,name:node.key.value})}else if(node.key.value===Number(node.key.value).toString()){generated=common.SpecialNode.generateFromValue(Number(node.key.value));if(generated.type===Syntax.Literal){modified=true;node.key=common.moveLocation(node.key,generated)}}}}}});return{result:result,modified:modified}}transformDynamicToStaticPropertyDefinition.passName=Name;module.exports=transformDynamicToStaticPropertyDefinition})()},{"../common":34}],58:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-immediate-function-call";common=require("../common");Syntax=common.Syntax;function isEmptyFunctionCall(call){var callee,i,iz,stmt;if(call.type!==Syntax.CallExpression){return false}callee=call.callee;if(callee.type!==Syntax.FunctionExpression){return false}if(callee.body.type!==Syntax.BlockStatement){return false}if(callee.body.body.length===0){return true}for(i=0,iz=callee.body.body.length;i<iz;++i){stmt=callee.body.body[i];if(stmt.type!==Syntax.FunctionDeclaration){return false}}return true}function callToSequence(call){var expressions;expressions=common.Array.from(call["arguments"]);if(expressions.length===0){return common.SpecialNode.generateUndefined(call)}expressions.push(common.SpecialNode.generateUndefined());return common.moveLocation(call,{type:Syntax.SequenceExpression,expressions:expressions})}function transformImmediateFunctionCall(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node){if(isEmptyFunctionCall(node)){modified=true;return callToSequence(node)}}});return{result:result,modified:modified}}transformImmediateFunctionCall.passName=Name;module.exports=transformImmediateFunctionCall})()},{"../common":34}],59:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-logical-association";common=require("../common");Syntax=common.Syntax;function transformLogicalAssociation(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){if(node.type===Syntax.LogicalExpression){if(node.right.type===Syntax.LogicalExpression&&node.operator===node.right.operator){modified=true;node.left={type:Syntax.LogicalExpression,operator:node.operator,left:node.left,right:node.right.left};node.right=node.right.right}}}});return{result:result,modified:modified}}transformLogicalAssociation.passName=Name;module.exports=transformLogicalAssociation})()},{"../common":34}],60:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="transform-to-compound-assignment";escope=require("escope");common=require("../common");Syntax=common.Syntax;function equals(lhs,rhs){if(lhs.type!==rhs.type){return false}if(lhs.type===Syntax.Identifier){return lhs.name===rhs.name}return false}function compound(operator){switch(operator){case"*":case"/":case"%":case"+":case"-":case"<<":case">>":case">>>":case"&":case"^":case"|":return operator+"="}return null}function observableCompound(operator){switch(operator){case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":return operator}return null}function transformToCompoundAssignment(tree,options){var result,scope,manager;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var left,right,operator,ref;scope=manager.acquire(node)||scope;if(node.type===Syntax.AssignmentExpression&&node.operator==="="){left=node.left;right=node.right;if(right.type===Syntax.BinaryExpression&&equals(right.left,left)){operator=compound(right.operator);if(operator){modified=true;node.operator=operator;node.right=right.right}}else if(right.type===Syntax.AssignmentExpression&&equals(right.left,left)){if(observableCompound(right.operator)){ref=scope.resolve(node.left);if(ref.isStatic()){modified=true;node.operator=right.operator;node.right=right.right}}}}},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}transformToCompoundAssignment.passName=Name;module.exports=transformToCompoundAssignment})()},{"../common":34,escope:70}],61:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="transform-to-sequence-expression";common=require("../common");Syntax=common.Syntax;function transform(node){var i,iz,expressions,stmt,prev,body;function constructSeq(expressions,stmt){var seq;if(expressions.length!==1){modified=true;seq={type:Syntax.SequenceExpression,expressions:expressions};if(stmt.type===Syntax.ExpressionStatement){stmt.expression=seq}else{stmt.argument=seq}}return stmt}body=[];expressions=[];for(i=0,iz=node.body.length;i<iz;++i){prev=stmt;stmt=node.body[i];if(stmt.type===Syntax.ExpressionStatement){expressions.push(stmt.expression)}else if(stmt.type===Syntax.ReturnStatement&&stmt.argument!=null||stmt.type===Syntax.ThrowStatement){expressions.push(stmt.argument);body.push(constructSeq(expressions,stmt));expressions=[]}else if(stmt.type===Syntax.ForStatement&&(!stmt.init||stmt.init.type!==Syntax.VariableDeclaration)){if(expressions.length){modified=true;if(stmt.init){expressions.push(stmt.init)}if(expressions.length===1){stmt.init=expressions[0]}else{stmt.init={type:Syntax.SequenceExpression,expressions:expressions}}expressions=[]}body.push(stmt)}else if(stmt.type===Syntax.IfStatement){if(expressions.length){modified=true;expressions.push(stmt.test);stmt.test={type:Syntax.SequenceExpression,expressions:expressions};expressions=[]}body.push(stmt)}else{if(expressions.length){body.push(constructSeq(expressions,prev));expressions=[]}body.push(stmt)}}if(expressions.length){body.push(constructSeq(expressions,stmt))}node.body=body}function transformToSequenceExpression(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){switch(node.type){case Syntax.BlockStatement:case Syntax.Program:transform(node);break}}});return{result:result,modified:modified}}transformToSequenceExpression.passName=Name;module.exports=transformToSequenceExpression})()},{"../common":34}],62:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,escope,modified;Name="transform-typeof-undefined";escope=require("escope");common=require("../common");Syntax=common.Syntax;function isUndefinedStringLiteral(node){return node.type===Syntax.Literal&&node.value==="undefined"}function transformTypeofUndefined(tree,options){var result,manager,scope;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;scope=null;manager=escope.analyze(result,{directive:true});manager.attach();common.traverse(result,{enter:function enter(node){var target,undef,argument,ref;scope=manager.acquire(node)||scope;if(node.type===Syntax.BinaryExpression&&(node.operator==="==="||node.operator==="!=="||node.operator==="=="||node.operator==="!=")){if(isUndefinedStringLiteral(node.left)){undef="left";target="right"}else if(isUndefinedStringLiteral(node.right)){undef="right";target="left"}else{return}if(node[target].type===Syntax.UnaryExpression&&node[target].operator==="typeof"){argument=node[target].argument;if(argument.type===Syntax.Identifier){ref=scope.resolve(argument);if(!ref||!ref.isStatic()||!ref.resolved){return}}modified=true;node[undef]=common.SpecialNode.generateUndefined();node[target]=argument;node.operator=node.operator.charAt(0)==="!"?"!==":"==="}}},leave:function leave(node){scope=manager.release(node)||scope}});manager.detach();return{result:result,modified:modified}}transformTypeofUndefined.passName=Name;module.exports=transformTypeofUndefined})()},{"../common":34,escope:70}],63:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,evaluator,modified;Name="tree-based-constant-folding";common=require("../common");evaluator=require("../evaluator");Syntax=common.Syntax;function isModifiedConstant(node){if(common.SpecialNode.isUndefined(node)){return false}if(common.SpecialNode.isNegative(node)){return false}if(common.SpecialNode.isNaN(node)){return false}return evaluator.constant.isConstant(node,false)}function isFoldableConditional(node){if(node.type!==Syntax.ConditionalExpression){return false}return evaluator.constant.isConstant(node.consequent)||evaluator.constant.isConstant(node.alternate)}function foldConditional(node){var binary,unary,operator,left,right;switch(node.type){case Syntax.BinaryExpression:if(node.operator==="in"||node.operator==="instanceof"){return node}if(evaluator.constant.isConstant(node.left)&&isFoldableConditional(node.right)){modified=true;binary=node;operator=binary.operator;left=evaluator.constant.evaluate(binary.left);node=node.right;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,left,evaluator.constant.evaluate(node.consequent)))}else{binary.right=node.consequent;node.consequent=binary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,left,evaluator.constant.evaluate(node.alternate)))}else{binary.right=node.alternate;node.alternate=binary}}else if(evaluator.constant.isConstant(node.right)&&isFoldableConditional(node.left)){modified=true;binary=node;operator=binary.operator;right=evaluator.constant.evaluate(binary.right);node=node.left;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,evaluator.constant.evaluate(node.consequent),right))}else{binary.left=node.consequent;node.consequent=binary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doBinary(operator,evaluator.constant.evaluate(node.alternate),right))}else{binary.left=node.alternate;node.alternate=binary}}break;case Syntax.LogicalExpression:break;case Syntax.UnaryExpression:if(isFoldableConditional(node.argument)){modified=true;unary=node;operator=unary.operator;node=unary.argument;if(evaluator.constant.isConstant(node.consequent)){node.consequent=common.SpecialNode.generateFromValue(evaluator.constant.doUnary(operator,evaluator.constant.evaluate(node.consequent)))}else{unary.argument=node.consequent;node.consequent=unary}if(evaluator.constant.isConstant(node.alternate)){node.alternate=common.SpecialNode.generateFromValue(evaluator.constant.doUnary(operator,evaluator.constant.evaluate(node.alternate)))}else{unary.argument=node.alternate;node.alternate=unary}}break}return node}function treeBasedConstantFolding(tree,options){var result;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{leave:function leave(node){var con,alt;switch(node.type){case Syntax.BinaryExpression:case Syntax.LogicalExpression:case Syntax.UnaryExpression:if(isModifiedConstant(node)){modified=true;return common.moveLocation(node,common.SpecialNode.generateFromValue(evaluator.constant.evaluate(node)))}return foldConditional(node);case Syntax.ConditionalExpression:if(evaluator.constant.isConstant(node.consequent)&&evaluator.constant.isConstant(node.alternate)){con=evaluator.constant.evaluate(node.consequent);alt=evaluator.constant.evaluate(node.alternate);if(common.sameValue(con,alt)){modified=true;return common.moveLocation(node,{type:Syntax.SequenceExpression,expressions:[node.test,common.SpecialNode.generateFromValue(con)]})}}break}}});return{result:result,modified:modified}}treeBasedConstantFolding.passName=Name;module.exports=treeBasedConstantFolding})()},{"../common":34,"../evaluator":36}],64:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="omit-parens-in-void-context-iife";common=require("../common");Syntax=common.Syntax;function isIIFE(node){var callee;if(node.type!==Syntax.CallExpression){return false}callee=node.callee;return callee.type===Syntax.FunctionExpression}function main(tree,options){var result,stackCount,preserveCompletionValue;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);preserveCompletionValue=options.get("preserveCompletionValue",{pathName:Name});modified=false;result=common.replace(result,{enter:function enter(node,parent){var ancestors,target;if(!isIIFE(node)){return}target=parent;if(target.type===Syntax.ExpressionStatement){ancestors=this.parents();ancestors.pop();if(preserveCompletionValue&&common.mayBeCompletionValue(target,ancestors)){return}}else if(target.type===Syntax.SequenceExpression&&target.expressions.length>=2&&target.expressions[0]===node){ancestors=this.parents();ancestors.pop();target=ancestors.pop();if(target.type!==Syntax.ExpressionStatement){return}}else{return}modified=true;return{type:Syntax.UnaryExpression,operator:"!",argument:node}},leave:function leave(node){if(node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration){--stackCount}}});return{result:result,modified:modified}}main.passName=Name;module.exports=main})()},{"../common":34}],65:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="rewrite-boolean";common=require("../common");Syntax=common.Syntax;function isBooleanLiteral(node){return node.type===Syntax.Literal&&typeof node.value==="boolean"}function rewrite(node){if(isBooleanLiteral(node)){modified=true;return common.moveLocation(node,{type:Syntax.UnaryExpression,operator:"!",argument:common.moveLocation(node,{type:Syntax.Literal,value:+!node.value})})}if(node.type===Syntax.BinaryExpression&&node.operator==="=="||node.operator==="!="){if(isBooleanLiteral(node.left)){modified=true;node.left=common.moveLocation(node.left,{type:Syntax.Literal,value:+node.left.value});return node}if(isBooleanLiteral(node.right)){modified=true;node.right=common.moveLocation(node.right,{type:Syntax.Literal,value:+node.right.value});return node}}return node}function rewriteBoolean(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);result=common.replace(result,{enter:rewrite});return{result:result,modified:modified}}rewriteBoolean.passName=Name;module.exports=rewriteBoolean})()},{"../common":34}],66:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common,modified;Name="rewrite-conditional-expression";common=require("../common");Syntax=common.Syntax;function rewrite(node){var test,consequent,alternate;test=node.test;consequent=node.consequent;alternate=node.alternate;if(test.type===Syntax.UnaryExpression&&test.operator==="!"){modified=true;node.consequent=alternate;node.alternate=consequent;node.test=test.argument}}function rewriteConditionalExpression(tree,options){var result;modified=false;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);common.traverse(result,{enter:function enter(node){if(node.type===Syntax.ConditionalExpression){rewrite(node)}}});return{result:result,modified:modified}}rewriteConditionalExpression.passName=Name;module.exports=rewriteConditionalExpression})()},{"../common":34}],67:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="transform-infinity";common=require("../common");Syntax=common.Syntax;function transformInfinity(tree,options){var result,modified;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;result=common.replace(result,{enter:function enter(node){if(node.type===Syntax.Literal&&typeof node.value==="number"){if(node.value===Infinity){modified=true;return common.moveLocation(node,{type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:1},right:{type:Syntax.Literal,value:0}})}}}});return{result:result,modified:modified}}transformInfinity.passName=Name;module.exports=transformInfinity})()},{"../common":34}],68:[function(require,module,exports){(function(){"use strict";var Name,Syntax,common;Name="transform-static-to-dynamic-property-access";common=require("../common");Syntax=common.Syntax;function transformStaticToDynamicPropertyAccess(tree,options){var result,modified;result=options.get("destructive",{pathName:Name})?tree:common.deepCopy(tree);modified=false;common.traverse(result,{enter:function enter(node){var property;if(node.type!==Syntax.MemberExpression||node.computed||node.property.type!==Syntax.Identifier){return}property=node.property;switch(property.name){case"undefined":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.UnaryExpression,operator:"void",argument:{type:Syntax.Literal,value:0}});break;case"true":case"false":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.Literal,value:property.name==="true"});break;case"Infinity":modified=true;node.computed=true;node.property=common.moveLocation(property,{type:Syntax.BinaryExpression,operator:"/",left:{type:Syntax.Literal,value:1},right:{type:Syntax.Literal,value:0}});break}}});return{result:result,modified:modified}}transformStaticToDynamicPropertyAccess.passName=Name;module.exports=transformStaticToDynamicPropertyAccess})()},{"../common":34}],69:[function(require,module,exports){(function(){"use strict";var common;common=require("./common");exports.get=function get(root,query){var i,iz,name,node;node=root;for(i=0,iz=query.length;i<iz;++i){name=query[i];node=node[name]}return node};exports.set=function set(root,query,value){var i,iz,name,node;common.assert(query.length>0);node=root;for(i=0,iz=query.length-1;i<iz;++i){name=query[i];node=node[name]}name=query[i];node[name]=value}})()},{"./common":34}],70:[function(require,module,exports){(function(factory,global){"use strict";function namespace(str,obj){var i,iz,names,name;names=str.split(".");for(i=0,iz=names.length;i<iz;++i){name=names[i];if(obj.hasOwnProperty(name)){obj=obj[name]}else{obj=obj[name]={}}}return obj}if(typeof define==="function"&&define.amd){define("escope",["exports","estraverse"],function(exports,estraverse){factory(exports,global,estraverse)})}else if(typeof exports!=="undefined"){factory(exports,global,require("estraverse"))}else{factory(namespace("escope",global),global,global.estraverse)}})(function(exports,global,estraverse){"use strict";var Syntax,Map,currentScope,globalScope,scopes,options;Syntax=estraverse.Syntax;if(typeof global.Map!=="undefined"){Map=global.Map}else{Map=function Map(){this.__data={}};Map.prototype.get=function MapGet(key){key="$"+key;if(this.__data.hasOwnProperty(key)){return this.__data[key]}return undefined};Map.prototype.has=function MapHas(key){key="$"+key;return this.__data.hasOwnProperty(key)};Map.prototype.set=function MapSet(key,val){key="$"+key;this.__data[key]=val};Map.prototype["delete"]=function MapDelete(key){key="$"+key;return delete this.__data[key]}}function assert(cond,text){if(!cond){throw new Error(text)}}function defaultOptions(){return{optimistic:false,directive:false}}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function Reference(ident,scope,flag,writeExpr,maybeImplicitGlobal){this.identifier=ident;this.from=scope;this.tainted=false;this.resolved=null;this.flag=flag;if(this.isWrite()){this.writeExpr=writeExpr}this.__maybeImplicitGlobal=maybeImplicitGlobal}Reference.READ=1;Reference.WRITE=2;Reference.RW=3;Reference.prototype.isStatic=function isStatic(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()};Reference.prototype.isWrite=function isWrite(){return this.flag&Reference.WRITE};Reference.prototype.isRead=function isRead(){return this.flag&Reference.READ};Reference.prototype.isReadOnly=function isReadOnly(){return this.flag===Reference.READ};Reference.prototype.isWriteOnly=function isWriteOnly(){return this.flag===Reference.WRITE};Reference.prototype.isReadWrite=function isReadWrite(){return this.flag===Reference.RW};function Variable(name,scope){this.name=name;this.identifiers=[];this.references=[];this.defs=[];this.tainted=false;this.stack=true;this.scope=scope}Variable.CatchClause="CatchClause";Variable.Parameter="Parameter";Variable.FunctionName="FunctionName";Variable.Variable="Variable";Variable.ImplicitGlobalVariable="ImplicitGlobalVariable";function isStrictScope(scope,block){var body,i,iz,stmt,expr;if(scope.upper&&scope.upper.isStrict){return true}if(scope.type==="function"){body=block.body}else if(scope.type==="global"){body=block}else{return false}if(options.directive){for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!=="DirectiveStatement"){break}if(stmt.raw==='"use strict"'||stmt.raw==="'use strict'"){return true}}}else{for(i=0,iz=body.body.length;i<iz;++i){stmt=body.body[i];if(stmt.type!==Syntax.ExpressionStatement){break}expr=stmt.expression;if(expr.type!==Syntax.Literal||typeof expr.value!=="string"){break}if(expr.raw!=null){if(expr.raw==='"use strict"'||expr.raw==="'use strict'"){return true}}else{if(expr.value==="use strict"){return true}}}}return false}function Scope(block,opt){var variable,body;this.type=block.type===Syntax.CatchClause?"catch":block.type===Syntax.WithStatement?"with":block.type===Syntax.Program?"global":"function";this.set=new Map;this.taints=new Map;this.dynamic=this.type==="global"||this.type==="with";this.block=block;this.through=[];this.variables=[];this.references=[];this.left=[];this.variableScope=this.type==="global"||this.type==="function"?this:currentScope.variableScope;this.functionExpressionScope=false;this.directCallToEvalScope=false;this.thisFound=false;body=this.type==="function"?block.body:block;if(opt.naming){this.__define(block.id,{type:Variable.FunctionName,name:block.id,node:block});this.functionExpressionScope=true}else{if(this.type==="function"){variable=new Variable("arguments",this);this.taints.set("arguments",true);this.set.set("arguments",variable);this.variables.push(variable)}if(block.type===Syntax.FunctionExpression&&block.id){new Scope(block,{naming:true})}}this.upper=currentScope;this.isStrict=isStrictScope(this,block);this.childScopes=[];if(currentScope){currentScope.childScopes.push(this)}currentScope=this;if(this.type==="global"){globalScope=this;globalScope.implicit={set:new Map,variables:[]}}scopes.push(this)}Scope.prototype.__close=function __close(){var i,iz,ref,current,node,implicit;if(!this.dynamic||options.optimistic){for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];if(!this.__resolve(ref)){this.__delegateToUpperScope(ref)}}}else{if(this.type==="with"){for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];ref.tainted=true;this.__delegateToUpperScope(ref)}}else{for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];current=this;do{current.through.push(ref);current=current.upper}while(current)}}}if(this.type==="global"){implicit=[];for(i=0,iz=this.left.length;i<iz;++i){ref=this.left[i];if(ref.__maybeImplicitGlobal&&!this.set.has(ref.identifier.name)){implicit.push(ref.__maybeImplicitGlobal)}}for(i=0,iz=implicit.length;i<iz;++i){node=implicit[i];this.__defineImplicit(node.left,{type:Variable.ImplicitGlobalVariable,name:node.left,node:node})}}this.left=null;currentScope=this.upper};Scope.prototype.__resolve=function __resolve(ref){var variable,name;name=ref.identifier.name;if(this.set.has(name)){variable=this.set.get(name);variable.references.push(ref);variable.stack=variable.stack&&ref.from.variableScope===this.variableScope;if(ref.tainted){variable.tainted=true;this.taints.set(variable.name,true)}ref.resolved=variable;return true}return false};Scope.prototype.__delegateToUpperScope=function __delegateToUpperScope(ref){if(this.upper){this.upper.left.push(ref)}this.through.push(ref)};Scope.prototype.__defineImplicit=function __defineImplicit(node,info){var name,variable;if(node&&node.type===Syntax.Identifier){name=node.name;if(!this.implicit.set.has(name)){variable=new Variable(name,this);variable.identifiers.push(node);variable.defs.push(info);this.implicit.set.set(name,variable);this.implicit.variables.push(variable)}else{variable=this.implicit.set.get(name);variable.identifiers.push(node);variable.defs.push(info)}}};Scope.prototype.__define=function __define(node,info){var name,variable;if(node&&node.type===Syntax.Identifier){name=node.name;if(!this.set.has(name)){variable=new Variable(name,this);variable.identifiers.push(node);variable.defs.push(info);this.set.set(name,variable);this.variables.push(variable)}else{variable=this.set.get(name);variable.identifiers.push(node);variable.defs.push(info)}}};Scope.prototype.__referencing=function __referencing(node,assign,writeExpr,maybeImplicitGlobal){var ref;if(node&&node.type===Syntax.Identifier){ref=new Reference(node,this,assign||Reference.READ,writeExpr,maybeImplicitGlobal);this.references.push(ref);this.left.push(ref)}};Scope.prototype.__detectEval=function __detectEval(){var current;current=this;this.directCallToEvalScope=true;do{current.dynamic=true;current=current.upper}while(current)};Scope.prototype.__detectThis=function __detectThis(){this.thisFound=true};Scope.prototype.__isClosed=function isClosed(){return this.left===null};Scope.prototype.resolve=function resolve(ident){var ref,i,iz;assert(this.__isClosed(),"scope should be closed");assert(ident.type===Syntax.Identifier,"target should be identifier");for(i=0,iz=this.references.length;i<iz;++i){ref=this.references[i];if(ref.identifier===ident){return ref}}return null};Scope.prototype.isStatic=function isStatic(){return!this.dynamic};Scope.prototype.isArgumentsMaterialized=function isArgumentsMaterialized(){var variable;if(this.type!=="function"){return true}if(!this.isStatic()){return true}variable=this.set.get("arguments");assert(variable,"always have arguments variable");return variable.tainted||variable.references.length!==0};Scope.prototype.isThisMaterialized=function isThisMaterialized(){if(this.type!=="function"){return true}if(!this.isStatic()){return true}return this.thisFound};Scope.mangledName="__$escope$__";Scope.prototype.attach=function attach(){if(!this.functionExpressionScope){this.block[Scope.mangledName]=this}};Scope.prototype.detach=function detach(){if(!this.functionExpressionScope){delete this.block[Scope.mangledName]}};Scope.prototype.isUsedName=function(name){if(this.set.has(name)){return true}for(var i=0,iz=this.through.length;i<iz;++i){if(this.through[i].identifier.name===name){return true}}return false};function ScopeManager(scopes){this.scopes=scopes;this.attached=false}ScopeManager.prototype.__get=function __get(node){var i,iz,scope;if(this.attached){return node[Scope.mangledName]||null}if(Scope.isScopeRequired(node)){for(i=0,iz=this.scopes.length;i<iz;++i){scope=this.scopes[i];if(!scope.functionExpressionScope){if(scope.block===node){return scope}}}}return null};ScopeManager.prototype.acquire=function acquire(node){return this.__get(node)};ScopeManager.prototype.release=function release(node){var scope=this.__get(node);if(scope){scope=scope.upper;while(scope){if(!scope.functionExpressionScope){return scope}scope=scope.upper}}return null};ScopeManager.prototype.attach=function attach(){var i,iz;for(i=0,iz=this.scopes.length;i<iz;++i){this.scopes[i].attach()}this.attached=true};ScopeManager.prototype.detach=function detach(){var i,iz;for(i=0,iz=this.scopes.length;i<iz;++i){this.scopes[i].detach()}this.attached=false};Scope.isScopeRequired=function isScopeRequired(node){return Scope.isVariableScopeRequired(node)||node.type===Syntax.WithStatement||node.type===Syntax.CatchClause};Scope.isVariableScopeRequired=function isVariableScopeRequired(node){return node.type===Syntax.Program||node.type===Syntax.FunctionExpression||node.type===Syntax.FunctionDeclaration};function analyze(tree,providedOptions){var resultScopes;options=updateDeeply(defaultOptions(),providedOptions);resultScopes=scopes=[];currentScope=null;globalScope=null;estraverse.traverse(tree,{enter:function enter(node){var i,iz,decl;if(Scope.isScopeRequired(node)){new Scope(node,{})}switch(node.type){case Syntax.AssignmentExpression:if(node.operator==="="){currentScope.__referencing(node.left,Reference.WRITE,node.right,!currentScope.isStrict&&node.left.name!=null&&node)}else{currentScope.__referencing(node.left,Reference.RW,node.right)}currentScope.__referencing(node.right);break;case Syntax.ArrayExpression:for(i=0,iz=node.elements.length;i<iz;++i){currentScope.__referencing(node.elements[i])}break;case Syntax.BlockStatement:break;case Syntax.BinaryExpression:currentScope.__referencing(node.left);currentScope.__referencing(node.right);break;case Syntax.BreakStatement:break;case Syntax.CallExpression:currentScope.__referencing(node.callee);for(i=0,iz=node["arguments"].length;i<iz;++i){currentScope.__referencing(node["arguments"][i])}if(!options.ignoreEval&&node.callee.type===Syntax.Identifier&&node.callee.name==="eval"){currentScope.variableScope.__detectEval()}break;case Syntax.CatchClause:currentScope.__define(node.param,{type:Variable.CatchClause,name:node.param,node:node});break;case Syntax.ConditionalExpression:currentScope.__referencing(node.test);currentScope.__referencing(node.consequent);currentScope.__referencing(node.alternate);break;case Syntax.ContinueStatement:break;case Syntax.DirectiveStatement:break;case Syntax.DoWhileStatement:currentScope.__referencing(node.test);break;case Syntax.DebuggerStatement:break;case Syntax.EmptyStatement:break;case Syntax.ExpressionStatement:currentScope.__referencing(node.expression);break;case Syntax.ForStatement:currentScope.__referencing(node.init);currentScope.__referencing(node.test);currentScope.__referencing(node.update);break;case Syntax.ForInStatement:if(node.left.type===Syntax.VariableDeclaration){currentScope.__referencing(node.left.declarations[0].id,Reference.WRITE,null,false)}else{currentScope.__referencing(node.left,Reference.WRITE,null,!currentScope.isStrict&&node.left.name!=null&&node)}currentScope.__referencing(node.right);break;case Syntax.FunctionDeclaration:currentScope.upper.__define(node.id,{type:Variable.FunctionName,name:node.id,node:node});for(i=0,iz=node.params.length;i<iz;++i){currentScope.__define(node.params[i],{type:Variable.Parameter,name:node.params[i],node:node,index:i})}break;case Syntax.FunctionExpression:for(i=0,iz=node.params.length;i<iz;++i){currentScope.__define(node.params[i],{type:Variable.Parameter,name:node.params[i],node:node,index:i})}break;case Syntax.Identifier:break;case Syntax.IfStatement:currentScope.__referencing(node.test);break;case Syntax.Literal:break;case Syntax.LabeledStatement:break;case Syntax.LogicalExpression:currentScope.__referencing(node.left);currentScope.__referencing(node.right);break;case Syntax.MemberExpression:currentScope.__referencing(node.object);if(node.computed){currentScope.__referencing(node.property)}break;case Syntax.NewExpression:currentScope.__referencing(node.callee);for(i=0,iz=node["arguments"].length;i<iz;++i){currentScope.__referencing(node["arguments"][i])}break;case Syntax.ObjectExpression:break;case Syntax.Program:break;case Syntax.Property:currentScope.__referencing(node.value);break;case Syntax.ReturnStatement:currentScope.__referencing(node.argument);break;case Syntax.SequenceExpression:for(i=0,iz=node.expressions.length;i<iz;++i){currentScope.__referencing(node.expressions[i])}break;case Syntax.SwitchStatement:currentScope.__referencing(node.discriminant);break;case Syntax.SwitchCase:currentScope.__referencing(node.test);
break;case Syntax.ThisExpression:currentScope.variableScope.__detectThis();break;case Syntax.ThrowStatement:currentScope.__referencing(node.argument);break;case Syntax.TryStatement:break;case Syntax.UnaryExpression:currentScope.__referencing(node.argument);break;case Syntax.UpdateExpression:currentScope.__referencing(node.argument,Reference.RW,null);break;case Syntax.VariableDeclaration:for(i=0,iz=node.declarations.length;i<iz;++i){decl=node.declarations[i];currentScope.variableScope.__define(decl.id,{type:Variable.Variable,name:decl.id,node:decl,index:i,parent:node});if(decl.init){currentScope.__referencing(decl.id,Reference.WRITE,decl.init,false);currentScope.__referencing(decl.init)}}break;case Syntax.VariableDeclarator:break;case Syntax.WhileStatement:currentScope.__referencing(node.test);break;case Syntax.WithStatement:currentScope.upper.__referencing(node.object);break}},leave:function leave(node){while(currentScope&&node===currentScope.block){currentScope.__close()}}});assert(currentScope===null);globalScope=null;scopes=null;options=null;return new ScopeManager(resultScopes)}exports.version="1.0.1";exports.Reference=Reference;exports.Variable=Variable;exports.Scope=Scope;exports.ScopeManager=ScopeManager;exports.analyze=analyze},this)},{estraverse:75}],71:[function(require,module,exports){(function(){"use strict";var escope,estraverse,esutils,utility,version,assert,Syntax,Map;escope=require("escope");estraverse=require("estraverse");esutils=require("esutils");utility=require("./utility");Map=require("./map");version=require("../package.json").version;Syntax=estraverse.Syntax;assert=function assert(cond,message){if(!cond){throw new Error(message)}};if(version.indexOf("-dev",version.length-4)===-1){assert=function(){}}function NameGenerator(scope,options){this._scope=scope;this._functionName="";if(!options.distinguishFunctionExpressionScope&&this._scope.upper&&this._scope.upper.functionExpressionScope){this._functionName=this._scope.upper.block.id.name}}NameGenerator.prototype.passAsUnique=function passAsUnique(name){var i,iz;if(this._functionName===name){return false}if(esutils.keyword.isKeywordES5(name,true)||esutils.keyword.isRestrictedWord(name)){return false}if(this._scope.taints.has(name)){return false}for(i=0,iz=this._scope.through.length;i<iz;++i){if(this._scope.through[i].identifier.name===name){return false}}return true};NameGenerator.prototype.generateName=function generateName(tip){do{tip=utility.generateNextName(tip)}while(!this.passAsUnique(tip));return tip};function run(scope,options){var i,iz,j,jz,variable,name,def,ref,generator;generator=new NameGenerator(scope,options);if(scope.isStatic()){name="9";scope.variables.sort(function(a,b){if(a.tainted){return 1}if(b.tainted){return-1}return b.identifiers.length+b.references.length-(a.identifiers.length+a.references.length)});for(i=0,iz=scope.variables.length;i<iz;++i){variable=scope.variables[i];if(variable.tainted){continue}if(variable.identifiers.length===0){continue}name=generator.generateName(name);for(j=0,jz=variable.identifiers.length;j<jz;++j){def=variable.identifiers[j];def.name=name}for(j=0,jz=variable.references.length;j<jz;++j){ref=variable.references[j];ref.identifier.name=name}}}}function Label(node,upper){this.node=node;this.upper=upper;this.users=[];this.names=new Map;this.name=null}Label.prototype.mangle=function(){var tip,current,i,iz;tip="9";for(current=this.upper;current;current=current.upper){if(current.name!==null){this.names.set(current.name,true)}}do{tip=utility.generateNextName(tip)}while(this.names.has(tip));this.name=tip;for(current=this.upper;current;current=current.upper){current.names.set(tip,true)}this.node.label.name=tip;for(i=0,iz=this.users.length;i<iz;++i){this.users[i].label.name=tip}};function LabelScope(upper){this.map=new Map;this.upper=upper;this.label=null;this.labels=[]}LabelScope.prototype.register=function register(node){var name;assert(node.type===Syntax.LabeledStatement,"node should be LabeledStatement");this.label=new Label(node,this.label);this.labels.push(this.label);name=node.label.name;assert(!this.map.has(name),"duplicate label is found");this.map.set(name,this.label)};LabelScope.prototype.unregister=function unregister(node){var name,ref;if(node.type!==Syntax.LabeledStatement){return}name=node.label.name;ref=this.map.get(name);this.map["delete"](name);this.label=ref.upper};LabelScope.prototype.resolve=function resolve(node){var name;if(node.label){name=node.label.name;assert(this.map.has(name),"unresolved label");this.map.get(name).users.push(node)}};LabelScope.prototype.close=function close(){var i,iz,label;this.labels.sort(function(lhs,rhs){return rhs.users.length-lhs.users.length});for(i=0,iz=this.labels.length;i<iz;++i){label=this.labels[i];label.mangle()}return this.upper};function mangleLabels(tree){var labelScope;estraverse.traverse(tree,{enter:function(node){if(escope.Scope.isVariableScopeRequired(node)){labelScope=new LabelScope(labelScope);return}switch(node.type){case Syntax.LabeledStatement:labelScope.register(node);break;case Syntax.BreakStatement:case Syntax.ContinueStatement:labelScope.resolve(node);break}},leave:function(node){labelScope.unregister(node);if(escope.Scope.isVariableScopeRequired(node)){labelScope=labelScope.close()}}});return tree}function mangle(tree,options){var result,manager,i,iz;if(options==null){options={destructive:true}}result=options.destructive==null||options.destructive?tree:utility.deepCopy(tree);manager=escope.analyze(result,{directive:true});for(i=0,iz=manager.scopes.length;i<iz;++i){run(manager.scopes[i],options)}return mangleLabels(result)}exports.mangle=mangle;exports.version=version;exports.generateNextName=utility.generateNextName})()},{"../package.json":74,"./map":72,"./utility":73,escope:70,estraverse:75,esutils:78}],72:[function(require,module,exports){arguments[4][37][0].apply(exports,arguments)},{dup:37}],73:[function(require,module,exports){(function(){"use strict";var isArray,NameSequence,ZeroSequenceCache;isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){function deepCopyInternal(obj,result){var key,val;for(key in obj){if(key.lastIndexOf("__",0)===0){continue}if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){if(val instanceof RegExp){val=new RegExp(val)}else{val=deepCopyInternal(val,isArray(val)?[]:{})}}result[key]=val}}return result}return deepCopyInternal(obj,isArray(obj)?[]:{})}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}ZeroSequenceCache=[];function zeroSequence(num){var res=ZeroSequenceCache[num];if(res!==undefined){return res}res=stringRepeat("0",num);ZeroSequenceCache[num]=res;return res}NameSequence="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$".split("");function generateNextName(name){var ch,index,cur;cur=name.length-1;do{ch=name.charAt(cur);index=NameSequence.indexOf(ch);if(index!==NameSequence.length-1){return name.substring(0,cur)+NameSequence[index+1]+zeroSequence(name.length-(cur+1))}--cur}while(cur>=0);return"a"+zeroSequence(name.length)}exports.generateNextName=generateNextName;exports.deepCopy=deepCopy})()},{}],74:[function(require,module,exports){module.exports={name:"esshorten",description:"Shorten (mangle) names in JavaScript code",main:"lib/esshorten.js",version:"1.1.0",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"http://github.com/Constellation/esshorten.git"},dependencies:{estraverse:"~1.5.0",escope:"~1.0.1",esutils:"~1.0.0"},devDependencies:{chai:"*","commonjs-everywhere":"0.8.x","jshint-stylish":"~0.1.5","gulp-mocha":"~0.4.1","gulp-jshint":"~1.4.0",gulp:"~3.5.2","coffee-script":"~1.7.1"},licenses:[{type:"BSD",url:"http://github.com/Constellation/esshorten/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis",lint:"gulp lint","unit-test":"gulp test"},bugs:{url:"https://github.com/Constellation/esshorten/issues"},homepage:"https://github.com/Constellation/esshorten",_id:"esshorten@1.1.0",dist:{shasum:"6f0c22ae6cc3119da0b18b835813e8f26c1abacc",tarball:"http://registry.npmjs.org/esshorten/-/esshorten-1.1.0.tgz"},_from:"esshorten@>=1.1.0 <1.2.0",_npmVersion:"1.3.21",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},_shasum:"6f0c22ae6cc3119da0b18b835813e8f26c1abacc",_resolved:"https://registry.npmjs.org/esshorten/-/esshorten-1.1.0.tgz"}},{}],75:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,BREAK,SKIP;Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};VisitorOption={Break:BREAK,Skip:SKIP};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null};Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,null));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if((nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",null)}else{element=new Element(candidate[current2],[key,current2],null,null)}worklist.push(element)}}}}};Controller.prototype.replace=function replace(root,visitor){var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP){element.ref.replace(target);element.node=target}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=VisitorKeys[nodeType];current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(!isArray(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)));continue}current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(nodeType===Syntax.ObjectExpression&&"properties"===candidates[current]){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else{element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}worklist.push(element)}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.5.1-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller})},{}],76:[function(require,module,exports){(function(){"use strict";var Regex;Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return isDecimalDigit(ch)||97<=ch&&ch<=102||65<=ch&&ch<=70}function isOctalDigit(ch){return ch>=48&&ch<=55}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}module.exports={isDecimalDigit:isDecimalDigit,isHexDigit:isHexDigit,isOctalDigit:isOctalDigit,isWhiteSpace:isWhiteSpace,isLineTerminator:isLineTerminator,isIdentifierStart:isIdentifierStart,isIdentifierPart:isIdentifierPart}})()},{}],77:[function(require,module,exports){(function(){"use strict";var code=require("./code");function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function isKeywordES5(id,strict){if(!strict&&id==="yield"){return false}return isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&isStrictModeReservedWordES6(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isIdentifierName(id){var i,iz,ch;if(id.length===0){return false}ch=id.charCodeAt(0);if(!code.isIdentifierStart(ch)||ch===92){return false}for(i=1,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(!code.isIdentifierPart(ch)||ch===92){return false
}}return true}module.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isRestrictedWord:isRestrictedWord,isIdentifierName:isIdentifierName}})()},{"./code":76}],78:[function(require,module,exports){(function(){"use strict";exports.code=require("./code");exports.keyword=require("./keyword")})()},{"./code":76,"./keyword":77}],79:[function(require,module,exports){module.exports={name:"esmangle",description:"ECMAScript code mangler / minifier",homepage:"http://github.com/Constellation/esmangle.html",main:"lib/esmangle.js",bin:{esmangle:"./bin/esmangle.js"},version:"1.0.1",engines:{node:">=0.6.0"},directories:{lib:"./lib"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"http://github.com/Constellation/esmangle.git"},dependencies:{esutils:"~ 1.0.0",esshorten:"~1.1.0",estraverse:"~1.5.0",escope:"~1.0.1","source-map":"~0.1.33",escodegen:"~1.3.2",optionator:"~0.3.0",esprima:"~1.1.1"},devDependencies:{chai:"*","grunt-contrib-jshint":"~0.8.0","grunt-mocha-test":"~0.8.1","grunt-contrib-copy":"~0.5.0","grunt-contrib-clean":"~0.5.0",async:"~0.2.9",q:"~0.9.7","commonjs-everywhere":"~0.9.4","grunt-cli":"~0.1.11",grunt:"~0.4.2","grunt-update-submodules":"~0.2.1","grunt-shell":"~0.6.1",clone:"~0.1.11"},licenses:[{type:"BSD",url:"http://github.com/Constellation/esmangle/raw/master/LICENSE.BSD"}],scripts:{test:"grunt travis",lint:"grunt lint","regression-test":"grunt test:regression","unit-test":"grunt test",build:"grunt build"},bugs:{url:"https://github.com/Constellation/esmangle/issues"},_id:"esmangle@1.0.1",dist:{shasum:"d9bb37b8f8eafbf4e6d4ed6b7aa2956abbd3c4c2",tarball:"http://registry.npmjs.org/esmangle/-/esmangle-1.0.1.tgz"},_from:"esmangle@>=1.0.1 <2.0.0",_npmVersion:"1.3.11",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},_shasum:"d9bb37b8f8eafbf4e6d4ed6b7aa2956abbd3c4c2",_resolved:"https://registry.npmjs.org/esmangle/-/esmangle-1.0.1.tgz"}},{}],80:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.esprima={})}})(this,function(exports){"use strict";var Token,TokenName,FnExprTokens,Syntax,PropertyKind,Messages,Regex,SyntaxTreeDelegate,source,strict,index,lineNumber,lineStart,length,delegate,lookahead,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";TokenName[Token.RegularExpression]="RegularExpression";FnExprTokens=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};PropertyKind={Data:1,Get:2,Set:4};Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return true;default:return false}}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isKeyword(id){if(strict&&isStrictModeReservedWord(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try"||id==="let";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function addComment(type,value,start,end,loc){var comment,attacher;assert(typeof start==="number","Comment must have valid position");if(state.lastCommentStart>=start){return}state.lastCommentStart=start;comment={type:type,value:value};if(extra.range){comment.range=[start,end]}if(extra.loc){comment.loc=loc}extra.comments.push(comment);if(extra.attachComment){extra.leadingComments.push(comment);extra.trailingComments.push(comment)}}function skipSingleLineComment(offset){var start,loc,ch,comment;start=index-offset;loc={start:{line:lineNumber,column:index-lineStart-offset}};while(index<length){ch=source.charCodeAt(index);++index;if(isLineTerminator(ch)){if(extra.comments){comment=source.slice(start+offset,index-1);loc.end={line:lineNumber,column:index-lineStart-1};addComment("Line",comment,start,index-1,loc)}if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;return}}if(extra.comments){comment=source.slice(start+offset,index);loc.end={line:lineNumber,column:index-lineStart};addComment("Line",comment,start,index,loc)}}function skipMultiLineComment(){var start,loc,ch,comment;if(extra.comments){start=index-2;loc={start:{line:lineNumber,column:index-lineStart-2}}}while(index<length){ch=source.charCodeAt(index);if(isLineTerminator(ch)){if(ch===13&&source.charCodeAt(index+1)===10){++index}++lineNumber;++index;lineStart=index;if(index>=length){throwError({},Messages.UnexpectedToken,"ILLEGAL")}}else if(ch===42){if(source.charCodeAt(index+1)===47){++index;++index;if(extra.comments){comment=source.slice(start+2,index-2);loc.end={line:lineNumber,column:index-lineStart};addComment("Block",comment,start,index,loc)}return}++index}else{++index}}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function skipComment(){var ch,start;start=index===0;while(index<length){ch=source.charCodeAt(index);if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){++index;if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;start=true}else if(ch===47){ch=source.charCodeAt(index+1);if(ch===47){++index;++index;skipSingleLineComment(2);start=true}else if(ch===42){++index;++index;skipMultiLineComment()}else{break}}else if(start&&ch===45){if(source.charCodeAt(index+1)===45&&source.charCodeAt(index+2)===62){index+=3;skipSingleLineComment(3)}else{break}}else if(ch===60){if(source.slice(index+1,index+4)==="!--"){++index;++index;++index;++index;skipSingleLineComment(4)}else{break}}else{break}}}function scanHexEscape(prefix){var i,len,ch,code=0;len=prefix==="u"?4:2;for(i=0;i<len;++i){if(index<length&&isHexDigit(source[index])){ch=source[index++];code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}else{return""}}return String.fromCharCode(code)}function getEscapedIdentifier(){var ch,id;ch=source.charCodeAt(index++);id=String.fromCharCode(ch);if(ch===92){if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierStart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id=ch}while(index<length){ch=source.charCodeAt(index);if(!isIdentifierPart(ch)){break}++index;id+=String.fromCharCode(ch);if(ch===92){id=id.substr(0,id.length-1);if(source.charCodeAt(index)!==117){throwError({},Messages.UnexpectedToken,"ILLEGAL")}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierPart(ch.charCodeAt(0))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}id+=ch}}return id}function getIdentifier(){var start,ch;start=index++;while(index<length){ch=source.charCodeAt(index);if(ch===92){index=start;return getEscapedIdentifier()}if(isIdentifierPart(ch)){++index}else{break}}return source.slice(start,index)}function scanIdentifier(){var start,id,type;start=index;id=source.charCodeAt(index)===92?getEscapedIdentifier():getIdentifier();if(id.length===1){type=Token.Identifier}else if(isKeyword(id)){type=Token.Keyword}else if(id==="null"){type=Token.NullLiteral}else if(id==="true"||id==="false"){type=Token.BooleanLiteral}else{type=Token.Identifier}return{type:type,value:id,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanPunctuator(){var start=index,code=source.charCodeAt(index),code2,ch1=source[index],ch2,ch3,ch4;switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++index;if(extra.tokenize){if(code===40){extra.openParenToken=extra.tokens.length}else if(code===123){extra.openCurlyToken=extra.tokens.length}}return{type:Token.Punctuator,value:String.fromCharCode(code),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};default:code2=source.charCodeAt(index+1);if(code2===61){switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:index+=2;return{type:Token.Punctuator,value:String.fromCharCode(code)+String.fromCharCode(code2),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index};case 33:case 61:index+=2;if(source.charCodeAt(index)===61){++index}return{type:Token.Punctuator,value:source.slice(start,index),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}}}ch4=source.substr(index,4);if(ch4===">>>="){index+=4;return{type:Token.Punctuator,value:ch4,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch3=ch4.substr(0,3);if(ch3===">>>"||ch3==="<<="||ch3===">>="){index+=3;return{type:Token.Punctuator,value:ch3,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}ch2=ch3.substr(0,2);if(ch1===ch2[1]&&"+-<>&|".indexOf(ch1)>=0||ch2==="=>"){index+=2;return{type:Token.Punctuator,value:ch2,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}if("<>=!+-*%&|^/".indexOf(ch1)>=0){++index;return{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}throwError({},Messages.UnexpectedToken,"ILLEGAL")}function scanHexLiteral(start){var number="";while(index<length){if(!isHexDigit(source[index])){break}number+=source[index++]}if(number.length===0){throwError({},Messages.UnexpectedToken,"ILLEGAL")}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt("0x"+number,16),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanOctalLiteral(start){var number="0"+source[index++];while(index<length){if(!isOctalDigit(source[index])){break}number+=source[index++]}if(isIdentifierStart(source.charCodeAt(index))||isDecimalDigit(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseInt(number,8),octal:true,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function isImplicitOctalLiteral(){var i,ch;for(i=index+1;i<length;++i){ch=source[i];if(ch==="8"||ch==="9"){return false}if(!isOctalDigit(ch)){return true}}return true}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=source[index++];ch=source[index];if(number==="0"){if(ch==="x"||ch==="X"){++index;return scanHexLiteral(start)}if(isOctalDigit(ch)){if(isImplicitOctalLiteral()){return scanOctalLiteral(start)}}}while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="."){number+=source[index++];while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="e"||ch==="E"){number+=source[index++];ch=source[index];if(ch==="+"||ch==="-"){number+=source[index++]}if(isDecimalDigit(source.charCodeAt(index))){while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}}else{throwError({},Messages.UnexpectedToken,"ILLEGAL")}}if(isIdentifierStart(source.charCodeAt(index))){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanStringLiteral(){var str="",quote,start,ch,code,unescaped,restore,octal=false,startLineNumber,startLineStart;startLineNumber=lineNumber;startLineStart=lineStart;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=source[index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=source[index++];if(!ch||!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"u":case"x":restore=index;unescaped=scanHexEscape(ch);if(unescaped){str+=unescaped}else{index=restore;str+=ch}break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;default:if(isOctalDigit(ch)){code="01234567".indexOf(ch);if(code!==0){octal=true}if(index<length&&isOctalDigit(source[index])){octal=true;code=code*8+"01234567".indexOf(source[index++]);if("0123".indexOf(ch)>=0&&index<length&&isOctalDigit(source[index])){code=code*8+"01234567".indexOf(source[index++])}}str+=String.fromCharCode(code)}else{str+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index}}else if(isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){throwError({},Messages.UnexpectedToken,"ILLEGAL")}return{type:Token.StringLiteral,value:str,octal:octal,startLineNumber:startLineNumber,startLineStart:startLineStart,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function testRegExp(pattern,flags){var value;try{value=new RegExp(pattern,flags)}catch(e){throwError({},Messages.InvalidRegExp)}return value}function scanRegExpBody(){var ch,str,classMarker,terminated,body;ch=source[index];assert(ch==="/","Regular expression literal must start with a slash");str=source[index++];classMarker=false;terminated=false;while(index<length){ch=source[index++];str+=ch;if(ch==="\\"){ch=source[index++];if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}str+=ch}else if(isLineTerminator(ch.charCodeAt(0))){throwError({},Messages.UnterminatedRegExp)}else if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="/"){terminated=true;break}else if(ch==="["){classMarker=true}}}if(!terminated){throwError({},Messages.UnterminatedRegExp)}body=str.substr(1,str.length-2);return{value:body,literal:str}}function scanRegExpFlags(){var ch,str,flags,restore;str="";flags="";while(index<length){ch=source[index];if(!isIdentifierPart(ch.charCodeAt(0))){break}++index;if(ch==="\\"&&index<length){ch=source[index];if(ch==="u"){++index;restore=index;ch=scanHexEscape("u");if(ch){flags+=ch;for(str+="\\u";restore<index;++restore){str+=source[restore]}}else{index=restore;flags+="u";str+="\\u"}throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}else{str+="\\";throwErrorTolerant({},Messages.UnexpectedToken,"ILLEGAL")}}else{flags+=ch;str+=ch}}return{value:flags,literal:str}}function scanRegExp(){var start,body,flags,pattern,value;lookahead=null;skipComment();start=index;body=scanRegExpBody();flags=scanRegExpFlags();value=testRegExp(body.value,flags.value);if(extra.tokenize){return{type:Token.RegularExpression,value:value,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}return{literal:body.literal+flags.literal,value:value,start:start,end:index}}function collectRegex(){var pos,loc,regex,token;skipComment();pos=index;loc={start:{line:lineNumber,column:index-lineStart}};regex=scanRegExp();loc.end={line:lineNumber,column:index-lineStart};if(!extra.tokenize){if(extra.tokens.length>0){token=extra.tokens[extra.tokens.length-1];if(token.range[0]===pos&&token.type==="Punctuator"){if(token.value==="/"||token.value==="/="){extra.tokens.pop()}}}extra.tokens.push({type:"RegularExpression",value:regex.literal,range:[pos,index],loc:loc})}return regex}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advanceSlash(){var prevToken,checkToken;prevToken=extra.tokens[extra.tokens.length-1];if(!prevToken){return collectRegex()}if(prevToken.type==="Punctuator"){if(prevToken.value==="]"){return scanPunctuator()}if(prevToken.value===")"){checkToken=extra.tokens[extra.openParenToken-1];if(checkToken&&checkToken.type==="Keyword"&&(checkToken.value==="if"||checkToken.value==="while"||checkToken.value==="for"||checkToken.value==="with")){return collectRegex()}return scanPunctuator()}if(prevToken.value==="}"){if(extra.tokens[extra.openCurlyToken-3]&&extra.tokens[extra.openCurlyToken-3].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-4];if(!checkToken){return scanPunctuator()}}else if(extra.tokens[extra.openCurlyToken-4]&&extra.tokens[extra.openCurlyToken-4].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-5];if(!checkToken){return collectRegex()}}else{return scanPunctuator()}if(FnExprTokens.indexOf(checkToken.value)>=0){return scanPunctuator()}return collectRegex()}return collectRegex()}if(prevToken.type==="Keyword"&&prevToken.value!=="this"){return collectRegex()}return scanPunctuator()}function advance(){var ch;skipComment();if(index>=length){return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,start:index,end:index}}ch=source.charCodeAt(index);if(isIdentifierStart(ch)){return scanIdentifier()}if(ch===40||ch===41||ch===59){return scanPunctuator()}if(ch===39||ch===34){return scanStringLiteral()}if(ch===46){if(isDecimalDigit(source.charCodeAt(index+1))){return scanNumericLiteral()}return scanPunctuator()}if(isDecimalDigit(ch)){return scanNumericLiteral()}if(extra.tokenize&&ch===47){return advanceSlash()}return scanPunctuator()}function collectToken(){var loc,token,range,value;skipComment();loc={start:{line:lineNumber,column:index-lineStart}};token=advance();loc.end={line:lineNumber,column:index-lineStart};if(token.type!==Token.EOF){value=source.slice(token.start,token.end);extra.tokens.push({type:TokenName[token.type],value:value,range:[token.start,token.end],loc:loc})}return token}function lex(){var token;token=lookahead;index=token.end;
lineNumber=token.lineNumber;lineStart=token.lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=token.end;lineNumber=token.lineNumber;lineStart=token.lineStart;return token}function peek(){var pos,line,start;pos=index;line=lineNumber;start=lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();index=pos;lineNumber=line;lineStart=start}function Position(line,column){this.line=line;this.column=column}function SourceLocation(startLine,startColumn,line,column){this.start=new Position(startLine,startColumn);this.end=new Position(line,column)}SyntaxTreeDelegate={name:"SyntaxTree",processComment:function(node){var lastChild,trailingComments;if(node.type===Syntax.Program){if(node.body.length>0){return}}if(extra.trailingComments.length>0){if(extra.trailingComments[0].range[0]>=node.range[1]){trailingComments=extra.trailingComments;extra.trailingComments=[]}else{extra.trailingComments.length=0}}else{if(extra.bottomRightStack.length>0&&extra.bottomRightStack[extra.bottomRightStack.length-1].trailingComments&&extra.bottomRightStack[extra.bottomRightStack.length-1].trailingComments[0].range[0]>=node.range[1]){trailingComments=extra.bottomRightStack[extra.bottomRightStack.length-1].trailingComments;delete extra.bottomRightStack[extra.bottomRightStack.length-1].trailingComments}}while(extra.bottomRightStack.length>0&&extra.bottomRightStack[extra.bottomRightStack.length-1].range[0]>=node.range[0]){lastChild=extra.bottomRightStack.pop()}if(lastChild){if(lastChild.leadingComments&&lastChild.leadingComments[lastChild.leadingComments.length-1].range[1]<=node.range[0]){node.leadingComments=lastChild.leadingComments;delete lastChild.leadingComments}}else if(extra.leadingComments.length>0&&extra.leadingComments[extra.leadingComments.length-1].range[1]<=node.range[0]){node.leadingComments=extra.leadingComments;extra.leadingComments=[]}if(trailingComments){node.trailingComments=trailingComments}extra.bottomRightStack.push(node)},markEnd:function(node,startToken){if(extra.range){node.range=[startToken.start,index]}if(extra.loc){node.loc=new SourceLocation(startToken.startLineNumber===undefined?startToken.lineNumber:startToken.startLineNumber,startToken.start-(startToken.startLineStart===undefined?startToken.lineStart:startToken.startLineStart),lineNumber,index-lineStart);this.postProcess(node)}if(extra.attachComment){this.processComment(node)}return node},postProcess:function(node){if(extra.source){node.loc.source=extra.source}return node},createArrayExpression:function(elements){return{type:Syntax.ArrayExpression,elements:elements}},createAssignmentExpression:function(operator,left,right){return{type:Syntax.AssignmentExpression,operator:operator,left:left,right:right}},createBinaryExpression:function(operator,left,right){var type=operator==="||"||operator==="&&"?Syntax.LogicalExpression:Syntax.BinaryExpression;return{type:type,operator:operator,left:left,right:right}},createBlockStatement:function(body){return{type:Syntax.BlockStatement,body:body}},createBreakStatement:function(label){return{type:Syntax.BreakStatement,label:label}},createCallExpression:function(callee,args){return{type:Syntax.CallExpression,callee:callee,arguments:args}},createCatchClause:function(param,body){return{type:Syntax.CatchClause,param:param,body:body}},createConditionalExpression:function(test,consequent,alternate){return{type:Syntax.ConditionalExpression,test:test,consequent:consequent,alternate:alternate}},createContinueStatement:function(label){return{type:Syntax.ContinueStatement,label:label}},createDebuggerStatement:function(){return{type:Syntax.DebuggerStatement}},createDoWhileStatement:function(body,test){return{type:Syntax.DoWhileStatement,body:body,test:test}},createEmptyStatement:function(){return{type:Syntax.EmptyStatement}},createExpressionStatement:function(expression){return{type:Syntax.ExpressionStatement,expression:expression}},createForStatement:function(init,test,update,body){return{type:Syntax.ForStatement,init:init,test:test,update:update,body:body}},createForInStatement:function(left,right,body){return{type:Syntax.ForInStatement,left:left,right:right,body:body,each:false}},createFunctionDeclaration:function(id,params,defaults,body){return{type:Syntax.FunctionDeclaration,id:id,params:params,defaults:defaults,body:body,rest:null,generator:false,expression:false}},createFunctionExpression:function(id,params,defaults,body){return{type:Syntax.FunctionExpression,id:id,params:params,defaults:defaults,body:body,rest:null,generator:false,expression:false}},createIdentifier:function(name){return{type:Syntax.Identifier,name:name}},createIfStatement:function(test,consequent,alternate){return{type:Syntax.IfStatement,test:test,consequent:consequent,alternate:alternate}},createLabeledStatement:function(label,body){return{type:Syntax.LabeledStatement,label:label,body:body}},createLiteral:function(token){return{type:Syntax.Literal,value:token.value,raw:source.slice(token.start,token.end)}},createMemberExpression:function(accessor,object,property){return{type:Syntax.MemberExpression,computed:accessor==="[",object:object,property:property}},createNewExpression:function(callee,args){return{type:Syntax.NewExpression,callee:callee,arguments:args}},createObjectExpression:function(properties){return{type:Syntax.ObjectExpression,properties:properties}},createPostfixExpression:function(operator,argument){return{type:Syntax.UpdateExpression,operator:operator,argument:argument,prefix:false}},createProgram:function(body){return{type:Syntax.Program,body:body}},createProperty:function(kind,key,value){return{type:Syntax.Property,key:key,value:value,kind:kind}},createReturnStatement:function(argument){return{type:Syntax.ReturnStatement,argument:argument}},createSequenceExpression:function(expressions){return{type:Syntax.SequenceExpression,expressions:expressions}},createSwitchCase:function(test,consequent){return{type:Syntax.SwitchCase,test:test,consequent:consequent}},createSwitchStatement:function(discriminant,cases){return{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}},createThisExpression:function(){return{type:Syntax.ThisExpression}},createThrowStatement:function(argument){return{type:Syntax.ThrowStatement,argument:argument}},createTryStatement:function(block,guardedHandlers,handlers,finalizer){return{type:Syntax.TryStatement,block:block,guardedHandlers:guardedHandlers,handlers:handlers,finalizer:finalizer}},createUnaryExpression:function(operator,argument){if(operator==="++"||operator==="--"){return{type:Syntax.UpdateExpression,operator:operator,argument:argument,prefix:true}}return{type:Syntax.UnaryExpression,operator:operator,argument:argument,prefix:true}},createVariableDeclaration:function(declarations,kind){return{type:Syntax.VariableDeclaration,declarations:declarations,kind:kind}},createVariableDeclarator:function(id,init){return{type:Syntax.VariableDeclarator,id:id,init:init}},createWhileStatement:function(test,body){return{type:Syntax.WhileStatement,test:test,body:body}},createWithStatement:function(object,body){return{type:Syntax.WithStatement,object:object,body:body}}};function peekLineTerminator(){var pos,line,start,found;pos=index;line=lineNumber;start=lineStart;skipComment();found=lineNumber!==line;index=pos;lineNumber=line;lineStart=start;return found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){assert(index<args.length,"Message reference must be in range");return args[index]});if(typeof token.lineNumber==="number"){error=new Error("Line "+token.lineNumber+": "+msg);error.index=token.start;error.lineNumber=token.lineNumber;error.column=token.start-lineStart+1}else{error=new Error("Line "+lineNumber+": "+msg);error.index=index;error.lineNumber=lineNumber;error.column=index-lineStart+1}error.description=msg;throw error}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(extra.errors){extra.errors.push(e)}else{throw e}}}function throwUnexpected(token){if(token.type===Token.EOF){throwError(token,Messages.UnexpectedEOS)}if(token.type===Token.NumericLiteral){throwError(token,Messages.UnexpectedNumber)}if(token.type===Token.StringLiteral){throwError(token,Messages.UnexpectedString)}if(token.type===Token.Identifier){throwError(token,Messages.UnexpectedIdentifier)}if(token.type===Token.Keyword){if(isFutureReservedWord(token.value)){throwError(token,Messages.UnexpectedReserved)}else if(strict&&isStrictModeReservedWord(token.value)){throwErrorTolerant(token,Messages.StrictReservedWord);return}throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpected(token)}}function expectKeyword(keyword){var token=lex();if(token.type!==Token.Keyword||token.value!==keyword){throwUnexpected(token)}}function match(value){return lookahead.type===Token.Punctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===Token.Keyword&&lookahead.value===keyword}function matchAssign(){var op;if(lookahead.type!==Token.Punctuator){return false}op=lookahead.value;return op==="="||op==="*="||op==="/="||op==="%="||op==="+="||op==="-="||op==="<<="||op===">>="||op===">>>="||op==="&="||op==="^="||op==="|="}function consumeSemicolon(){var line,oldIndex=index,oldLineNumber=lineNumber,oldLineStart=lineStart,oldLookahead=lookahead;if(source.charCodeAt(index)===59||match(";")){lex();return}line=lineNumber;skipComment();if(lineNumber!==line){index=oldIndex;lineNumber=oldLineNumber;lineStart=oldLineStart;lookahead=oldLookahead;return}if(lookahead.type!==Token.EOF&&!match("}")){throwUnexpected(lookahead)}}function isLeftHandSide(expr){return expr.type===Syntax.Identifier||expr.type===Syntax.MemberExpression}function parseArrayInitialiser(){var elements=[],startToken;startToken=lookahead;expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else{elements.push(parseAssignmentExpression());if(!match("]")){expect(",")}}}lex();return delegate.markEnd(delegate.createArrayExpression(elements),startToken)}function parsePropertyFunction(param,first){var previousStrict,body,startToken;previousStrict=strict;startToken=lookahead;body=parseFunctionSourceElements();if(first&&strict&&isRestrictedWord(param[0].name)){throwErrorTolerant(first,Messages.StrictParamName)}strict=previousStrict;return delegate.markEnd(delegate.createFunctionExpression(null,param,[],body),startToken)}function parseObjectPropertyKey(){var token,startToken;startToken=lookahead;token=lex();if(token.type===Token.StringLiteral||token.type===Token.NumericLiteral){if(strict&&token.octal){throwErrorTolerant(token,Messages.StrictOctalLiteral)}return delegate.markEnd(delegate.createLiteral(token),startToken)}return delegate.markEnd(delegate.createIdentifier(token.value),startToken)}function parseObjectProperty(){var token,key,id,value,param,startToken;token=lookahead;startToken=lookahead;if(token.type===Token.Identifier){id=parseObjectPropertyKey();if(token.value==="get"&&!match(":")){key=parseObjectPropertyKey();expect("(");expect(")");value=parsePropertyFunction([]);return delegate.markEnd(delegate.createProperty("get",key,value),startToken)}if(token.value==="set"&&!match(":")){key=parseObjectPropertyKey();expect("(");token=lookahead;if(token.type!==Token.Identifier){expect(")");throwErrorTolerant(token,Messages.UnexpectedToken,token.value);value=parsePropertyFunction([])}else{param=[parseVariableIdentifier()];expect(")");value=parsePropertyFunction(param,token)}return delegate.markEnd(delegate.createProperty("set",key,value),startToken)}expect(":");value=parseAssignmentExpression();return delegate.markEnd(delegate.createProperty("init",id,value),startToken)}if(token.type===Token.EOF||token.type===Token.Punctuator){throwUnexpected(token)}else{key=parseObjectPropertyKey();expect(":");value=parseAssignmentExpression();return delegate.markEnd(delegate.createProperty("init",key,value),startToken)}}function parseObjectInitialiser(){var properties=[],property,name,key,kind,map={},toString=String,startToken;startToken=lookahead;expect("{");while(!match("}")){property=parseObjectProperty();if(property.key.type===Syntax.Identifier){name=property.key.name}else{name=toString(property.key.value)}kind=property.kind==="init"?PropertyKind.Data:property.kind==="get"?PropertyKind.Get:PropertyKind.Set;key="$"+name;if(Object.prototype.hasOwnProperty.call(map,key)){if(map[key]===PropertyKind.Data){if(strict&&kind===PropertyKind.Data){throwErrorTolerant({},Messages.StrictDuplicateProperty)}else if(kind!==PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}}else{if(kind===PropertyKind.Data){throwErrorTolerant({},Messages.AccessorDataProperty)}else if(map[key]&kind){throwErrorTolerant({},Messages.AccessorGetSet)}}map[key]|=kind}else{map[key]=kind}properties.push(property);if(!match("}")){expect(",")}}expect("}");return delegate.markEnd(delegate.createObjectExpression(properties),startToken)}function parseGroupExpression(){var expr;expect("(");expr=parseExpression();expect(")");return expr}function parsePrimaryExpression(){var type,token,expr,startToken;if(match("(")){return parseGroupExpression()}if(match("[")){return parseArrayInitialiser()}if(match("{")){return parseObjectInitialiser()}type=lookahead.type;startToken=lookahead;if(type===Token.Identifier){expr=delegate.createIdentifier(lex().value)}else if(type===Token.StringLiteral||type===Token.NumericLiteral){if(strict&&lookahead.octal){throwErrorTolerant(lookahead,Messages.StrictOctalLiteral)}expr=delegate.createLiteral(lex())}else if(type===Token.Keyword){if(matchKeyword("function")){return parseFunctionExpression()}if(matchKeyword("this")){lex();expr=delegate.createThisExpression()}else{throwUnexpected(lex())}}else if(type===Token.BooleanLiteral){token=lex();token.value=token.value==="true";expr=delegate.createLiteral(token)}else if(type===Token.NullLiteral){token=lex();token.value=null;expr=delegate.createLiteral(token)}else if(match("/")||match("/=")){if(typeof extra.tokens!=="undefined"){expr=delegate.createLiteral(collectRegex())}else{expr=delegate.createLiteral(scanRegExp())}peek()}else{throwUnexpected(lex())}return delegate.markEnd(expr,startToken)}function parseArguments(){var args=[];expect("(");if(!match(")")){while(index<length){args.push(parseAssignmentExpression());if(match(")")){break}expect(",")}}expect(")");return args}function parseNonComputedProperty(){var token,startToken;startToken=lookahead;token=lex();if(!isIdentifierName(token)){throwUnexpected(token)}return delegate.markEnd(delegate.createIdentifier(token.value),startToken)}function parseNonComputedMember(){expect(".");return parseNonComputedProperty()}function parseComputedMember(){var expr;expect("[");expr=parseExpression();expect("]");return expr}function parseNewExpression(){var callee,args,startToken;startToken=lookahead;expectKeyword("new");callee=parseLeftHandSideExpression();args=match("(")?parseArguments():[];return delegate.markEnd(delegate.createNewExpression(callee,args),startToken)}function parseLeftHandSideExpressionAllowCall(){var expr,args,property,startToken,previousAllowIn=state.allowIn;startToken=lookahead;state.allowIn=true;expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();for(;;){if(match(".")){property=parseNonComputedMember();expr=delegate.createMemberExpression(".",expr,property)}else if(match("(")){args=parseArguments();expr=delegate.createCallExpression(expr,args)}else if(match("[")){property=parseComputedMember();expr=delegate.createMemberExpression("[",expr,property)}else{break}delegate.markEnd(expr,startToken)}state.allowIn=previousAllowIn;return expr}function parseLeftHandSideExpression(){var expr,property,startToken;assert(state.allowIn,"callee of new expression always allow in keyword.");startToken=lookahead;expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();while(match(".")||match("[")){if(match("[")){property=parseComputedMember();expr=delegate.createMemberExpression("[",expr,property)}else{property=parseNonComputedMember();expr=delegate.createMemberExpression(".",expr,property)}delegate.markEnd(expr,startToken)}return expr}function parsePostfixExpression(){var expr,token,startToken=lookahead;expr=parseLeftHandSideExpressionAllowCall();if(lookahead.type===Token.Punctuator){if((match("++")||match("--"))&&!peekLineTerminator()){if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){throwErrorTolerant({},Messages.StrictLHSPostfix)}if(!isLeftHandSide(expr)){throwErrorTolerant({},Messages.InvalidLHSInAssignment)}token=lex();expr=delegate.markEnd(delegate.createPostfixExpression(token.value,expr),startToken)}}return expr}function parseUnaryExpression(){var token,expr,startToken;if(lookahead.type!==Token.Punctuator&&lookahead.type!==Token.Keyword){expr=parsePostfixExpression()}else if(match("++")||match("--")){startToken=lookahead;token=lex();expr=parseUnaryExpression();if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){throwErrorTolerant({},Messages.StrictLHSPrefix)}if(!isLeftHandSide(expr)){throwErrorTolerant({},Messages.InvalidLHSInAssignment)}expr=delegate.createUnaryExpression(token.value,expr);expr=delegate.markEnd(expr,startToken)}else if(match("+")||match("-")||match("~")||match("!")){startToken=lookahead;token=lex();expr=parseUnaryExpression();expr=delegate.createUnaryExpression(token.value,expr);expr=delegate.markEnd(expr,startToken)}else if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){startToken=lookahead;token=lex();expr=parseUnaryExpression();expr=delegate.createUnaryExpression(token.value,expr);expr=delegate.markEnd(expr,startToken);if(strict&&expr.operator==="delete"&&expr.argument.type===Syntax.Identifier){throwErrorTolerant({},Messages.StrictDelete)}}else{expr=parsePostfixExpression()}return expr}function binaryPrecedence(token,allowIn){var prec=0;if(token.type!==Token.Punctuator&&token.type!==Token.Keyword){return 0}switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":prec=7;break;case"in":prec=allowIn?7:0;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11;break;default:break}return prec}function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;marker=lookahead;left=parseUnaryExpression();token=lookahead;prec=binaryPrecedence(token,state.allowIn);if(prec===0){return left}token.prec=prec;lex();markers=[marker,lookahead];right=parseUnaryExpression();stack=[left,token,right];while((prec=binaryPrecedence(lookahead,state.allowIn))>0){while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();operator=stack.pop().value;left=stack.pop();expr=delegate.createBinaryExpression(operator,left,right);markers.pop();marker=markers[markers.length-1];delegate.markEnd(expr,marker);stack.push(expr)}token=lex();token.prec=prec;stack.push(token);markers.push(lookahead);expr=parseUnaryExpression();stack.push(expr)}i=stack.length-1;expr=stack[i];markers.pop();while(i>1){expr=delegate.createBinaryExpression(stack[i-1].value,stack[i-2],expr);i-=2;marker=markers.pop();delegate.markEnd(expr,marker)}return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent,alternate,startToken;startToken=lookahead;expr=parseBinaryExpression();if(match("?")){lex();previousAllowIn=state.allowIn;state.allowIn=true;consequent=parseAssignmentExpression();state.allowIn=previousAllowIn;expect(":");alternate=parseAssignmentExpression();expr=delegate.createConditionalExpression(expr,consequent,alternate);delegate.markEnd(expr,startToken)}return expr}function parseAssignmentExpression(){var token,left,right,node,startToken;token=lookahead;startToken=lookahead;node=left=parseConditionalExpression();if(matchAssign()){if(!isLeftHandSide(left)){throwErrorTolerant({},Messages.InvalidLHSInAssignment)}if(strict&&left.type===Syntax.Identifier&&isRestrictedWord(left.name)){throwErrorTolerant(token,Messages.StrictLHSAssignment)}token=lex();right=parseAssignmentExpression();node=delegate.markEnd(delegate.createAssignmentExpression(token.value,left,right),startToken)}return node}function parseExpression(){var expr,startToken=lookahead;expr=parseAssignmentExpression();if(match(",")){expr=delegate.createSequenceExpression([expr]);while(index<length){if(!match(",")){break}lex();expr.expressions.push(parseAssignmentExpression())}delegate.markEnd(expr,startToken)}return expr}function parseStatementList(){var list=[],statement;while(index<length){if(match("}")){break}statement=parseSourceElement();if(typeof statement==="undefined"){break}list.push(statement)}return list}function parseBlock(){var block,startToken;startToken=lookahead;expect("{");block=parseStatementList();expect("}");return delegate.markEnd(delegate.createBlockStatement(block),startToken)}function parseVariableIdentifier(){var token,startToken;startToken=lookahead;token=lex();if(token.type!==Token.Identifier){throwUnexpected(token)}return delegate.markEnd(delegate.createIdentifier(token.value),startToken)}function parseVariableDeclaration(kind){var init=null,id,startToken;startToken=lookahead;id=parseVariableIdentifier();if(strict&&isRestrictedWord(id.name)){throwErrorTolerant({},Messages.StrictVarName)}if(kind==="const"){expect("=");init=parseAssignmentExpression()}else if(match("=")){lex();init=parseAssignmentExpression()}return delegate.markEnd(delegate.createVariableDeclarator(id,init),startToken)}function parseVariableDeclarationList(kind){var list=[];do{list.push(parseVariableDeclaration(kind));if(!match(",")){break}lex()}while(index<length);return list}function parseVariableStatement(){var declarations;expectKeyword("var");declarations=parseVariableDeclarationList();consumeSemicolon();return delegate.createVariableDeclaration(declarations,"var")}function parseConstLetDeclaration(kind){var declarations,startToken;startToken=lookahead;expectKeyword(kind);declarations=parseVariableDeclarationList(kind);consumeSemicolon();return delegate.markEnd(delegate.createVariableDeclaration(declarations,kind),startToken)}function parseEmptyStatement(){expect(";");return delegate.createEmptyStatement()}function parseExpressionStatement(){var expr=parseExpression();consumeSemicolon();return delegate.createExpressionStatement(expr)}function parseIfStatement(){var test,consequent,alternate;expectKeyword("if");expect("(");test=parseExpression();expect(")");consequent=parseStatement();if(matchKeyword("else")){lex();alternate=parseStatement()}else{alternate=null}return delegate.createIfStatement(test,consequent,alternate)}function parseDoWhileStatement(){var body,test,oldInIteration;expectKeyword("do");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");if(match(";")){lex()}return delegate.createDoWhileStatement(body,test)}function parseWhileStatement(){var test,body,oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;return delegate.createWhileStatement(test,body)}function parseForVariableDeclaration(){var token,declarations,startToken;startToken=lookahead;token=lex();declarations=parseVariableDeclarationList();return delegate.markEnd(delegate.createVariableDeclaration(declarations,token.value),startToken)}function parseForStatement(){var init,test,update,left,right,body,oldInIteration,previousAllowIn=state.allowIn;init=test=update=null;expectKeyword("for");expect("(");if(match(";")){lex()}else{if(matchKeyword("var")||matchKeyword("let")){state.allowIn=false;init=parseForVariableDeclaration();state.allowIn=previousAllowIn;if(init.declarations.length===1&&matchKeyword("in")){lex();left=init;right=parseExpression();init=null}}else{state.allowIn=false;init=parseExpression();state.allowIn=previousAllowIn;if(matchKeyword("in")){if(!isLeftHandSide(init)){throwErrorTolerant({},Messages.InvalidLHSInForIn)}lex();left=init;right=parseExpression();init=null}}if(typeof left==="undefined"){expect(";")}}if(typeof left==="undefined"){if(!match(";")){test=parseExpression()}expect(";");if(!match(")")){update=parseExpression()}}expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;return typeof left==="undefined"?delegate.createForStatement(init,test,update,body):delegate.createForInStatement(left,right,body)}function parseContinueStatement(){var label=null,key;expectKeyword("continue");if(source.charCodeAt(index)===59){lex();if(!state.inIteration){throwError({},Messages.IllegalContinue)}return delegate.createContinueStatement(null)}if(peekLineTerminator()){if(!state.inIteration){throwError({},Messages.IllegalContinue)}return delegate.createContinueStatement(null)}if(lookahead.type===Token.Identifier){label=parseVariableIdentifier();key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError({},Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!state.inIteration){throwError({},Messages.IllegalContinue)}return delegate.createContinueStatement(label)}function parseBreakStatement(){var label=null,key;expectKeyword("break");if(source.charCodeAt(index)===59){lex();if(!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return delegate.createBreakStatement(null)}if(peekLineTerminator()){if(!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return delegate.createBreakStatement(null)}if(lookahead.type===Token.Identifier){label=parseVariableIdentifier();key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError({},Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!(state.inIteration||state.inSwitch)){throwError({},Messages.IllegalBreak)}return delegate.createBreakStatement(label)}function parseReturnStatement(){var argument=null;expectKeyword("return");if(!state.inFunctionBody){throwErrorTolerant({},Messages.IllegalReturn)}if(source.charCodeAt(index)===32){if(isIdentifierStart(source.charCodeAt(index+1))){argument=parseExpression();consumeSemicolon();return delegate.createReturnStatement(argument)}}if(peekLineTerminator()){return delegate.createReturnStatement(null)}if(!match(";")){if(!match("}")&&lookahead.type!==Token.EOF){argument=parseExpression()}}consumeSemicolon();return delegate.createReturnStatement(argument)}function parseWithStatement(){var object,body;if(strict){skipComment();throwErrorTolerant({},Messages.StrictModeWith)}expectKeyword("with");expect("(");object=parseExpression();expect(")");body=parseStatement();return delegate.createWithStatement(object,body)}function parseSwitchCase(){var test,consequent=[],statement,startToken;startToken=lookahead;if(matchKeyword("default")){lex();test=null}else{expectKeyword("case");test=parseExpression()}expect(":");while(index<length){if(match("}")||matchKeyword("default")||matchKeyword("case")){break}statement=parseStatement();consequent.push(statement)}return delegate.markEnd(delegate.createSwitchCase(test,consequent),startToken)}function parseSwitchStatement(){var discriminant,cases,clause,oldInSwitch,defaultFound;expectKeyword("switch");expect("(");discriminant=parseExpression();expect(")");expect("{");cases=[];if(match("}")){lex();return delegate.createSwitchStatement(discriminant,cases)}oldInSwitch=state.inSwitch;state.inSwitch=true;defaultFound=false;while(index<length){if(match("}")){break}clause=parseSwitchCase();if(clause.test===null){if(defaultFound){throwError({},Messages.MultipleDefaultsInSwitch)}defaultFound=true}cases.push(clause)}state.inSwitch=oldInSwitch;expect("}");return delegate.createSwitchStatement(discriminant,cases)}function parseThrowStatement(){var argument;expectKeyword("throw");if(peekLineTerminator()){throwError({},Messages.NewlineAfterThrow)}argument=parseExpression();consumeSemicolon();return delegate.createThrowStatement(argument)}function parseCatchClause(){var param,body,startToken;startToken=lookahead;expectKeyword("catch");expect("(");if(match(")")){throwUnexpected(lookahead)}param=parseVariableIdentifier();if(strict&&isRestrictedWord(param.name)){throwErrorTolerant({},Messages.StrictCatchVariable)}expect(")");body=parseBlock();return delegate.markEnd(delegate.createCatchClause(param,body),startToken)}function parseTryStatement(){var block,handlers=[],finalizer=null;expectKeyword("try");block=parseBlock();if(matchKeyword("catch")){handlers.push(parseCatchClause())}if(matchKeyword("finally")){lex();finalizer=parseBlock()}if(handlers.length===0&&!finalizer){throwError({},Messages.NoCatchOrFinally)}return delegate.createTryStatement(block,[],handlers,finalizer)}function parseDebuggerStatement(){expectKeyword("debugger");consumeSemicolon();return delegate.createDebuggerStatement()}function parseStatement(){var type=lookahead.type,expr,labeledBody,key,startToken;if(type===Token.EOF){throwUnexpected(lookahead)}if(type===Token.Punctuator&&lookahead.value==="{"){return parseBlock()}startToken=lookahead;if(type===Token.Punctuator){switch(lookahead.value){case";":return delegate.markEnd(parseEmptyStatement(),startToken);case"(":return delegate.markEnd(parseExpressionStatement(),startToken);default:break}}if(type===Token.Keyword){switch(lookahead.value){case"break":return delegate.markEnd(parseBreakStatement(),startToken);case"continue":return delegate.markEnd(parseContinueStatement(),startToken);case"debugger":return delegate.markEnd(parseDebuggerStatement(),startToken);case"do":return delegate.markEnd(parseDoWhileStatement(),startToken);case"for":return delegate.markEnd(parseForStatement(),startToken);case"function":return delegate.markEnd(parseFunctionDeclaration(),startToken);case"if":return delegate.markEnd(parseIfStatement(),startToken);case"return":return delegate.markEnd(parseReturnStatement(),startToken);case"switch":return delegate.markEnd(parseSwitchStatement(),startToken);case"throw":return delegate.markEnd(parseThrowStatement(),startToken);case"try":return delegate.markEnd(parseTryStatement(),startToken);case"var":return delegate.markEnd(parseVariableStatement(),startToken);case"while":return delegate.markEnd(parseWhileStatement(),startToken);case"with":return delegate.markEnd(parseWithStatement(),startToken);default:break}}expr=parseExpression();if(expr.type===Syntax.Identifier&&match(":")){lex();key="$"+expr.name;if(Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError({},Messages.Redeclaration,"Label",expr.name)}state.labelSet[key]=true;labeledBody=parseStatement();delete state.labelSet[key];return delegate.markEnd(delegate.createLabeledStatement(expr,labeledBody),startToken)}consumeSemicolon();return delegate.markEnd(delegate.createExpressionStatement(expr),startToken)}function parseFunctionSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody,startToken;startToken=lookahead;expect("{");while(index<length){if(lookahead.type!==Token.StringLiteral){break}token=lookahead;sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}oldLabelSet=state.labelSet;oldInIteration=state.inIteration;oldInSwitch=state.inSwitch;oldInFunctionBody=state.inFunctionBody;state.labelSet={};state.inIteration=false;state.inSwitch=false;
state.inFunctionBody=true;while(index<length){if(match("}")){break}sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}expect("}");state.labelSet=oldLabelSet;state.inIteration=oldInIteration;state.inSwitch=oldInSwitch;state.inFunctionBody=oldInFunctionBody;return delegate.markEnd(delegate.createBlockStatement(sourceElements),startToken)}function parseParams(firstRestricted){var param,params=[],token,stricted,paramSet,key,message;expect("(");if(!match(")")){paramSet={};while(index<length){token=lookahead;param=parseVariableIdentifier();key="$"+token.value;if(strict){if(isRestrictedWord(token.value)){stricted=token;message=Messages.StrictParamName}if(Object.prototype.hasOwnProperty.call(paramSet,key)){stricted=token;message=Messages.StrictParamDupe}}else if(!firstRestricted){if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictParamName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(paramSet,key)){firstRestricted=token;message=Messages.StrictParamDupe}}params.push(param);paramSet[key]=true;if(match(")")){break}expect(",")}}expect(")");return{params:params,stricted:stricted,firstRestricted:firstRestricted,message:message}}function parseFunctionDeclaration(){var id,params=[],body,token,stricted,tmp,firstRestricted,message,previousStrict,startToken;startToken=lookahead;expectKeyword("function");token=lookahead;id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwErrorTolerant(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}tmp=parseParams(firstRestricted);params=tmp.params;stricted=tmp.stricted;firstRestricted=tmp.firstRestricted;if(tmp.message){message=tmp.message}previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwError(firstRestricted,message)}if(strict&&stricted){throwErrorTolerant(stricted,message)}strict=previousStrict;return delegate.markEnd(delegate.createFunctionDeclaration(id,params,[],body),startToken)}function parseFunctionExpression(){var token,id=null,stricted,firstRestricted,message,tmp,params=[],body,previousStrict,startToken;startToken=lookahead;expectKeyword("function");if(!match("(")){token=lookahead;id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){throwErrorTolerant(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}}tmp=parseParams(firstRestricted);params=tmp.params;stricted=tmp.stricted;firstRestricted=tmp.firstRestricted;if(tmp.message){message=tmp.message}previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwError(firstRestricted,message)}if(strict&&stricted){throwErrorTolerant(stricted,message)}strict=previousStrict;return delegate.markEnd(delegate.createFunctionExpression(id,params,[],body),startToken)}function parseSourceElement(){if(lookahead.type===Token.Keyword){switch(lookahead.value){case"const":case"let":return parseConstLetDeclaration(lookahead.value);case"function":return parseFunctionDeclaration();default:return parseStatement()}}if(lookahead.type!==Token.EOF){return parseStatement()}}function parseSourceElements(){var sourceElement,sourceElements=[],token,directive,firstRestricted;while(index<length){token=lookahead;if(token.type!==Token.StringLiteral){break}sourceElement=parseSourceElement();sourceElements.push(sourceElement);if(sourceElement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}while(index<length){sourceElement=parseSourceElement();if(typeof sourceElement==="undefined"){break}sourceElements.push(sourceElement)}return sourceElements}function parseProgram(){var body,startToken;skipComment();peek();startToken=lookahead;strict=false;body=parseSourceElements();return delegate.markEnd(delegate.createProgram(body),startToken)}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i){entry=extra.tokens[i];token={type:entry.type,value:entry.value};if(extra.range){token.range=entry.range}if(extra.loc){token.loc=entry.loc}tokens.push(token)}extra.tokens=tokens}function tokenize(code,options){var toString,token,tokens;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}delegate=SyntaxTreeDelegate;source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};options=options||{};options.tokens=true;extra.tokens=[];extra.tokenize=true;extra.openParenToken=-1;extra.openCurlyToken=-1;extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(typeof options.comment==="boolean"&&options.comment){extra.comments=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}try{peek();if(lookahead.type===Token.EOF){return extra.tokens}token=lex();while(lookahead.type!==Token.EOF){try{token=lex()}catch(lexError){token=lookahead;if(extra.errors){extra.errors.push(lexError);break}else{throw lexError}}}filterTokenLocation();tokens=extra.tokens;if(typeof extra.comments!=="undefined"){tokens.comments=extra.comments}if(typeof extra.errors!=="undefined"){tokens.errors=extra.errors}}catch(e){throw e}finally{extra={}}return tokens}function parse(code,options){var program,toString;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}delegate=SyntaxTreeDelegate;source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};extra={};if(typeof options!=="undefined"){extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;extra.attachComment=typeof options.attachComment==="boolean"&&options.attachComment;if(extra.loc&&options.source!==null&&options.source!==undefined){extra.source=toString(options.source)}if(typeof options.tokens==="boolean"&&options.tokens){extra.tokens=[]}if(typeof options.comment==="boolean"&&options.comment){extra.comments=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}if(extra.attachComment){extra.range=true;extra.comments=[];extra.bottomRightStack=[];extra.trailingComments=[];extra.leadingComments=[]}}try{program=parseProgram();if(typeof extra.comments!=="undefined"){program.comments=extra.comments}if(typeof extra.tokens!=="undefined"){filterTokenLocation();program.tokens=extra.tokens}if(typeof extra.errors!=="undefined"){program.errors=extra.errors}}catch(e){throw e}finally{extra={}}return program}exports.version="1.2.5";exports.tokenize=tokenize;exports.parse=parse;exports.Syntax=function(){var name,types={};if(typeof Object.create==="function"){types=Object.create(null)}for(name in Syntax){if(Syntax.hasOwnProperty(name)){types[name]=Syntax[name]}}if(typeof Object.freeze==="function"){Object.freeze(types)}return types}()})},{}],81:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){objectKeys(from).forEach(function(key){to[key]=from[key]});return to}Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.8.1-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})},{}],82:[function(require,module,exports){(function(){"use strict";function isExpression(node){if(node==null){return false}switch(node.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function isIterationStatement(node){if(node==null){return false}switch(node.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function isStatement(node){if(node==null){return false}switch(node.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function isSourceElement(node){return isStatement(node)||node!=null&&node.type==="FunctionDeclaration"}function trailingStatement(node){switch(node.type){case"IfStatement":if(node.alternate!=null){return node.alternate}return node.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return node.body}return null}function isProblematicIfStatement(node){var current;if(node.type!=="IfStatement"){return false}if(node.alternate==null){return false}current=node.consequent;do{if(current.type==="IfStatement"){if(current.alternate==null){return true}}current=trailingStatement(current)}while(current);return false}module.exports={isExpression:isExpression,isStatement:isStatement,isIterationStatement:isIterationStatement,isSourceElement:isSourceElement,isProblematicIfStatement:isProblematicIfStatement,trailingStatement:trailingStatement}})()},{}],83:[function(require,module,exports){(function(){"use strict";var Regex,NON_ASCII_WHITESPACES;Regex={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return isDecimalDigit(ch)||97<=ch&&ch<=102||65<=ch&&ch<=70}function isOctalDigit(ch){return ch>=48&&ch<=55}NON_ASCII_WHITESPACES=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&NON_ASCII_WHITESPACES.indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch>=97&&ch<=122||ch>=65&&ch<=90||ch===36||ch===95||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch>=97&&ch<=122||ch>=65&&ch<=90||ch>=48&&ch<=57||ch===36||ch===95||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}module.exports={isDecimalDigit:isDecimalDigit,isHexDigit:isHexDigit,isOctalDigit:isOctalDigit,isWhiteSpace:isWhiteSpace,isLineTerminator:isLineTerminator,isIdentifierStart:isIdentifierStart,isIdentifierPart:isIdentifierPart}})()},{}],84:[function(require,module,exports){(function(){"use strict";var code=require("./code");function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function isKeywordES5(id,strict){if(!strict&&id==="yield"){return false}return isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&isStrictModeReservedWordES6(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function isReservedWordES5(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES5(id,strict)}function isReservedWordES6(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES6(id,strict)}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isIdentifierName(id){var i,iz,ch;if(id.length===0){return false}ch=id.charCodeAt(0);if(!code.isIdentifierStart(ch)||ch===92){return false}for(i=1,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(!code.isIdentifierPart(ch)||ch===92){return false}}return true}function isIdentifierES5(id,strict){return isIdentifierName(id)&&!isReservedWordES5(id,strict)}function isIdentifierES6(id,strict){return isIdentifierName(id)&&!isReservedWordES6(id,strict)}module.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isReservedWordES5:isReservedWordES5,isReservedWordES6:isReservedWordES6,isRestrictedWord:isRestrictedWord,isIdentifierName:isIdentifierName,isIdentifierES5:isIdentifierES5,isIdentifierES6:isIdentifierES6}})()},{"./code":83}],85:[function(require,module,exports){(function(){"use strict";exports.ast=require("./ast");exports.code=require("./code");exports.keyword=require("./keyword")})()},{"./ast":82,"./code":83,"./keyword":84}],86:[function(require,module,exports){module.exports=PriorityQueue;function PriorityQueue(comparator){this._comparator=comparator||PriorityQueue.DEFAULT_COMPARATOR;this._elements=[]}PriorityQueue.DEFAULT_COMPARATOR=function(a,b){if(a instanceof Number&&b instanceof Number){return a-b}else{a=a.toString();b=b.toString();if(a==b)return 0;return a>b?1:-1}};PriorityQueue.prototype.isEmpty=function(){return this.size()===0};PriorityQueue.prototype.peek=function(){if(this.isEmpty())throw new Error("PriorityQueue is empty");return this._elements[0]};PriorityQueue.prototype.deq=function(){var first=this.peek();var last=this._elements.pop();var size=this.size();if(size===0)return first;this._elements[0]=last;var current=0;while(current<size){var largest=current;var left=2*current+1;var right=2*current+2;if(left<size&&this._compare(left,largest)>0){largest=left}if(right<size&&this._compare(right,largest)>0){largest=right}if(largest===current)break;this._swap(largest,current);current=largest}return first};PriorityQueue.prototype.enq=function(element){var size=this._elements.push(element);var current=size-1;while(current>0){var parent=Math.floor((current-1)/2);if(this._compare(current,parent)<0)break;this._swap(parent,current);current=parent}return size};PriorityQueue.prototype.size=function(){return this._elements.length};PriorityQueue.prototype.forEach=function(fn){return this._elements.forEach(fn)};PriorityQueue.prototype._compare=function(a,b){return this._comparator(this._elements[a],this._elements[b])};PriorityQueue.prototype._swap=function(a,b){var aux=this._elements[a];this._elements[a]=this._elements[b];this._elements[b]=aux}},{}],87:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.2";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var isArrayLike=function(collection){var length=collection&&collection.length;return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,target,fromIndex){if(!isArrayLike(obj))obj=_.values(obj);return _.indexOf(obj,target,typeof fromIndex=="number"&&fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=input&&input.length;i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(array==null)return[];if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=array.length;i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){if(array==null)return[];var result=[];var argsLength=arguments.length;for(var i=0,length=array.length;i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,"length").length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=list&&list.length;i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){var i=0,length=array&&array.length;if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,length+isSorted):isSorted}else if(isSorted&&length){i=_.sortedIndex(array,item);return array[i]===item?i:-1}if(item!==item){return _.findIndex(slice.call(array,i),_.isNaN)}for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){var idx=array?array.length:0;if(typeof from=="number"){idx=from<0?idx+from+1:Math.min(idx,from+1)}if(item!==item){return _.findLastIndex(slice.call(array,0,idx),_.isNaN)}while(--idx>=0)if(array[idx]===item)return idx;return-1};function createIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=array!=null&&array.length;var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createIndexFinder(1);_.findLastIndex=createIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=array.length;while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=function(key){return function(obj){return obj==null?void 0:obj[key]}};_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],88:[function(require,module,exports){"use strict";var assert=require("assert");var estraverse=require("estraverse");var types=require("ast-types");var util=require("./util.js");var build=types.builders;var Syntax=estraverse.Syntax;var returnContIdentifier=build.identifier("_return");var gensym=util.makeGensym();function makeGensymVariable(name){return build.identifier("_".concat(gensym(name)))}function convertToStatement(node){if(types.namedTypes.Statement.check(node)){return node}else if(types.namedTypes.Expression.check(node)){return build.expressionStatement(node)}else{throw new Error("convertToStatement: can't handle node type: "+node.type)}}function buildFunc(args,body){if(types.namedTypes.BlockStatement.check(body)){return build.functionExpression(null,args,body)}else{return build.functionExpression(null,args,build.blockStatement([convertToStatement(body)]))}}function buildContinuationCall(cont,value){return build.callExpression(cont,[value])}function cpsAtomic(node){switch(node.type){case Syntax.FunctionExpression:var newCont=makeGensymVariable("k");var newParams=[newCont].concat(node.params);return buildFunc(newParams,build.blockStatement([build.variableDeclaration("var",[build.variableDeclarator(returnContIdentifier,newCont)]),convertToStatement(cps(node.body,newCont))]));case Syntax.Identifier:case Syntax.Literal:return node;case Syntax.EmptyStatement:return build.identifier("undefined");default:throw new Error("cpsAtomic: unknown expression type: "+node.type)}}function cpsSequence(atFinalElement,getFinalElement,nodes,vars){vars=vars||[];if(atFinalElement(nodes)){return getFinalElement(nodes,vars)}else if(isImmediate(nodes[0])){return cpsSequence(atFinalElement,getFinalElement,nodes.slice(1),vars.concat([nodes[0]]))
}else if(nodes[0].type===Syntax.VariableDeclaration&&!isFunctionDeclaration(nodes[0])){assert.equal(nodes[0].declarations.length,1);var declaration=nodes[0].declarations[0];return cps(declaration.init,buildFunc([declaration.id],cpsSequence(atFinalElement,getFinalElement,nodes.slice(1),vars.concat([declaration.id]))))}else{var nextVar=makeGensymVariable("s");return cps(nodes[0],buildFunc([nextVar],cpsSequence(atFinalElement,getFinalElement,nodes.slice(1),vars.concat([nextVar]))))}}function isImmediate(node){return node.type===Syntax.Literal||node.type===Syntax.Identifier}function isFunctionDeclaration(node){return types.namedTypes.VariableDeclaration.check(node)&&types.namedTypes.FunctionExpression.check(node.declarations[0].init)}function cpsBlock(nodes,cont){if(nodes.length>1&&isFunctionDeclaration(nodes[0])){var node=nodes[0];var newBlockElementNode;assert.equal(node.declarations.length,1);var declaration=node.declarations[0];newBlockElementNode=build.variableDeclaration("var",[build.variableDeclarator(declaration.id,cpsAtomic(declaration.init))]);var newRemainderNode=cpsBlock(nodes.slice(1),cont);if(types.namedTypes.BlockStatement.check(newRemainderNode)){return build.blockStatement([newBlockElementNode].concat(newRemainderNode.body))}else{return build.blockStatement([newBlockElementNode,convertToStatement(newRemainderNode)])}}else{return cpsSequence(function(nodes){return nodes.length===1},function(nodes,vars){return cps(nodes[0],cont)},nodes)}}function cpsPrimitiveApplicationMember(opNode,argNodes,cont){var objNode=opNode.object;var nodes=[objNode].concat(argNodes);return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){var memberNode=build.memberExpression(vars[0],opNode.property,opNode.computed);return buildContinuationCall(cont,build.callExpression(memberNode,vars.slice(1)))},nodes)}function cpsCompoundApplication(opNode,argNodes,cont){var nodes=[opNode].concat(argNodes);return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){var args=[cont].concat(vars.slice(1));return build.callExpression(vars[0],args)},nodes)}function cpsApplication(opNode,argNodes,cont){if(types.namedTypes.MemberExpression.check(opNode)){return cpsPrimitiveApplicationMember(opNode,argNodes,cont)}else{return cpsCompoundApplication(opNode,argNodes,cont)}}function cpsUnaryExpression(opNode,argNode,isPrefix,cont){var nodes=[argNode];return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){return buildContinuationCall(cont,build.unaryExpression(opNode,vars[0],isPrefix))},nodes)}function cpsBinaryExpression(opNode,leftNode,rightNode,cont){var nodes=[leftNode,rightNode];return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){assert.equal(vars.length,2);return buildContinuationCall(cont,build.binaryExpression(opNode,vars[0],vars[1]))},nodes)}function cpsLogicalExpression(lopNode,leftNode,rightNode,cont){var nodes=[leftNode,rightNode];return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){assert.equal(vars.length,2);return buildContinuationCall(cont,build.logicalExpression(lopNode,vars[0],vars[1]))},nodes)}function cpsConditional(test,consequent,alternate,cont){var contName=makeGensymVariable("k");var testName=makeGensymVariable("test");return build.callExpression(buildFunc([contName],cps(test,buildFunc([testName],build.conditionalExpression(testName,cps(consequent,contName),cps(alternate,contName))))),[cont])}function cpsIf(test,consequent,alternate,cont){var contName=makeGensymVariable("k");var testName=makeGensymVariable("test");var consequentNode=cps(consequent,contName);var alternateNode;if(alternate===null){alternateNode=buildContinuationCall(contName,build.identifier("undefined"))}else{alternateNode=cps(alternate,contName)}return build.callExpression(buildFunc([contName],cps(test,buildFunc([testName],build.ifStatement(testName,convertToStatement(consequentNode),convertToStatement(alternateNode))))),[cont])}function cpsArrayExpression(elements,cont){return cpsSequence(function(nodes){return nodes.length===0},function(nodes,vars){var arrayExpr=build.arrayExpression(vars);return buildContinuationCall(cont,arrayExpr)},elements)}function cpsObjectExpression(properties,cont,props){props=props||[];if(properties.length===0){var objectExpr=build.objectExpression(props);return buildContinuationCall(cont,objectExpr)}else{var nextVal=makeGensymVariable("ob");var nextProp=build.property(properties[0].kind,properties[0].key,nextVal);return cps(properties[0].value,buildFunc([nextVal],cpsObjectExpression(properties.slice(1),cont,props.concat([nextProp]))))}}function cpsMemberExpression(obj,prop,computed,cont){var objName,memberExpr;if(computed){objName=makeGensymVariable("obj");var propName=makeGensymVariable("prop");memberExpr=build.memberExpression(objName,propName,computed);return cps(obj,buildFunc([objName],cps(prop,buildFunc([propName],buildContinuationCall(cont,memberExpr)))))}else{objName=makeGensymVariable("obj");memberExpr=build.memberExpression(objName,prop,false);return cps(obj,buildFunc([objName],buildContinuationCall(cont,memberExpr)))}}function cpsVariableDeclaration(declarationId,declarationInit,cont){if(types.namedTypes.FunctionExpression.check(declarationInit)){return build.blockStatement([build.variableDeclaration("var",[build.variableDeclarator(declarationId,cpsAtomic(declarationInit))]),convertToStatement(buildContinuationCall(cont,build.identifier("undefined")))])}else{return cps(declarationInit,buildFunc([declarationId],buildContinuationCall(cont,build.identifier("undefined"))))}}function cpsAssignmentExpression(operator,left,right,cont){assert.equal(left.type,Syntax.MemberExpression,"Assignment is allowed only to fields of globalStore.");assert.equal(left.object.name,"globalStore","Assignment is allowed only to fields of globalStore.");var rhsName=makeGensymVariable("rhs");var assignmentExpr=build.assignmentExpression(operator,left,rhsName);return cps(right,buildFunc([rhsName],buildContinuationCall(cont,assignmentExpr)))}function cps(node,cont){switch(node.type){case Syntax.BlockStatement:return cpsBlock(node.body,cont);case Syntax.Program:return build.program([convertToStatement(cpsBlock(node.body,cont))]);case Syntax.ReturnStatement:return cps(node.argument,returnContIdentifier);case Syntax.ExpressionStatement:return cps(node.expression,cont);case Syntax.EmptyStatement:case Syntax.Identifier:case Syntax.Literal:case Syntax.FunctionExpression:return buildContinuationCall(cont,cpsAtomic(node));case Syntax.VariableDeclaration:assert.equal(node.declarations.length,1);var declaration=node.declarations[0];return cpsVariableDeclaration(declaration.id,declaration.init,cont);case Syntax.CallExpression:return cpsApplication(node.callee,node.arguments,cont);case Syntax.IfStatement:return cpsIf(node.test,node.consequent,node.alternate,cont);case Syntax.ConditionalExpression:return cpsConditional(node.test,node.consequent,node.alternate,cont);case Syntax.ArrayExpression:return cpsArrayExpression(node.elements,cont);case Syntax.ObjectExpression:return cpsObjectExpression(node.properties,cont);case Syntax.MemberExpression:return cpsMemberExpression(node.object,node.property,node.computed,cont);case Syntax.UnaryExpression:return cpsUnaryExpression(node.operator,node.argument,node.prefix,cont);case Syntax.BinaryExpression:return cpsBinaryExpression(node.operator,node.left,node.right,cont);case Syntax.LogicalExpression:return cpsLogicalExpression(node.operator,node.left,node.right,cont);case Syntax.AssignmentExpression:return cpsAssignmentExpression(node.operator,node.left,node.right,cont);default:throw new Error("cps: unknown node type: "+node.type)}}function cpsMain(node,cont){gensym=util.makeGensym();return cps(node,cont)}module.exports={cps:cpsMain}},{"./util.js":95,assert:97,"ast-types":16,estraverse:81}],89:[function(require,module,exports){(function(global){"use strict";var assert=require("assert");var _=require("underscore");var PriorityQueue=require("priorityqueuejs");var util=require("./util.js");var address="";var globalStore={};function ERP(sampler,scorer,supporter,grad){this.sample=sampler;this.score=scorer;this.support=supporter;this.grad=grad}var uniformERP=new ERP(function uniformSample(params){var u=Math.random();return(1-u)*params[0]+u*params[1]},function uniformScore(params,val){if(val<params[0]||val>params[1]){return-Infinity}return-Math.log(params[1]-params[0])});var bernoulliERP=new ERP(function flipSample(params){var weight=params[0];var val=Math.random()<weight;return val},function flipScore(params,val){if(val!=true&&val!=false){return-Infinity}var weight=params[0];return val?Math.log(weight):Math.log(1-weight)},function flipSupport(params){return[true,false]},function flipGrad(params,val){var weight=params[0];return val?[1/weight]:[-1/weight]});var randomIntegerERP=new ERP(function randomIntegerSample(params){return Math.floor(Math.random()*params[0])},function randomIntegerScore(params,val){var stop=params[0];var inSupport=val==Math.floor(val)&&0<=val&&val<stop;return inSupport?-Math.log(stop):-Infinity},function randomIntegerSupport(params){return _.range(params[0])});function gaussianSample(params){var mu=params[0];var sigma=params[1];var u,v,x,y,q;do{u=1-Math.random();v=1.7156*(Math.random()-.5);x=u-.449871;y=Math.abs(v)+.386595;q=x*x+y*(.196*y-.25472*x)}while(q>=.27597&&(q>.27846||v*v>-4*u*u*Math.log(u)));return mu+sigma*v/u}function gaussianScore(params,x){var mu=params[0];var sigma=params[1];return-.5*(1.8378770664093453+2*Math.log(sigma)+(x-mu)*(x-mu)/(sigma*sigma))}function gaussianFactor(store,k,addr,mu,std,val){coroutine.factor(store,k,addr,gaussianScore([mu,std],val))}function erpFactor(store,k,addr,erp,params,val){coroutine.factor(store,k,addr,erp.score(params,val))}var gaussianERP=new ERP(gaussianSample,gaussianScore);var discreteERP=new ERP(function discreteSample(params){return multinomialSample(params[0])},function discreteScore(params,val){var probs=util.normalizeArray(params[0]);var stop=probs.length;var inSupport=val==Math.floor(val)&&0<=val&&val<stop;return inSupport?Math.log(probs[val]):-Infinity},function discreteSupport(params){return _.range(params[0].length)});var gammaCof=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function logGamma(xx){var x=xx-1;var tmp=x+5.5;tmp-=(x+.5)*Math.log(tmp);var ser=1.000000000190015;for(var j=0;j<=5;j++){x++;ser+=gammaCof[j]/x}return-tmp+Math.log(2.5066282746310007*ser)}function gammaSample(params){var a=params[0];var b=params[1];if(a<1){return gammaSample([1+a,b])*Math.pow(Math.random(),1/a)}var x,v,u;var d=a-1/3;var c=1/Math.sqrt(9*d);while(true){do{x=gaussianSample([0,1]);v=1+c*x}while(v<=0);v=v*v*v;u=Math.random();if(u<1-.331*x*x*x*x||Math.log(u)<.5*x*x+d*(1-v+Math.log(v))){return b*d*v}}}var gammaERP=new ERP(gammaSample,function gammaScore(params,val){var a=params[0];var b=params[1];var x=val;return(a-1)*Math.log(x)-x/b-logGamma(a)-a*Math.log(b)});var exponentialERP=new ERP(function exponentialSample(params){var a=params[0];var u=Math.random();return Math.log(u)/(-1*a)},function exponentialScore(params,val){var a=params[0];return Math.log(a)-a*val});function logBeta(a,b){return logGamma(a)+logGamma(b)-logGamma(a+b)}function betaSample(params){var a=params[0];var b=params[1];var x=gammaSample([a,1]);return x/(x+gammaSample([b,1]))}var betaERP=new ERP(betaSample,function betaScore(params,val){var a=params[0];var b=params[1];var x=val;return x>0&&x<1?(a-1)*Math.log(x)+(b-1)*Math.log(1-x)-logBeta(a,b):-Infinity});function binomialG(x){if(x===0){return 1}if(x===1){return 0}var d=1-x;return(1-x*x+2*x*Math.log(x))/(d*d)}function binomialSample(params){var p=params[0];var n=params[1];var k=0;var N=10;var a,b;while(n>N){a=1+n/2;b=1+n-a;var x=betaSample([a,b]);if(x>=p){n=a-1;p/=x}else{k+=a;n=b-1;p=(p-x)/(1-x)}}var u;for(var i=0;i<n;i++){u=Math.random();if(u<p){k++}}return k||0}var binomialERP=new ERP(binomialSample,function binomialScore(params,val){var p=params[0];var n=params[1];if(n>20&&n*p>5&&n*(1-p)>5){var s=val;var inv2=1/2;var inv3=1/3;var inv6=1/6;if(s>=n){return-Infinity}var q=1-p;var S=s+inv2;var T=n-s-inv2;var d1=s+inv6-(n+inv3)*p;var d2=q/(s+inv2)-p/(T+inv2)+(q-inv2)/(n+1);d2=d1+.02*d2;var num=1+q*binomialG(S/(n*p))+p*binomialG(T/(n*q));var den=(n+inv6)*p*q;var z=num/den;var invsd=Math.sqrt(z);z=d2*invsd;return gaussianScore([0,1],z)+Math.log(invsd)}else{return lnfact(n)-lnfact(n-val)-lnfact(val)+val*Math.log(p)+(n-val)*Math.log(1-p)}},function binomialSupport(params){return _.range(params[1]).concat([params[1]])});function fact(x){var t=1;while(x>1){t*=x--}return t}function lnfact(x){if(x<1){x=1}if(x<12){return Math.log(fact(Math.round(x)))}var invx=1/x;var invx2=invx*invx;var invx3=invx2*invx;var invx5=invx3*invx2;var invx7=invx5*invx2;var sum=(x+.5)*Math.log(x)-x;sum+=Math.log(2*Math.PI)/2;sum+=invx/12-invx3/360;sum+=invx5/1260-invx7/1680;return sum}var poissonERP=new ERP(function poissonSample(params){var mu=params[0];var k=0;while(mu>10){var m=7/8*mu;var x=gammaSample([m,1]);if(x>mu){return k+binomialSample([mu/x,m-1])||0}else{mu-=x;k+=m}}var emu=Math.exp(-mu);var p=1;do{p*=Math.random();k++}while(p>emu);return k-1||0},function poissonScore(params,val){var mu=params[0];var k=val;return k*Math.log(mu)-mu-lnfact(k)});var dirichletERP=new ERP(function dirichletSample(params){var alpha=params;var ssum=0;var theta=[];var t;for(var i=0;i<alpha.length;i++){t=gammaSample([alpha[i],1]);theta[i]=t;ssum=ssum+t}for(var j=0;j<theta.length;j++){theta[j]/=ssum}return theta},function dirichletScore(params,val){var alpha=params;var theta=val;var asum=0;for(var i=0;i<alpha.length;i++){asum+=alpha[i]}var logp=logGamma(asum);for(var j=0;j<alpha.length;j++){logp+=(alpha[j]-1)*Math.log(theta[j]);logp-=logGamma(alpha[j])}return logp});function multinomialSample(theta){var thetaSum=util.sum(theta);var x=Math.random()*thetaSum;var k=theta.length;var probAccum=0;for(var i=0;i<k;i++){probAccum+=theta[i];if(probAccum>=x){return i}}return k}function makeMarginalERP(marginal){var norm=0;var supp=[];for(var v in marginal){norm+=marginal[v].prob;supp.push(marginal[v].val)}for(v in marginal){marginal[v].prob=marginal[v].prob/norm}var dist=new ERP(function(params){var k=marginal.length;var x=Math.random();var probAccum=0;for(var i in marginal){probAccum+=marginal[i].prob;if(probAccum>=x){return marginal[i].val}}return marginal[i].val},function(params,val){var valString=JSON.stringify(val);if(valString in marginal){return Math.log(marginal[valString].prob)}return-Infinity},function(params){return supp});return dist}var coroutine={sample:function(s,cc,a,erp,params){cc(s,erp.sample(params))},factor:function(){throw"factor allowed only inside inference."},exit:function(s,r){return r}};function sample(s,k,a,dist,params){coroutine.sample(s,k,a,dist,params)}function factor(s,k,a,score){coroutine.factor(s,k,a,score)}function sampleWithFactor(s,k,a,dist,params,scoreFn){if(typeof coroutine.sampleWithFactor==="function"){coroutine.sampleWithFactor(s,k,a,dist,params,scoreFn)}else{var sampleK=function(s,v){var scoreK=function(s,sc){var factorK=function(s){k(s,v)};factor(s,factorK,a+"swf2",sc)};scoreFn(s,scoreK,a+"swf1",v)};sample(s,sampleK,a,dist,params)}}function exit(s,retval){coroutine.exit(s,retval)}function Enumerate(s,k,a,wpplFn,maxExecutions,Q){this.score=0;this.queue=Q;this.marginal={};this.numCompletedExecutions=0;this.maxExecutions=maxExecutions||Infinity;this.oldStore=s;this.k=k;this.oldCoroutine=coroutine;coroutine=this;wpplFn(s,exit,a)}var stackSize=0;Enumerate.prototype.nextInQueue=function(){var nextState=this.queue.deq();this.score=nextState.score;nextState.continuation(nextState.store,nextState.value)};Enumerate.prototype.sample=function(store,cc,a,dist,params,extraScoreFn){extraScoreFn=extraScoreFn||function(x){return 0};if(!dist.support){console.error(dist,params);throw"Enumerate can only be used with ERPs that have support function."}var supp=dist.support(params);if(supp.length===0){console.error(dist,params);throw"Enumerate encountered ERP with empty support!"}for(var s in supp){var state={continuation:cc,value:supp[s],score:this.score+dist.score(params,supp[s])+extraScoreFn(supp[s]),store:util.copyObj(store)};this.queue.enq(state)}this.nextInQueue()};Enumerate.prototype.factor=function(s,cc,a,score){this.score+=score;cc(s)};Enumerate.prototype.exit=function(s,retval){var r=JSON.stringify(retval);if(this.marginal[r]===undefined){this.marginal[r]={prob:0,val:retval}}this.marginal[r].prob+=Math.exp(this.score);this.numCompletedExecutions++;if(this.queue.size()>0&&this.numCompletedExecutions<this.maxExecutions){this.nextInQueue()}else{var marginal=this.marginal;var dist=makeMarginalERP(marginal);coroutine=this.oldCoroutine;this.k(this.oldStore,dist)}};function enuPriority(s,cc,a,wpplFn,maxExecutions){var q=new PriorityQueue(function(a,b){return a.score-b.score});return new Enumerate(s,cc,a,wpplFn,maxExecutions,q)}function enuFilo(s,cc,a,wpplFn,maxExecutions){var q=[];q.size=function(){return q.length};q.enq=q.push;q.deq=q.pop;return new Enumerate(s,cc,a,wpplFn,maxExecutions,q)}function enuFifo(s,cc,a,wpplFn,maxExecutions){var q=[];q.size=function(){return q.length};q.enq=q.push;q.deq=q.shift;return new Enumerate(s,cc,a,wpplFn,maxExecutions,q)}function copyParticle(particle){return{continuation:particle.continuation,weight:particle.weight,value:particle.value,store:util.copyObj(particle.store)}}function ParticleFilter(s,k,a,wpplFn,numParticles,strict){this.particles=[];this.particleIndex=0;for(var i=0;i<numParticles;i++){var particle={continuation:function(s){wpplFn(s,exit,a)},weight:0,value:undefined,store:util.copyObj(s)};this.particles.push(particle)}this.strict=strict;this.k=k;this.oldCoroutine=coroutine;coroutine=this;this.oldStore=util.copyObj(s);this.activeParticle().continuation(this.activeParticle().store)}ParticleFilter.prototype.sample=function(s,cc,a,erp,params){cc(s,erp.sample(params))};ParticleFilter.prototype.factor=function(s,cc,a,score){this.activeParticle().weight+=score;this.activeParticle().continuation=cc;this.activeParticle().store=s;if(this.allParticlesAdvanced()){this.resampleParticles();this.particleIndex=0}else{this.particleIndex+=1}coroutine.activeParticle().continuation(coroutine.activeParticle().store)};ParticleFilter.prototype.activeParticle=function(){return this.particles[this.particleIndex]};ParticleFilter.prototype.allParticlesAdvanced=function(){return this.particleIndex+1===this.particles.length};ParticleFilter.prototype.resampleParticles=function(){var m=this.particles.length;var W=util.logsumexp(_.map(this.particles,function(p){return p.weight}));var avgW=W-Math.log(m);if(avgW==-Infinity){if(this.strict)throw"Error! All particles -Infinity"}else{var retainedParticles=[];var newExpWeights=[];_.each(this.particles,function(particle){var w=Math.exp(particle.weight-avgW);var nRetained=Math.floor(w);newExpWeights.push(w-nRetained);for(var i=0;i<nRetained;i++){retainedParticles.push(copyParticle(particle))}});var numNewParticles=m-retainedParticles.length;var newParticles=[];var j;for(var i=0;i<numNewParticles;i++){j=multinomialSample(newExpWeights);newParticles.push(copyParticle(this.particles[j]))}this.particles=newParticles.concat(retainedParticles)}_.each(this.particles,function(particle){particle.weight=avgW})};ParticleFilter.prototype.exit=function(s,retval){this.activeParticle().value=retval;if(!this.allParticlesAdvanced()){this.particleIndex+=1;return this.activeParticle().continuation(this.activeParticle().store)}var hist={};_.each(this.particles,function(particle){var k=JSON.stringify(particle.value);if(hist[k]===undefined){hist[k]={prob:0,val:particle.value}}hist[k].prob+=1});var dist=makeMarginalERP(hist);dist.normalizationConstant=this.particles[0].weight;coroutine=this.oldCoroutine;this.k(this.oldStore,dist)};function pf(s,cc,a,wpplFn,numParticles,strict){return new ParticleFilter(s,cc,a,wpplFn,numParticles,strict==undefined?true:strict)}function MH(s,k,a,wpplFn,numIterations){this.trace=[];this.oldTrace=undefined;this.currScore=0;this.oldScore=-Infinity;this.oldVal=undefined;this.regenFrom=0;this.returnHist={};this.k=k;this.oldStore=s;this.iterations=numIterations;this.oldCoroutine=coroutine;coroutine=this;wpplFn(s,exit,a)}MH.prototype.factor=function(s,k,a,score){coroutine.currScore+=score;k(s)};MH.prototype.sample=function(s,cont,name,erp,params,forceSample){var prev=findChoice(coroutine.oldTrace,name);var reuse=!(prev===undefined||forceSample);var val=reuse?prev.val:erp.sample(params);var choiceScore=erp.score(params,val);coroutine.trace.push({k:cont,name:name,erp:erp,params:params,score:coroutine.currScore,choiceScore:choiceScore,val:val,reused:reuse,store:_.clone(s)});coroutine.currScore+=choiceScore;cont(s,val)};function findChoice(trace,name){if(trace===undefined){return undefined}for(var i=0;i<trace.length;i++){if(trace[i].name===name){return trace[i]}}return undefined}function mhAcceptProb(trace,oldTrace,regenFrom,currScore,oldScore){if(oldTrace===undefined||oldScore===-Infinity){return 1}var fw=-Math.log(oldTrace.length);trace.slice(regenFrom).map(function(s){fw+=s.reused?0:s.choiceScore});var bw=-Math.log(trace.length);oldTrace.slice(regenFrom).map(function(s){var nc=findChoice(trace,s.name);bw+=!nc||!nc.reused?s.choiceScore:0});var p=Math.exp(currScore-oldScore+bw-fw);assert.ok(!isNaN(p));var acceptance=Math.min(1,p);return acceptance}MH.prototype.exit=function(s,val){if(coroutine.iterations>0){coroutine.iterations-=1;var acceptance=mhAcceptProb(coroutine.trace,coroutine.oldTrace,coroutine.regenFrom,coroutine.currScore,coroutine.oldScore);if(Math.random()>=acceptance){coroutine.trace=coroutine.oldTrace;coroutine.currScore=coroutine.oldScore;val=coroutine.oldVal}var stringifiedVal=JSON.stringify(val);if(coroutine.returnHist[stringifiedVal]===undefined){coroutine.returnHist[stringifiedVal]={prob:0,val:val}}coroutine.returnHist[stringifiedVal].prob+=1;coroutine.regenFrom=Math.floor(Math.random()*coroutine.trace.length);var regen=coroutine.trace[coroutine.regenFrom];coroutine.oldTrace=coroutine.trace;coroutine.trace=coroutine.trace.slice(0,coroutine.regenFrom);coroutine.oldScore=coroutine.currScore;coroutine.currScore=regen.score;coroutine.oldVal=val;coroutine.sample(_.clone(regen.store),regen.k,regen.name,regen.erp,regen.params,true)}else{var dist=makeMarginalERP(coroutine.returnHist);var k=coroutine.k;coroutine=this.oldCoroutine;k(this.oldStore,dist)}};function mh(s,cc,a,wpplFn,numParticles){return new MH(s,cc,a,wpplFn,numParticles)}function last(xs){return xs[xs.length-1]}function PMCMC(s,cc,a,wpplFn,numParticles,numSweeps){this.oldCoroutine=coroutine;coroutine=this;this.k=cc;this.oldStore=s;this.particleIndex=0;this.retainedParticle=undefined;this.numSweeps=numSweeps;this.sweep=0;this.wpplFn=wpplFn;this.address=a;this.numParticles=numParticles;this.resetParticles();this.returnHist={};this.activeContinuationWithStore()()}PMCMC.prototype.resetParticles=function(){var that=this;this.particles=[];for(var i=0;i<this.numParticles;i++){var particle={continuations:[function(s){that.wpplFn(s,exit,that.address)}],stores:[that.oldStore],weights:[0],value:undefined};this.particles.push(util.copyObj(particle))}};PMCMC.prototype.activeParticle=function(){return this.particles[this.particleIndex]};PMCMC.prototype.activeContinuation=function(){return last(this.activeParticle().continuations)};PMCMC.prototype.activeContinuationWithStore=function(){var k=last(this.activeParticle().continuations);var s=_.clone(last(this.activeParticle().stores));return function(){k(s)}};PMCMC.prototype.allParticlesAdvanced=function(){return this.particleIndex+1===this.particles.length};PMCMC.prototype.sample=function(s,cc,a,erp,params){cc(s,erp.sample(params))};PMCMC.prototype.particleAtStep=function(particle,step){return{continuations:particle.continuations.slice(0,step+1),stores:particle.stores.slice(0,step+1),weights:particle.weights.slice(0,step+1),value:particle.value}};PMCMC.prototype.updateActiveParticle=function(weight,continuation,store){var particle=this.activeParticle();particle.continuations=particle.continuations.concat([continuation]);particle.stores=particle.stores.concat([_.clone(store)]);particle.weights=particle.weights.concat([weight])};PMCMC.prototype.copyParticle=function(particle){return{continuations:particle.continuations.slice(0),weights:particle.weights.slice(0),value:particle.value,stores:particle.stores.map(_.clone)}};PMCMC.prototype.resampleParticles=function(particles){var weights=particles.map(function(particle){return Math.exp(last(particle.weights))});var j;var newParticles=[];for(var i=0;i<particles.length;i++){j=multinomialSample(weights);newParticles.push(this.copyParticle(particles[j]))}return newParticles};PMCMC.prototype.factor=function(s,cc,a,score){this.updateActiveParticle(score,cc,s);if(this.allParticlesAdvanced()){if(this.sweep>0){var particles=this.particles;var step=this.particles[0].continuations.length-1;particles=particles.concat(this.particleAtStep(this.retainedParticle,step));this.particles=this.resampleParticles(particles).slice(1)}else{this.particles=this.resampleParticles(this.particles)}this.particleIndex=0}else{this.particleIndex+=1}this.activeContinuationWithStore()()};PMCMC.prototype.exit=function(s,retval){this.activeParticle().value=retval;if(!this.allParticlesAdvanced()){this.particleIndex+=1;return this.activeContinuationWithStore()()}else{if(this.sweep>0){this.particles.concat(this.retainedParticle).forEach(function(particle){var k=JSON.stringify(particle.value);if(coroutine.returnHist[k]===undefined){coroutine.returnHist[k]={prob:0,val:particle.value}}coroutine.returnHist[k].prob+=1})}this.retainedParticle=this.particles[0];if(this.sweep<this.numSweeps){this.sweep+=1;this.particleIndex=0;this.resetParticles();this.activeContinuationWithStore()()}else{var dist=makeMarginalERP(this.returnHist);coroutine=this.oldCoroutine;this.k(this.oldStore,dist)}}};function pmc(s,cc,a,wpplFn,numParticles,numSweeps){return new PMCMC(s,cc,a,wpplFn,numParticles,numSweeps)}var deepCopyTrace=function(trace){return trace.map(function(obj){var objCopy=util.copyObj(obj);objCopy.store=_.clone(obj.store);return objCopy})};function ParticleFilterRejuv(s,k,a,wpplFn,numParticles,rejuvSteps){this.particles=[];this.particleIndex=0;this.rejuvSteps=rejuvSteps;this.baseAddress=a;this.wpplFn=wpplFn;this.isParticleFilterRejuvCoroutine=true;this.k=k;this.oldCoroutine=coroutine;coroutine=this;this.oldStore=s;for(var i=0;i<numParticles;i++){var particle={continuation:function(s){wpplFn(s,exit,a)},weight:0,score:0,value:undefined,trace:[],store:_.clone(s)};coroutine.particles.push(particle)}coroutine.activeParticle().continuation(coroutine.activeParticle().store)}ParticleFilterRejuv.prototype.sample=function(s,cc,a,erp,params){var val=erp.sample(params);var currScore=coroutine.activeParticle().score;var choiceScore=erp.score(params,val);coroutine.activeParticle().trace.push({k:cc,name:a,erp:erp,params:params,score:currScore,choiceScore:choiceScore,val:val,reused:false,store:_.clone(s)});coroutine.activeParticle().score+=choiceScore;cc(s,val)};ParticleFilterRejuv.prototype.factor=function(s,cc,a,score){coroutine.activeParticle().weight+=score;coroutine.activeParticle().score+=score;coroutine.activeParticle().continuation=cc;coroutine.activeParticle().store=_.clone(s);if(coroutine.allParticlesAdvanced()){coroutine.resampleParticles();util.cpsForEach(function(particle,i,particles,nextK){assert(coroutine.isParticleFilterRejuvCoroutine);new MHP(function(p){particles[i]=p;nextK()},particle,coroutine.baseAddress,a,coroutine.wpplFn,coroutine.rejuvSteps)},function(){coroutine.particleIndex=0;coroutine.activeParticle().continuation(coroutine.activeParticle().store)},coroutine.particles)}else{coroutine.particleIndex+=1;coroutine.activeParticle().continuation(coroutine.activeParticle().store)}};ParticleFilterRejuv.prototype.activeParticle=function(){return coroutine.particles[coroutine.particleIndex]};ParticleFilterRejuv.prototype.allParticlesAdvanced=function(){return coroutine.particleIndex+1==coroutine.particles.length};function copyPFRParticle(particle){return{continuation:particle.continuation,weight:particle.weight,value:particle.value,score:particle.score,store:_.clone(particle.store),trace:deepCopyTrace(particle.trace)}}ParticleFilterRejuv.prototype.resampleParticles=function(){var m=coroutine.particles.length;var W=util.logsumexp(_.map(coroutine.particles,function(p){return p.weight}));var avgW=W-Math.log(m);if(avgW==-Infinity){console.warn("ParticleFilterRejuv: resampleParticles: all "+m+" particles have weight -Inf");return}var retainedParticles=[];var newExpWeights=[];_.each(coroutine.particles,function(particle){var w=Math.exp(particle.weight-avgW);var nRetained=Math.floor(w);newExpWeights.push(w-nRetained);for(var i=0;i<nRetained;i++){retainedParticles.push(copyPFRParticle(particle))}});var numNewParticles=m-retainedParticles.length;var newParticles=[];var j;for(var i=0;i<numNewParticles;i++){j=multinomialSample(newExpWeights);newParticles.push(copyPFRParticle(this.particles[j]))}coroutine.particles=newParticles.concat(retainedParticles);_.each(coroutine.particles,function(particle){particle.weight=avgW})};ParticleFilterRejuv.prototype.exit=function(s,retval){coroutine.activeParticle().value=retval;if(!coroutine.allParticlesAdvanced()){coroutine.particleIndex+=1;return coroutine.activeParticle().continuation(coroutine.activeParticle().store)}var oldStore=this.oldStore;var hist={};util.cpsForEach(function(particle,i,particles,nextK){assert(coroutine.isParticleFilterRejuvCoroutine);new MHP(function(p){particles[i]=p;nextK()},particle,coroutine.baseAddress,undefined,coroutine.wpplFn,coroutine.rejuvSteps,hist)},function(){var dist=makeMarginalERP(hist);dist.normalizationConstant=coroutine.particles[0].weight;var k=coroutine.k;coroutine=coroutine.oldCoroutine;k(oldStore,dist)},coroutine.particles)};function MHP(backToPF,particle,baseAddress,limitAddress,wpplFn,numIterations,hist){this.oldStore=particle.store;this.trace=particle.trace;this.oldTrace=undefined;this.currScore=particle.score;this.oldScore=undefined;this.val=particle.value;this.regenFrom=undefined;this.backToPF=backToPF;this.iterations=numIterations;this.limitAddress=limitAddress;this.originalParticle=particle;this.hist=hist;if(numIterations===0){backToPF(particle)}else{this.oldCoroutine=coroutine;coroutine=this;coroutine.propose()}}MHP.prototype.factor=function(s,k,a,sc){coroutine.currScore+=sc;if(a==coroutine.limitAddress){exit(s)}else{k(s)}};MHP.prototype.sample=function(s,k,name,erp,params,forceSample){var prev=findChoice(coroutine.oldTrace,name);var reuse=!(prev===undefined||forceSample);var val=reuse?prev.val:erp.sample(params);var choiceScore=erp.score(params,val);coroutine.trace.push({k:k,name:name,erp:erp,params:params,score:coroutine.currScore,choiceScore:choiceScore,val:val,reused:reuse,store:_.clone(s)});coroutine.currScore+=choiceScore;k(s,val)};MHP.prototype.propose=function(){coroutine.regenFrom=Math.floor(Math.random()*coroutine.trace.length);var regen=coroutine.trace[coroutine.regenFrom];coroutine.oldTrace=deepCopyTrace(coroutine.trace);coroutine.trace=coroutine.trace.slice(0,coroutine.regenFrom);coroutine.oldScore=coroutine.currScore;coroutine.currScore=regen.score;coroutine.oldVal=coroutine.val;coroutine.sample(_.clone(regen.store),regen.k,regen.name,regen.erp,regen.params,true)};MHP.prototype.exit=function(s,val){coroutine.val=val;var acceptance=mhAcceptProb(coroutine.trace,coroutine.oldTrace,coroutine.regenFrom,coroutine.currScore,coroutine.oldScore);var accepted=Math.random()<acceptance;if(accepted){coroutine.oldStore=s}else{coroutine.trace=coroutine.oldTrace;coroutine.currScore=coroutine.oldScore;coroutine.val=coroutine.oldVal}if(this.hist!==undefined){var k=JSON.stringify(coroutine.val);if(this.hist[k]===undefined){this.hist[k]={prob:0,val:coroutine.val}}this.hist[k].prob+=1}coroutine.iterations-=1;if(coroutine.iterations>0){coroutine.propose()
}else{var newParticle={continuation:coroutine.originalParticle.continuation,weight:coroutine.originalParticle.weight,value:coroutine.val,score:coroutine.currScore,store:coroutine.oldStore,trace:coroutine.trace};var backToPF=coroutine.backToPF;coroutine=coroutine.oldCoroutine;backToPF(newParticle)}};function pfr(s,cc,a,wpplFn,numParticles,rejuvSteps){return new ParticleFilterRejuv(s,cc,a,wpplFn,numParticles,rejuvSteps)}function Variational(s,k,a,wpplFn,estS){this.wpplFn=wpplFn;this.estimateSamples=estS;this.numS=0;this.t=1;this.variationalParams={};this.runningG2={};this.grad={};this.samplegrad={};this.jointScore=0;this.variScore=0;this.k=k;this.oldCoroutine=coroutine;coroutine=this;this.initialStore=s;this.initialAddress=a;this.takeGradSample()}Variational.prototype.takeGradSample=function(){coroutine.samplegrad={};coroutine.jointScore=0;coroutine.variScore=0;coroutine.numS++;coroutine.wpplFn(coroutine.initialStore,exit,coroutine.initialAddress)};Variational.prototype.sample=function(s,k,a,erp,params){if(!coroutine.variationalParams.hasOwnProperty(a)){coroutine.variationalParams[a]=params;coroutine.runningG2[a]=[0]}var vParams=coroutine.variationalParams[a];var val=erp.sample(vParams);coroutine.samplegrad[a]=erp.grad(vParams,val);coroutine.jointScore+=erp.score(params,val);coroutine.variScore+=erp.score(vParams,val);k(s,val)};Variational.prototype.factor=function(s,k,a,score){coroutine.jointScore+=score;k(s)};Variational.prototype.exit=function(s,retval){for(var a in coroutine.samplegrad){if(!coroutine.grad.hasOwnProperty(a)){coroutine.grad[a]=[0]}coroutine.grad[a]=vecPlus(coroutine.grad[a],vecScalarMult(coroutine.samplegrad[a],coroutine.jointScore-coroutine.variScore))}if(coroutine.numS<coroutine.estimateSamples){return coroutine.takeGradSample()}for(a in coroutine.variationalParams){for(var i in coroutine.variationalParams[a]){var grad=coroutine.grad[a][i]/coroutine.numS;coroutine.runningG2[a][i]+=Math.pow(grad,2);var weight=1/Math.sqrt(coroutine.runningG2[a][i]);coroutine.variationalParams[a][i]+=weight*grad}}coroutine.t++;console.log(coroutine.variationalParams);if(coroutine.t<500){coroutine.grad={};coroutine.numS=0;return coroutine.takeGradSample()}console.log(coroutine.variationalParams);var dist=null;var k=coroutine.k;var s=coroutine.initialStore;coroutine=coroutine.oldCoroutine;k(s,dist)};function vecPlus(a,b){var c=[];for(var i=0;i<a.length;i++){c[i]=a[i]+b[i]}return c}function vecScalarMult(a,s){var c=[];for(var i=0;i<a.length;i++){c[i]=a[i]*s}return c}function vari(s,cc,a,wpplFn,estS){return new Variational(s,cc,a,wpplFn,estS)}function display(s,k,a,x){k(s,console.log(x))}function cache(s,k,a,f){var c={};var cf=function(s,k,a){var args=Array.prototype.slice.call(arguments,3);var stringedArgs=JSON.stringify(args);if(stringedArgs in c){k(s,c[stringedArgs])}else{var newk=function(s,r){c[stringedArgs]=r;k(s,r)};f.apply(this,[s,newk,a].concat(args))}};k(s,cf)}function apply(s,k,a,wpplFn,args){return wpplFn.apply(global,[s,k,a].concat(args))}module.exports={_:_,ERP:ERP,Enumerate:enuPriority,EnumerateBreadthFirst:enuFifo,EnumerateDepthFirst:enuFilo,EnumerateLikelyFirst:enuPriority,MH:mh,PMCMC:pmc,ParticleFilter:pf,ParticleFilterRejuv:pfr,Variational:vari,address:address,bernoulliERP:bernoulliERP,betaERP:betaERP,binomialERP:binomialERP,cache:cache,coroutine:coroutine,dirichletERP:dirichletERP,discreteERP:discreteERP,display:display,erpFactor:erpFactor,exponentialERP:exponentialERP,factor:factor,gammaERP:gammaERP,gaussianERP:gaussianERP,gaussianFactor:gaussianFactor,globalStore:globalStore,multinomialSample:multinomialSample,poissonERP:poissonERP,randomIntegerERP:randomIntegerERP,sample:sample,sampleWithFactor:sampleWithFactor,uniformERP:uniformERP,makeMarginalERP:makeMarginalERP,util:util,apply:apply,assert:assert}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./util.js":95,assert:97,priorityqueuejs:86,underscore:87}],90:[function(require,module,exports){(function(global,Buffer){"use strict";var assert=require("assert");var types=require("ast-types");var build=types.builders;var esprima=require("esprima");var escodegen=require("escodegen");var cps=require("./cps").cps;var optimize=require("./optimize").optimize;var naming=require("./naming").naming;var store=require("./store").store;var varargs=require("./varargs").varargs;var trampoline=require("./trampoline").trampoline;var util=require("./util");var topK;var _trampoline;var runtime=require("./header.js");for(var prop in runtime){if(runtime.hasOwnProperty(prop)){global[prop]=runtime[prop]}}global.CACHED_WEBPPL_HEADER=undefined;function addHeaderAst(targetAst,headerAst){targetAst.body=headerAst.body.concat(targetAst.body);return targetAst}function removeFinalContinuationCall(ast,contName){var x=ast.body[0];var lastNode=x.body[x.body.length-1];assert(types.namedTypes.ExpressionStatement.check(lastNode));assert(types.namedTypes.CallExpression.check(lastNode.expression));assert(types.namedTypes.Identifier.check(lastNode.expression.callee));assert.equal(lastNode.expression.callee.name,contName);x.body=x.body.slice(0,x.body.length-1)}var compile=function(code,contName,isLibrary){var ast=esprima.parse(code);var cont=build.identifier(contName);ast=naming(ast);ast=cps(ast,cont);if(isLibrary){removeFinalContinuationCall(ast,contName)}ast=store(ast);ast=optimize(ast);ast=varargs(ast);ast=trampoline(ast,isLibrary);return ast};function compileProgram(programCode,verbose){if(verbose&&console.time){console.time("compile")}var programAst,headerAst;if(global.CACHED_WEBPPL_HEADER){headerAst=global.CACHED_WEBPPL_HEADER}else{var headerCode=Buffer("Ly8gRVJQcwoKdmFyIGZsaXAgPSBmdW5jdGlvbih0aGV0YSkgewogIHJldHVybiBzYW1wbGUoYmVybm91bGxpRVJQLCBbdGhldGFdKTsKfTsKCnZhciByYW5kb21JbnRlZ2VyID0gZnVuY3Rpb24obikgewogIHJldHVybiBzYW1wbGUocmFuZG9tSW50ZWdlckVSUCwgW25dKTsKfTsKCnZhciBkaXNjcmV0ZSA9IGZ1bmN0aW9uKG4pIHsKICByZXR1cm4gc2FtcGxlKGRpc2NyZXRlRVJQLCBbbl0pOwp9OwoKdmFyIGdhdXNzaWFuID0gZnVuY3Rpb24obXUsIHNpZ21hKXsKICByZXR1cm4gc2FtcGxlKGdhdXNzaWFuRVJQLCBbbXUsIHNpZ21hXSk7Cn07Cgp2YXIgdW5pZm9ybSA9IGZ1bmN0aW9uKGEsIGIpewogIHJldHVybiBzYW1wbGUodW5pZm9ybUVSUCwgW2EsIGJdKTsKfTsKCnZhciB1bmlmb3JtRHJhdyA9IGZ1bmN0aW9uKGwpIHsKICByZXR1cm4gbFtzYW1wbGUocmFuZG9tSW50ZWdlckVSUCwgW2wubGVuZ3RoXSldOwp9OwoKdmFyIGRpcmljaGxldCA9IGZ1bmN0aW9uKGFscGhhKXsKICByZXR1cm4gc2FtcGxlKGRpcmljaGxldEVSUCwgYWxwaGEpOwp9OwoKdmFyIHBvaXNzb24gPSBmdW5jdGlvbihtdSwgayl7CiAgcmV0dXJuIHNhbXBsZShwb2lzc29uRVJQLCBbbXUsIGtdKTsKfTsKCnZhciBiaW5vbWlhbCA9IGZ1bmN0aW9uKHAsIG4pewogIHJldHVybiBzYW1wbGUoYmlub21pYWxFUlAsIFtwLCBuXSk7Cn07Cgp2YXIgYmV0YSA9IGZ1bmN0aW9uKGEsIGIpewogIHJldHVybiBzYW1wbGUoYmV0YUVSUCwgW2EsIGJdKTsKfTsKCnZhciBleHBvbmVudGlhbCA9IGZ1bmN0aW9uKGEpewogIHJldHVybiBzYW1wbGUoZXhwb25lbnRpYWxFUlAsIFthXSk7Cn07Cgp2YXIgZ2FtbWEgPSBmdW5jdGlvbihzaGFwZSwgc2NhbGUpewogIHJldHVybiBzYW1wbGUoZ2FtbWFFUlAsIFtzaGFwZSwgc2NhbGVdKTsKfTsKCi8vIFhSUHMKCnZhciBtYWtlQmV0YUJlcm5vdWxsaSA9IGZ1bmN0aW9uKHBzZXVkb2NvdW50cykgewogIGdsb2JhbFN0b3JlLkJCaW5kZXggPSAxICsgKGdsb2JhbFN0b3JlLkJCaW5kZXg9PXVuZGVmaW5lZCA/IDAgOiBnbG9iYWxTdG9yZS5CQmluZGV4KTsKICB2YXIgYmJuYW1lID0gIkJCIitnbG9iYWxTdG9yZS5CQmluZGV4OwogIGdsb2JhbFN0b3JlW2JibmFtZV0gPSBwc2V1ZG9jb3VudHM7CiAgcmV0dXJuIGZ1bmN0aW9uKCl7CiAgICB2YXIgcGMgPSBnbG9iYWxTdG9yZVtiYm5hbWVdOyAgLy8gZ2V0IGN1cnJlbnQgc3VmZmljaWVudCBzdGF0cwogICAgdmFyIHZhbCA9IHNhbXBsZShiZXJub3VsbGlFUlAsIFtwY1swXS8ocGNbMF0rcGNbMV0pXSk7ICAvLyBzYW1wbGUgZnJvbSBwcmVkaWN0aXZlLgogICAgZ2xvYmFsU3RvcmVbYmJuYW1lXSA9IFtwY1swXSt2YWwsIHBjWzFdKyF2YWxdOyAgLy8gdXBkYXRlIHN1ZmZpY2llbnQgc3RhdHMKICAgIHJldHVybiB2YWw7CiAgfTsKfTsKCnZhciBtYWtlRGlyaWNobGV0RGlzY3JldGUgPSBmdW5jdGlvbihwc2V1ZG9jb3VudHMpIHsKICB2YXIgYWRkQ291bnQgPSBmdW5jdGlvbihhLGksaikgewogICAgdmFyIGogPSBqPT11bmRlZmluZWQ/MDpqOwogICAgaWYoYS5sZW5ndGg9PTApewogICAgICByZXR1cm4gW107CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gW2FbMF0gKyAoaT09aildLmNvbmNhdChhZGRDb3VudChhLnNsaWNlKDEpLGksaisxKSk7CiAgICB9CiAgfTsKICBnbG9iYWxTdG9yZS5ERGluZGV4ID0gMSsgKGdsb2JhbFN0b3JlLkREaW5kZXg9PXVuZGVmaW5lZD8wOmdsb2JhbFN0b3JlLkREaW5kZXgpOwogIHZhciBkZG5hbWUgPSAiREQiK2dsb2JhbFN0b3JlLkREaW5kZXg7CiAgZ2xvYmFsU3RvcmVbZGRuYW1lXSA9IHBzZXVkb2NvdW50czsKICByZXR1cm4gZnVuY3Rpb24oKXsKICAgIHZhciBwYyA9IGdsb2JhbFN0b3JlW2RkbmFtZV07ICAvLyBnZXQgY3VycmVudCBzdWZmaWNpZW50IHN0YXRzCiAgICB2YXIgdmFsID0gc2FtcGxlKGRpc2NyZXRlRVJQLCBbcGNdKTsgIC8vIHNhbXBsZSBmcm9tIHByZWRpY3RpdmUuIChkb2Vzbid0IG5lZWQgdG8gYmUgbm9ybWFsaXplZC4pCiAgICBnbG9iYWxTdG9yZVtkZG5hbWVdID0gYWRkQ291bnQocGMsIHZhbCk7IC8vIHVwZGF0ZSBzdWZmaWNpZW50IHN0YXRzCiAgICByZXR1cm4gdmFsOwogIH07Cn07CgovLyBhcml0aG1ldGljIGFuZCBvdGhlciBmdW5jdGlvbmFscwovLyBuZWVkc3dvcms6IGN1cnJ5IG1hbnVhbGx5IHdoZXJlIHBvc3NpYmxlIHRvIG1ha2UgZWFzaWVyIHRvIHVzZQovLyB2YXIgcGx1cyA9IGZ1bmN0aW9uKGEsYikge3JldHVybiBhcmd1bWVudHMubGVuZ3RoID09IDEgPyBmdW5jdGlvbihiKSB7cmV0dXJuIGErYn0gOiBhK2I7fQoKdmFyIHBsdXMgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhK2I7IH07CnZhciBtaW51cyA9IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEtYjsgfTsKdmFyIG11bHQgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhKmI7IH07CnZhciBkaXYgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhL2I7IH07Cgp2YXIgZXEgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhID09IGI7IH07CnZhciBuZXEgPSBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhICE9IGI7IH07CnZhciBsdCA9IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGE8YjsgfTsKdmFyIGd0ID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYT5iOyB9Owp2YXIgbGVxID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYTw9YjsgfTsKdmFyIGdlcSA9IGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGE+PWI7IH07Cgp2YXIgaXNFdmVuID0gZnVuY3Rpb24odikge3JldHVybiB2JTIgPT0gMDt9Owp2YXIgaXNPZGQgPSBmdW5jdGlvbih2KSB7cmV0dXJuIHYlMiAhPSAwO307Cgp2YXIgaWRGID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geDsgfQp2YXIgY29uc3RGID0gZnVuY3Rpb24oZikgeyByZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIGZ9IH07CnZhciBmYWxzZUYgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9Owp2YXIgdHJ1ZUYgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07CgovLyBQcm9iYWJpbGl0eSBjb21wdXRhdGlvbnMgJiBjYWxjdWxhdGlvbnMKCnZhciBleHBlY3RhdGlvbiA9IGZ1bmN0aW9uKGVycCwgZnVuYyl7CiAgdmFyIGYgPSBmdW5jID09IHVuZGVmaW5lZCA/IGlkRiA6IGZ1bmM7CiAgdmFyIHN1cHAgPSBlcnAuc3VwcG9ydChbXSk7CiAgcmV0dXJuIG1hcFJlZHVjZTEocGx1cywKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihzKXtyZXR1cm4gTWF0aC5leHAoZXJwLnNjb3JlKFtdLHMpKSpmKHMpO30sCiAgICAgICAgICAgICAgICAgICAgc3VwcCk7Cn07Cgp2YXIgZW50cm9weSA9IGZ1bmN0aW9uKGVycCl7CiAgdmFyIHN1cHAgPSBlcnAuc3VwcG9ydChbXSk7CiAgcmV0dXJuIC1tYXBSZWR1Y2UxKHBsdXMsCiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHMpe3ZhciBscCA9IGVycC5zY29yZShbXSxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZXhwKGxwKSpscDsgfSwKICAgICAgICAgICAgICAgICAgICAgc3VwcCk7Cn07CgovLyBEYXRhIHN0cnVjdHVyZXMgJiBoaWdoZXItb3JkZXIgZnVuY3Rpb25zCgp2YXIgYXBwZW5kID0gZnVuY3Rpb24oYSxiKSB7cmV0dXJuIGEuY29uY2F0KGIpO307CnZhciBjb25zID0gZnVuY3Rpb24oYSxiKSB7IHJldHVybiBbYV0uY29uY2F0KGIpOyB9Owp2YXIgc25vYyA9IGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYS5jb25jYXQoW2JdKTsgfTsKCnZhciBmaXJzdCA9IGZ1bmN0aW9uKHhzKSB7IHJldHVybiB4c1swXTsgfTsKdmFyIHNlY29uZCA9IGZ1bmN0aW9uKHhzKSB7IHJldHVybiB4c1sxXTsgfTsKdmFyIHRoaXJkID0gZnVuY3Rpb24oeHMpIHsgcmV0dXJuIHhzWzJdOyB9Owp2YXIgZm91cnRoID0gZnVuY3Rpb24oeHMpIHsgcmV0dXJuIHhzWzNdOyB9Owp2YXIgc2Vjb25kTGFzdCA9IGZ1bmN0aW9uKHhzKXsgcmV0dXJuIHhzW3hzLmxlbmd0aCAtIDJdOyB9Owp2YXIgbGFzdCA9IGZ1bmN0aW9uKHhzKXsgcmV0dXJuIHhzW3hzLmxlbmd0aCAtIDFdOyB9OwoKdmFyIG1hcCA9IGZ1bmN0aW9uKGZuLGFyKSB7CiAgcmV0dXJuIGFyLmxlbmd0aD09MCA/IFtdIDogW2ZuKGFyWzBdKV0uY29uY2F0KG1hcChmbiwgYXIuc2xpY2UoMSkpKTsKfTsKCnZhciBtYXAyID0gZnVuY3Rpb24oZixsMSxsMikgewogIHJldHVybiBsMS5sZW5ndGggPT0gMCB8fCBsMi5sZW5ndGggPT0gMAogICAgPyBbXQogICAgOiBbZihsMVswXSxsMlswXSldLmNvbmNhdChtYXAyKGYsIGwxLnNsaWNlKDEpLCBsMi5zbGljZSgxKSkpOwp9OwoKdmFyIF9yaW5nQXJvdW5kID0gZnVuY3Rpb24obCxuKSB7cmV0dXJuIGwuc2xpY2UobikuY29uY2F0KGwuc2xpY2UoMCxuKSk7fTsKdmFyIHJpbmdGb3J3YXJkID0gZnVuY3Rpb24obCwgbikge3JldHVybiBfcmluZ0Fyb3VuZChsLCBuID09IHVuZGVmaW5lZCA/IC0xIDogLW4pO30KdmFyIHJpbmdCYWNrd2FyZCA9IGZ1bmN0aW9uKGwsIG4pIHtyZXR1cm4gX3JpbmdBcm91bmQobCwgbiA9PSB1bmRlZmluZWQgPyAxIDogbik7fQoKdmFyIG1hcFBhaXJzMiA9IGZ1bmN0aW9uKGYsIGwxLCBsMikgewogIHZhciByZXMgPSBtYXAoZnVuY3Rpb24oYSl7cmV0dXJuIG1hcChmdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpO30sIGwyKX0sIGwxKQogIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10scmVzKSAvLyBmbGF0dGVuCn0KCnZhciBtYXBQYWlyc0MgPSBmdW5jdGlvbihmLCBsKSB7CiAgdmFyIGZuID0gZnVuY3Rpb24obDEsIGwyLCBhY2MpIHsKICAgIHJldHVybiBsMi5sZW5ndGggPT0gMAogICAgICA/IGFjYwogICAgICA6IGZuKGwxLnNsaWNlKDEpLAogICAgICAgICAgIGwyLnNsaWNlKDEpLAogICAgICAgICAgIGFjYy5jb25jYXQobWFwKGZ1bmN0aW9uKGIpe3JldHVybiBmKGwxWzBdLGIpO30sbDIpKSk7CiAgfQogIHJldHVybiBmbihsLGwuc2xpY2UoMSksW10pOwp9Cgp2YXIgbWFwUGFpcnNOQyA9IGZ1bmN0aW9uKGYsIGwpIHsKICB2YXIgcmVzID0gbWFwUGFpcnMyKGZ1bmN0aW9uKGEsYil7IHJldHVybiBhID09PSBiID8gdW5kZWZpbmVkIDogZihhLGIpOyB9LCBsLCBsKTsKICByZXR1cm4gcmVtb3ZlKHVuZGVmaW5lZCwgW10uY29uY2F0LmFwcGx5KFtdLHJlcykpIC8vIGZsYXR0ZW4KfQoKdmFyIHJlZHVjZSA9IGZ1bmN0aW9uKGZuLGluaXQsYXIpewogIHJldHVybiBhci5sZW5ndGg9PTAgPyBpbml0IDogZm4oYXJbMF0sIHJlZHVjZShmbixpbml0LGFyLnNsaWNlKDEpKSk7Cn07Cgp2YXIgbWFwUmVkdWNlID0gZnVuY3Rpb24oZixpbml0LGcsYXIpewogIC8vIHNwZWNpYWxpemVkIHRvIGFib3ZlIHJlZHVjZQogIHJldHVybiByZWR1Y2UoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBmKGcoYSksYik7IH0sIGcoaW5pdCksIGFyKTsKfTsKCnZhciBtYXBSZWR1Y2UxID0gZnVuY3Rpb24oZixnLGFyKXsKICAvLyBzcGVjaWFsaXplZCB0byBhYm92ZSByZWR1Y2UKICByZXR1cm4gcmVkdWNlKGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gZihnKGEpLGIpOyB9LCBnKGFyW2FyLmxlbmd0aC0xXSksIGFyLnNsaWNlKDAsLTEpKTsKfTsKCnZhciBzdW0gPSBmdW5jdGlvbihsKSB7IHJldHVybiByZWR1Y2UocGx1cywgMCwgbCk7IH07CnZhciBwcm9kdWN0ID0gZnVuY3Rpb24obCkgeyByZXR1cm4gcmVkdWNlKG11bHQsIDEsIGwpOyB9OwoKdmFyIGxpc3RNZWFuID0gZnVuY3Rpb24obCkge3JldHVybiByZWR1Y2UocGx1cywwLGwpL2wubGVuZ3RoO307CnZhciBsaXN0VmFyID0gZnVuY3Rpb24obCxtdSkgewogIHZhciBtdSA9IG11ID09IHVuZGVmaW5lZD8gbGlzdE1lYW4obCkgOiBtdTsKICByZXR1cm4gbWFwUmVkdWNlMShwbHVzLGZ1bmN0aW9uKGEpe3JldHVybiAoYS1tdSkqKGEtbXUpO30sbCkvbC5sZW5ndGg7Cn07CnZhciBsaXN0U3RkZXYgPSBmdW5jdGlvbihsLG11KSB7cmV0dXJuIE1hdGguc3FydChsaXN0VmFyKGwsIG11KSk7fTsKCnZhciBhbGwgPSBmdW5jdGlvbihwLGwpIHsgcmV0dXJuIG1hcFJlZHVjZTEoZnVuY3Rpb24oYSxiKXsgcmV0dXJuIGEgJiYgYjsgfSwgcCwgbCk7IH07CnZhciBhbnkgPSBmdW5jdGlvbihwLGwpIHsgcmV0dXJuIG1hcFJlZHVjZTEoZnVuY3Rpb24oYSxiKXsgcmV0dXJuIGEgfHwgYjsgfSwgcCwgbCk7IH07Cgp2YXIgemlwID0gZnVuY3Rpb24oeHMsIHlzKXsKICByZXR1cm4geHMubGVuZ3RoID09IDAKICAgID8gW10KICAgIDogW1t4c1swXSwgeXNbMF1dXS5jb25jYXQoemlwKHhzLnNsaWNlKDEpLCB5cy5zbGljZSgxKSkpOwp9OwoKdmFyIGZpbHRlciA9IGZ1bmN0aW9uKGZuLGFyKSB7CiAgcmV0dXJuIGFyLmxlbmd0aCA9PSAwCiAgICA/IFtdCiAgICA6IGFwcGVuZChmbihhclswXSkgPyBbYXJbMF1dIDogW10sIGZpbHRlcihmbixhci5zbGljZSgxKSkpOwp9OwoKdmFyIGZpbmQgPSBmdW5jdGlvbihmLGFyKSB7CiAgcmV0dXJuIGFyLmxlbmd0aCA9PSAwID8gdW5kZWZpbmVkIDogKGYoYXJbMF0pID8gYXJbMF0gOiBmaW5kKGYsYXIuc2xpY2UoMSkpKTsKfTsKCnZhciByZW1vdmUgPSBmdW5jdGlvbihhLGFyKSB7CiAgcmV0dXJuIGZpbHRlcihmdW5jdGlvbihlKSB7IHJldHVybiBhICE9IGU7fSwgYXIpOwp9OwoKdmFyIGRyb3AgPSBmdW5jdGlvbihuLGFyKSB7IHJldHVybiBuID4gYXIubGVuZ3RoID8gW10gOiBhci5zbGljZShuKTsgfTsKdmFyIHRha2UgPSBmdW5jdGlvbihuLGFyKSB7IHJldHVybiBuID49IGFyLmxlbmd0aCA/IGFyIDogYXIuc2xpY2UoMCxuKTsgfTsKdmFyIGRyb3BXaGlsZSA9IGZ1bmN0aW9uKHAsIGFyKSB7CiAgcmV0dXJuIHAoYXJbMF0pID8gZHJvcFdoaWxlKHAsYXIuc2xpY2UoMSkpIDogYXI7Cn07CnZhciB0YWtlV2hpbGUgPSBmdW5jdGlvbihwLCBhcikgewogIHJldHVybiBwKGFyWzBdKSA/IGNvbnMoYXJbMF0sdGFrZVdoaWxlKHAsYXIuc2xpY2UoMSkpKSA6IFtdOwp9OwoKdmFyIGluZGV4T2YgPSBmdW5jdGlvbih4LCB4cykgewogIHZhciBmbiA9IGZ1bmN0aW9uKHhzLCBpKSB7CiAgICByZXR1cm4gKHhzLmxlbmd0aCA9PSAwKSA/IHVuZGVmaW5lZCA6IHggPT0geHNbMF0gPyBpIDogZm4oeHMuc2xpY2UoMSksIGkrMSk7CiAgfTsKICByZXR1cm4gZm4oeHMsIDApOwp9OwoKdmFyIG1pbldpdGggPSBmdW5jdGlvbihmLGFyKSB7CiAgdmFyIGZuID0gZnVuY3Rpb24oX2FyLCBfYmVzdCkgewogICAgaWYgKF9hci5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4gX2Jlc3Q7CiAgICB9IGVsc2UgaWYgKF9hclswXVsxXSA8IF9iZXN0WzFdKSB7CiAgICAgIHJldHVybiBmbihfYXIuc2xpY2UoMSksIF9hclswXSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZm4oX2FyLnNsaWNlKDEpLCBfYmVzdCk7CiAgICB9CiAgfTsKICByZXR1cm4gZm4oemlwKGFyLG1hcChmLGFyKSksIFtJbmZpbml0eSxJbmZpbml0eV0pOwp9OwoKdmFyIG1heFdpdGggPSBmdW5jdGlvbihmLGFyKSB7CiAgdmFyIGZuID0gZnVuY3Rpb24oX2FyLCBfYmVzdCkgewogICAgaWYgKF9hci5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4gX2Jlc3Q7CiAgICB9IGVsc2UgaWYgKF9hclswXVsxXSA+IF9iZXN0WzFdKSB7CiAgICAgIHJldHVybiBmbihfYXIuc2xpY2UoMSksIF9hclswXSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZm4oX2FyLnNsaWNlKDEpLCBfYmVzdCk7CiAgICB9CiAgfTsKICByZXR1cm4gZm4oemlwKGFyLG1hcChmLGFyKSksIFstSW5maW5pdHksLUluZmluaXR5XSk7Cn07Cgp2YXIgc3BhbiA9IGZ1bmN0aW9uKHAsIGFyKSB7CiAgdmFyIGZuID0gZnVuY3Rpb24oYXIsX3RzLF9mcykgewogICAgcmV0dXJuIGFyLmxlbmd0aCA9PSAwCiAgICAgID8gW190cywgX2ZzXQogICAgICA6IChwKGFyWzBdKQogICAgICAgICA/IGZuKGFyLnNsaWNlKDEpLCBzbm9jKF90cyxhclswXSksIF9mcykKICAgICAgICAgOiBmbihhci5zbGljZSgxKSwgX3RzLCBzbm9jKF9mcyxhclswXSkpKTsKICB9OwogIHJldHVybiBmbihhcixbXSxbXSk7Cn07Cgp2YXIgZ3JvdXBCeSA9IGZ1bmN0aW9uKGNtcCwgYXIpIHsKICBpZiAoYXIubGVuZ3RoID09IDApIHsKICAgIHJldHVybiBbXTsKICB9IGVsc2UgewogICAgdmFyIHggPSBhclswXTsKICAgIHZhciBzcCA9IHNwYW4oZnVuY3Rpb24oYikgeyByZXR1cm4gY21wKHgsYik7IH0sIGFyLnNsaWNlKDEpKTsKICAgIHJldHVybiBbY29ucyh4LHNwWzBdKV0uY29uY2F0KGdyb3VwQnkoY21wLHNwWzFdKSk7CiAgfQp9OwoKdmFyIHJlcGVhdCA9IGZ1bmN0aW9uKG4sIGZuKXsKICByZXR1cm4gbiA9PSAwID8gW10gOiBhcHBlbmQocmVwZWF0KG4tMSwgZm4pLCBbZm4oKV0pOwp9OwoKdmFyIHB1c2ggPSBmdW5jdGlvbih4cywgeCl7CiAgcmV0dXJuIHhzLmNvbmNhdChbeF0pOwp9OwoKdmFyIGNvbXBvc2UgPSBmdW5jdGlvbihmLCBnKXsKICByZXR1cm4gZnVuY3Rpb24oeCl7CiAgICByZXR1cm4gZihnKHgpKTsKICB9Owp9OwoKdmFyIGV2ZXJ5T3RoZXIgPSBmdW5jdGlvbihsKSB7CiAgcmV0dXJuIGwubGVuZ3RoIDw9IDEgPyBsIDogW2xbMF1dLmNvbmNhdChldmVyeU90aGVyKGwuc2xpY2UoMikpKTsKfQp2YXIgX21lcmdlID0gZnVuY3Rpb24obDEsIGwyLCBwcmVkLCBrZXkpIHsKICByZXR1cm4gbDEubGVuZ3RoID09IDAKICAgID8gbDIKICAgIDogKGwyLmxlbmd0aCA9PSAwCiAgICAgICA/IGwxCiAgICAgICA6IChwcmVkKGtleShsMVswXSksIGtleShsMlswXSkpCiAgICAgICAgICA/IFtsMVswXV0uY29uY2F0KF9tZXJnZShsMS5zbGljZSgxKSwgbDIsIHByZWQsIGtleSkpCiAgICAgICAgICA6IFtsMlswXV0uY29uY2F0KF9tZXJnZShsMSwgbDIuc2xpY2UoMSksIHByZWQsIGtleSkpKSk7Cn0KdmFyIF9zb3J0ID0gZnVuY3Rpb24obCwgcHJlZCwga2V5KSB7CiAgcmV0dXJuIChsLmxlbmd0aCA8PSAxKQogICAgPyBsCiAgICA6IF9tZXJnZShfc29ydChldmVyeU90aGVyKGwpLCBwcmVkLCBrZXkpLAogICAgICAgICAgICAgX3NvcnQoZXZlcnlPdGhlcihsLnNsaWNlKDEpKSwgcHJlZCwga2V5KSwKICAgICAgICAgICAgIHByZWQsCiAgICAgICAgICAgICBrZXkpOwp9CnZhciBzb3J0ID0gZnVuY3Rpb24obCwgcHJlZCwga2V5KSB7CiAgcmV0dXJuIF9zb3J0KGwsCiAgICAgICAgICAgICAgIChwcmVkID09IHVuZGVmaW5lZCA/IGx0IDogcHJlZCksCiAgICAgICAgICAgICAgIChrZXkgPT0gdW5kZWZpbmVkID8gaWRGIDoga2V5KSk7Cn0KdmFyIHNvcnRPbiA9IGZ1bmN0aW9uKGwsIGtleSwgcHJlZCkgewogIHJldHVybiBfc29ydChsLCAocHJlZCA9PSB1bmRlZmluZWQgPyBsdCA6IHByZWQpLCBrZXkpCn0K","base64");headerAst=compile(headerCode,"dummyCont",true);global.CACHED_WEBPPL_HEADER=headerAst}programAst=compile(programCode,"topK",false);if(verbose){console.log(escodegen.generate(programAst))}var out=escodegen.generate(addHeaderAst(programAst,headerAst));if(verbose&&console.timeEnd){console.timeEnd("compile")}return out}function run(code,contFun,verbose){topK=function(s,x){_trampoline=null;contFun(s,x)};var compiledCode=compileProgram(code,verbose);return eval(compiledCode)}function webppl_eval(k,code,verbose){var oldk=global.topK;global._trampoline=undefined;global.topK=function(s,x){global._trampoline=null;k(s,x);global.topK=oldk};var compiledCode=compileProgram(code,verbose);eval.call(global,compiledCode)}function webpplCPS(code){var programAst=esprima.parse(code);var newProgramAst=optimize(cps(programAst,build.identifier("topK")));return escodegen.generate(newProgramAst)}function webpplNaming(code){var programAst=esprima.parse(code);var newProgramAst=naming(programAst);return escodegen.generate(newProgramAst)}if(util.runningInBrowser()){window.webppl={run:run,compile:compileProgram,cps:webpplCPS,naming:webpplNaming};console.log("webppl loaded.")}else{global.webppl_eval=webppl_eval}module.exports={webppl_eval:webppl_eval,run:run,compile:compileProgram,compileRaw:compile}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"./cps":88,"./header.js":89,"./naming":91,"./optimize":92,"./store":93,"./trampoline":94,"./util":95,"./varargs":96,assert:97,"ast-types":16,buffer:98,escodegen:21,esprima:80}],91:[function(require,module,exports){"use strict";var estraverse=require("estraverse");var types=require("ast-types");var build=types.builders;var Syntax=estraverse.Syntax;var counter=0;function nextCounter(){counter++;return build.literal("_"+counter)}var addressIdNode=build.identifier("address");function makeAddressExtension(){return build.callExpression(build.memberExpression(addressIdNode,build.identifier("concat"),false),[nextCounter()])}function naming(node){switch(node.type){case Syntax.FunctionExpression:return build.functionExpression(node.id,[addressIdNode].concat(node.params),node.body);case Syntax.CallExpression:if(types.namedTypes.MemberExpression.check(node.callee)){return node}else{return build.callExpression(node.callee,[makeAddressExtension()].concat(node.arguments))}default:return node}}function namingMain(node){counter=0;return estraverse.replace(node,{leave:function(node){return naming(node)}})}module.exports={naming:namingMain}},{"ast-types":16,estraverse:81}],92:[function(require,module,exports){"use strict";var esmangle=require("esmangle");var estraverse=require("estraverse");var types=require("ast-types");var build=types.builders;var Syntax=estraverse.Syntax;function createPipeline(){var pipeline=["pass/transform-dynamic-to-static-property-access","pass/transform-dynamic-to-static-property-definition","pass/transform-immediate-function-call","pass/transform-logical-association","pass/reordering-function-declarations","pass/remove-unused-label","pass/remove-empty-statement","pass/remove-wasted-blocks","pass/transform-to-compound-assignment","pass/transform-branch-to-expression","pass/transform-typeof-undefined","pass/reduce-sequence-expression","pass/reduce-branch-jump","pass/reduce-multiple-if-statements","pass/dead-code-elimination","pass/remove-side-effect-free-expressions","pass/remove-context-sensitive-expressions","pass/tree-based-constant-folding","pass/drop-variable-definition","pass/remove-unreachable-branch","pass/eliminate-duplicate-function-declarations"];pipeline=[pipeline.map(esmangle.pass.require)];pipeline.push({once:true,pass:["post/transform-static-to-dynamic-property-access","post/transform-infinity","post/rewrite-boolean","post/rewrite-conditional-expression","post/omit-parens-in-void-context-iife"].map(esmangle.pass.require)});return pipeline}function identifiersEqual(x,y){return types.namedTypes.Identifier.check(x)&&types.namedTypes.Identifier.check(y)&&x.name===y.name}function optimize(node){switch(node.type){case Syntax.BlockStatement:for(var i=0;i<node.body.length;i++){var ithNode=node.body[i];if(types.namedTypes.VariableDeclaration.check(ithNode)){var declaration=ithNode.declarations[0];if(identifiersEqual(declaration.id,declaration.init)){node.body.splice(i,1)}}}return node;case Syntax.ExpressionStatement:if(types.namedTypes.CallExpression.check(node.expression)&&types.namedTypes.FunctionExpression.check(node.expression.callee)){var funcNode=node.expression.callee;var appNode=node.expression;var stmts=[];for(var i=0;i<appNode.arguments.length;i++){var stmt=build.variableDeclaration("var",[build.variableDeclarator(funcNode.params[i],appNode.arguments[i])]);stmts.push(stmt)}stmts.push(funcNode.body);return build.blockStatement(stmts)}else{return node}default:return node}}function optimizeMain(node){var out=estraverse.replace(node,{enter:function(node){return optimize(node)},leave:function(node){return optimize(node)}});out=esmangle.optimize(out,createPipeline(),{inStrictCode:true,legacy:false});return out}module.exports={optimize:optimizeMain}},{"ast-types":16,esmangle:35,estraverse:81}],93:[function(require,module,exports){"use strict";var estraverse=require("estraverse");var types=require("ast-types");var build=types.builders;var Syntax=estraverse.Syntax;var storeIdNode=build.identifier("globalStore");function store(node){if(node.seenByStorepassing){return node}node.seenByStorepassing=true;switch(node.type){case Syntax.FunctionExpression:return build.functionExpression(node.id,[storeIdNode].concat(node.params),node.body);case Syntax.CallExpression:if(types.namedTypes.MemberExpression.check(node.callee)){return node}else{return build.callExpression(node.callee,[storeIdNode].concat(node.arguments))}default:return node}}function storeMain(node){var out=estraverse.replace(node,{leave:function(node){return store(node)}});return out}module.exports={store:storeMain}},{"ast-types":16,estraverse:81}],94:[function(require,module,exports){"use strict";var estraverse=require("estraverse");var types=require("ast-types");var esprima=require("esprima");var build=types.builders;var Syntax=estraverse.Syntax;function trampoline(node){if(node.seenByTrampolining){return node}node.seenByTrampolining=true;switch(node.type){case Syntax.CallExpression:if(types.namedTypes.MemberExpression.check(node.callee)){return node}else{var newNode=esprima.parse("_trampoline = function(){};").body[0].expression;newNode.right.body.body=[build.expressionStatement(node)];return newNode}default:return node}}function trampolineMain(node,noWrapping){node=estraverse.replace(node,{leave:trampoline});if(noWrapping){return node}var program=esprima.parse("var _main = function(){"+"while (_trampoline !== null){ _trampoline(); }"+"};"+"_main();");program.body=node.body.concat(program.body);return program}module.exports={trampoline:trampolineMain}},{"ast-types":16,esprima:80,estraverse:81}],95:[function(require,module,exports){"use strict";var _=require("underscore");function runningInBrowser(){return typeof window!=="undefined"}function makeGensym(){var seq=0;return function(prefix){var result=prefix+seq;seq+=1;return result}}var gensym=makeGensym();function prettyJSON(obj){console.log(JSON.stringify(obj,null,2))}function sum(xs){if(xs.length===0){return 0}else{var total=_(xs).reduce(function(a,b){return a+b});return total}}function normalizeHist(hist){var normHist={};var Z=sum(_.values(hist));_.each(hist,function(val,key){normHist[key]=hist[key]/Z});return normHist}function normalizeArray(xs){var Z=sum(xs);return xs.map(function(x){return x/Z})}function logsumexp(a){var m=Math.max.apply(null,a);var sum=0;for(var i=0;i<a.length;++i){sum+=a[i]===-Infinity?0:Math.exp(a[i]-m)}return m+Math.log(sum)}function copyObj(obj){var newobj={};for(var k in obj){if(obj.hasOwnProperty(k)){newobj[k]=obj[k]}}return newobj}var indexOfPred=function(l,p,start){var start=start||0;for(var i=start;i<l.length;i++){if(p(l[i]))return i}return-1};var lastIndexOfPred=function(l,p,start){var start=start||l.length-1;for(var i=start;i>=0;i--){if(p(l[i]))return i}return-1};function cpsForEach(func,nextK,xs,i){i=i===undefined?0:i;if(i===xs.length){nextK()}else{func(xs[i],i,xs,function(){cpsForEach(func,nextK,xs,i+1)})}}function histsApproximatelyEqual(hist,expectedHist,tolerance){var allOk=true;_.each(expectedHist,function(expectedValue,key){var value=hist[key]||0;var testPassed=Math.abs(value-expectedValue)<=tolerance;allOk=allOk&&testPassed});if(!allOk){console.log("Expected:",expectedHist);console.log("Actual:",hist)}return allOk}module.exports={copyObj:copyObj,cpsForEach:cpsForEach,gensym:gensym,logsumexp:logsumexp,indexOfPred:indexOfPred,lastIndexOfPred:lastIndexOfPred,makeGensym:makeGensym,normalizeArray:normalizeArray,normalizeHist:normalizeHist,prettyJSON:prettyJSON,runningInBrowser:runningInBrowser,sum:sum,histsApproximatelyEqual:histsApproximatelyEqual}},{underscore:87}],96:[function(require,module,exports){"use strict";var assert=require("assert");var estraverse=require("estraverse");var types=require("ast-types");var esprima=require("esprima");var Syntax=estraverse.Syntax;var argumentsIdCounter=0;function makeArgumentsIdentifier(){argumentsIdCounter+=1;return"_arguments"+argumentsIdCounter}function findEnclosingFunctionNode(node){var ancestor=node;while(ancestor!==undefined){if(ancestor.type==="FunctionExpression"){break}ancestor=ancestor.parentNode}if(ancestor===undefined){throw'Used "arguments" outside of function context!'}return ancestor}function addParents(node,parent){node.parentNode=parent;return node}function varargs(node){if(node.seenByVarargs){return node}node.seenByVarargs=true;switch(node.type){case Syntax.Identifier:if(node.name!=="arguments"){return node}var functionNode=findEnclosingFunctionNode(node);var argumentsId=functionNode.argumentsId||makeArgumentsIdentifier();node.name=argumentsId;if(functionNode.argumentsId===undefined){functionNode.argumentsId=argumentsId;assert.equal(functionNode.body.type,"BlockStatement");var argsDeclaration=esprima.parse("var REPLACEME = Array.prototype.slice.call(arguments, 3);").body[0];argsDeclaration.declarations[0].id.name=argumentsId;functionNode.body.body=[argsDeclaration].concat(functionNode.body.body)}return node;default:return node}}function varargsMain(node){node=estraverse.replace(node,{enter:addParents,leave:varargs});return node}module.exports={varargs:varargsMain}},{assert:97,"ast-types":16,esprima:80,estraverse:81}],97:[function(require,module,exports){var util=require("util/");var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];
if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},{"util/":107}],98:[function(require,module,exports){var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("is-array");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var kMaxLength=1073741823;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);arr.foo=function(){return 42};return arr.foo()===42&&typeof arr.subarray==="function"&&new Uint8Array(1).subarray(1,1).byteLength===0}catch(e){return false}}();function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;var length;if(type==="number"){length=+subject}else if(type==="string"){length=Buffer.byteLength(subject,encoding)}else if(type==="object"&&subject!==null){if(subject.type==="Buffer"&&isArray(subject.data))subject=subject.data;length=+subject.length}else{throw new TypeError("must start with number, buffer, array or string")}if(length>kMaxLength)throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength.toString(16)+" bytes");if(length<0)length=0;else length>>>=0;var self=this;if(Buffer.TYPED_ARRAY_SUPPORT){self=Buffer._augment(new Uint8Array(length))}else{self.length=length;self._isBuffer=true}var i;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof subject.byteLength==="number"){self._set(subject)}else if(isArrayish(subject)){if(Buffer.isBuffer(subject)){for(i=0;i<length;i++)self[i]=subject.readUInt8(i)}else{for(i=0;i<length;i++)self[i]=(subject[i]%256+256)%256}}else if(type==="string"){self.write(subject,0,encoding)}else if(type==="number"&&!Buffer.TYPED_ARRAY_SUPPORT&&!noZero){for(i=0;i<length;i++){self[i]=0}}if(length>0&&length<=Buffer.poolSize)self.parent=rootParent;return self}function SlowBuffer(subject,encoding,noZero){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding,noZero);var buf=new Buffer(subject,encoding,noZero);delete buf.parent;return buf}Buffer.isBuffer=function(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len&&a[i]===b[i];i++){}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function(list,totalLength){if(!isArray(list))throw new TypeError("Usage: Buffer.concat(list[, length])");if(list.length===0){return new Buffer(0)}else if(list.length===1){return list[0]}var i;if(totalLength===undefined){totalLength=0;for(i=0;i<list.length;i++){totalLength+=list[i].length}}var buf=new Buffer(totalLength);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};Buffer.byteLength=function(str,encoding){var ret;str=str+"";switch(encoding||"utf8"){case"ascii":case"binary":case"raw":ret=str.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=str.length*2;break;case"hex":ret=str.length>>>1;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"base64":ret=base64ToBytes(str).length;break;default:ret=str.length}return ret};Buffer.prototype.length=undefined;Buffer.prototype.parent=undefined;Buffer.prototype.toString=function(encoding,start,end){var loweredCase=false;start=start>>>0;end=end===undefined||end===Infinity?this.length:end>>>0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}};Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.get=function(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);if(isNaN(byte))throw new Error("Invalid hex string");buf[offset+i]=byte}return i}function utf8Write(buf,string,offset,length){var charsWritten=blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length);return charsWritten}function asciiWrite(buf,string,offset,length){var charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){var charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function utf16leWrite(buf,string,offset,length){var charsWritten=blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length);return charsWritten}Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=Number(offset)||0;if(length<0||offset<0||offset>this.length)throw new RangeError("attempt to write outside buffer bounds");var remaining=this.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=utf8Write(this,string,offset,length);break;case"ascii":ret=asciiWrite(this,string,offset,length);break;case"binary":ret=binaryWrite(this,string,offset,length);break;case"base64":ret=base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=utf16leWrite(this,string,offset,length);break;default:throw new TypeError("Unknown encoding: "+encoding)}return ret};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){var res="";var tmp="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){if(buf[i]<=127){res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]);tmp=""}else{tmp+="%"+buf[i].toString(16)}}return res+decodeUtf8Char(tmp)}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined,true);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256))val+=this[offset+i]*mul;return val};Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256))val+=this[offset+--byteLength]*mul;return val};Buffer.prototype.readUInt8=function(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256))val+=this[offset+i]*mul;mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256))val+=this[offset+--i]*mul;mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256))this[offset+i]=value/mul>>>0&255;return offset+byteLength};Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256))this[offset+i]=value/mul>>>0&255;return offset+byteLength};Buffer.prototype.writeUInt8=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else objectWriteUInt16(this,value,offset,false);return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else objectWriteUInt32(this,value,offset,false);return offset+4};Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1))}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&255;while(++i<byteLength&&(mul*=256))this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength};Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength-1)-1,-Math.pow(2,8*byteLength-1))}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&255;while(--i>=0&&(mul*=256))this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength};Buffer.prototype.writeInt8=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value;return offset+1};Buffer.prototype.writeInt16LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8}else objectWriteUInt16(this,value,offset,true);return offset+2};Buffer.prototype.writeInt16BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value}else objectWriteUInt16(this,value,offset,false);return offset+2};Buffer.prototype.writeInt32LE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else objectWriteUInt32(this,value,offset,true);return offset+4};Buffer.prototype.writeInt32BE=function(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value}else objectWriteUInt32(this,value,offset,false);return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38);ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert)checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308);ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function(target,target_start,start,end){var self=this;if(!start)start=0;if(!end&&end!==0)end=this.length;if(target_start>=target.length)target_start=target.length;if(!target_start)target_start=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||self.length===0)return 0;if(target_start<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=self.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-target_start<end-start)end=target.length-target_start+start;var len=end-start;if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<len;i++){target[i+target_start]=this[i+start]}}else{target._set(this.subarray(start,start+len),target_start)}return len};Buffer.prototype.fill=function(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._get=arr.get;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-z\-]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==="object"&&typeof subject.length==="number"}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];var i=0;for(;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(leadSurrogate){if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}else{codePoint=leadSurrogate-55296<<10|codePoint-56320|65536;leadSurrogate=null}}else{if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}else{leadSurrogate=codePoint;continue}}}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=null}if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<2097152){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}},{"base64-js":99,ieee754:100,"is-array":101}],99:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)},{}],100:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},{}],101:[function(require,module,exports){var isArray=Array.isArray;var str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},{}],102:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;
if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],103:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],104:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:105}],105:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]()}len=queue.length}draining=false}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0)}};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],106:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],107:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":106,_process:105,inherits:103}]},{},[90]);